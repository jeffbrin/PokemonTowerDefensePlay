(()=>{"use strict";var e,t,s,i,o={5008:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(50);class o{constructor(e,t,s=0){this.frames=e,this.interval=t,this.cycles=s,this.timer=new i.Z,this.currentFrame=0,this.timesPlayed=0,this.startTimer()}update(e){1!==this.frames.length&&this.timer.update(e)}startTimer(){this.timer.addTask((()=>{(0===this.cycles||this.timesPlayed<this.cycles)&&(this.currentFrame++,this.currentFrame%=this.frames.length,this.currentFrame===this.frames.length-1&&this.timesPlayed++)}),this.interval)}getCurrentFrame(){return this.frames[this.currentFrame]}refresh(){this.currentFrame=0,this.timesPlayed=0}isDone(){return this.timesPlayed===this.cycles}isHalfwayDone(){return this.currentFrame>=this.frames.length/2}}},6854:(e,t,s)=>{s.d(t,{Z:()=>i});const i=(e,t,s)=>e>=s.position.x&&e<=s.position.x+s.dimensions.x&&t>=s.position.y&&t<=s.position.y+s.dimensions.y},1767:(e,t,s)=>{s.d(t,{b:()=>i});const i=(e,t,s,i,o,n=5,r=!1,a=!0)=>{e.save(),e.beginPath(),e.moveTo(t+n,s),e.lineTo(t+i-n,s),e.quadraticCurveTo(t+i,s,t+i,s+n),e.lineTo(t+i,s+o-n),e.quadraticCurveTo(t+i,s+o,t+i-n,s+o),e.lineTo(t+n,s+o),e.quadraticCurveTo(t,s+o,t,s+o-n),e.lineTo(t,s+n),e.quadraticCurveTo(t,s,t+n,s),e.closePath(),r&&e.fill(),a&&e.stroke(),e.restore()}},465:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(){this.fonts={}}load(e){e.forEach((e=>{const t=new FontFace(e.name,`url(${e.path})`);this.fonts[e.name]=t,t.load().then((e=>{document.fonts.add(e)}))}))}get(e){return this.fonts[e]}}},7785:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(e,t,s,i,o){this.stateStack=e,this.context=t,this.width=s,this.height=i,this.timer=o,this.lastTime=0}start(){this.gameLoop()}gameLoop(e=0){const t=(e-this.lastTime)/1e3;this.update(t),this.lastTime=e,requestAnimationFrame((e=>this.gameLoop(e)))}update(e){this.stateStack.update(e),this.timer.update(e),this.render()}render(){this.context.clearRect(0,0,this.width,this.height),this.stateStack.render()}}},282:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(8038);class o{constructor(e=0,t=0,s=0,i=0,o="red"){this.colour=o,this.set(e,t,s,i)}set(e,t,s,o){this.position=new i.Z(e,t),this.dimensions=new i.Z(s,o)}didCollide(e){return t=this.position.x,s=this.position.y,i=this.dimensions.x,o=this.dimensions.y,n=e.position.x,r=e.position.y,a=e.dimensions.x,h=e.dimensions.y,t+i>=n&&t<=n+a&&s+o>=r&&s<=r+h;var t,s,i,o,n,r,a,h}getCollisionDirection(e){return((e,t,s,i,o,n,r,a)=>{const h=t+i-n,l=n+a-t,c=o+r-e,u=e+s-o;return l<h&&l<c&&l<u?0:h<l&&h<c&&h<u?1:c<u&&c<l&&c<h?2:u<c&&u<l&&u<h?3:void 0})(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y,e.position.x,e.position.y,e.dimensions.x,e.dimensions.y)}render(e){e.save(),e.strokeStyle=this.colour,e.beginPath(),e.rect(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y),e.stroke(),e.closePath(),e.restore()}}},9595:(e,t,s)=>{s.d(t,{Z:()=>o});class i{constructor(e,t,s,i){this.image=new Image(t,s),this.image.src=e,this.width=t,this.height=s,this.context=i,this.opacity=1}render(e,t,s=this.width,i=this.height){this.context.save(),this.image.style.opacity=this.opacity.toString(),this.context.globalAlpha=this.opacity,this.context.drawImage(this.image,e,t,s,i),this.context.restore()}}class o{constructor(e){this.context=e,this.images={}}load(e){e.forEach((e=>{this.images[e.name]=new i(e.path,e.width,e.height,this.context)}))}get(e){return this.images[e]}render(e,t,s,i=null,o=null){const n=this.get(e);n.render(t,s,i??n.width,o??n.height)}}},6740:(e,t,s)=>{s.d(t,{F:()=>i,q:()=>o});const i=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return e.x=e.x/t,e.y=e.y/t,e},o=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},1172:(e,t,s)=>{function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}s.d(t,{c:()=>i})},360:(e,t,s)=>{s.d(t,{D9:()=>o,mz:()=>i,n8:()=>n});const i=(e,t)=>Math.random()*(t-e)+e,o=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,n=e=>o(1,100)<=100*e},5735:(e,t,s)=>{s.d(t,{Z:()=>o});class i{constructor(e,t=1,s,i=!1,o=null){this.source=e,this.size=t,this.volume=s,this.loop=i,this.pool=[],this.currentSound=0,this.maxDuration=o}initializePool(){for(let e=0;e<this.size;e++){const e=new Audio(this.source);e.volume=this.volume,e.loop=this.loop,e.preload=!1,this.pool.push(e)}}play(){const e=new Audio(this.source);e.volume=this.volume,e.loop=this.loop,e.preload=!1,e.play(),this.pool.push(e),this.maxDuration&&setTimeout((()=>{this.pool.includes(e)&&(e.pause(),this.pool.splice(this.pool.indexOf(e),0))}),this.maxDuration),this.pool.length>this.size&&this.pool.splice(0,1),this.currentSound=this.pool.length-1}pause(){this.pool[this.currentSound].pause()}isPaused(){return this.pool[this.currentSound].paused}stop(){this.pause(),this.pool[this.currentSound].currentTime=0}}class o{constructor(){this.sounds={}}load(e){e.forEach((e=>{this.sounds[e.name]=new i(e.path,e.size,e.volume,e.loop,e.maxDuration)}))}get(e){return this.sounds[e]}play(e){this.get(e).play()}pause(e){this.get(e).pause()}stop(e){this.get(e).stop()}}},3378:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(e,t=0,s=0,i,o){this.graphic=e,this.x=t,this.y=s,this.width=i,this.height=o}render(e,t,s={x:1,y:1}){this.graphic.context.drawImage(this.graphic.image,this.x,this.y,this.width,this.height,e,t,this.width*s.x,this.height*s.y)}static generateSpritesFromSpriteSheet(e,t,s){const o=[],n=e.width/t,r=e.height/s;for(let a=0;a<r;a++)for(let r=0;r<n;r++)o.push(new i(e,r*t,a*s,t,s));return o}}},9313:(e,t,s)=>{s.d(t,{Z:()=>i});class i{enter(e){this.attachEventListeners()}exit(){this.removeEventListeners()}reenter(){this.attachEventListeners()}tempExit(){this.removeEventListeners()}update(e){}render(){}attachEventListeners(){this.removeEventListeners()}removeEventListeners(){}}},3083:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(){this.states=[]}update(e){this.top()&&null!=this.top()&&this.top().update(e)}render(e){this.states.forEach((t=>t.render(e)))}push(e){this.top()&&this.top().tempExit(),this.states.push(e),this.top().enter()}pop(){this.top().exit();const e=this.states.splice(this.states.length-1,1)[0];return this.top(),this.top().reenter(),e}top(){return this.states[this.states.length-1]}clear(){this.states=[]}}},50:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(){this.tasks=[]}update(e){this.paused||(this.updateTasks(e),this.removeFinishedTasks())}addTask(e,t,s=0,i=(()=>{})){const n=new o(e,t,s,i);return this.tasks.push(n),n}updateTasks(e){this.tasks.forEach((t=>{t.update(e)}))}removeFinishedTasks(){this.tasks=this.tasks.filter((e=>!e.isDone))}clear(){this.tasks=[]}tween(e,t,s,i,o=(()=>{})){const n=Object.assign({},e);this.addTask((o=>{t.forEach(((t,r)=>{const a=s[r]-e[t]>0?1:-1,h=n[t],l=s[r],c=h+o/i*(l-h);e[t]=1===a?Math.min(l,c):Math.max(l,c)}))}),0,i,o)}async tweenAsync(e,t,s,i){return new Promise((o=>{this.tween(e,t,s,i,o)}))}wait(e,t=(()=>{})){return this.addTask((()=>{}),0,e,t)}async waitAsync(e){return new Promise((t=>{this.addTask((()=>{}),0,e,t)}))}}class o{constructor(e,t,s=0,i=(()=>{})){this.action=e,this.interval=t,this.intervalTimer=0,this.totalTime=0,this.duration=s,this.callback=i,this.isDone=!1}clear(){this.isDone=!0}update(e){this.intervalTimer+=e,this.totalTime+=e,0===this.interval?this.action(this.totalTime):this.intervalTimer>=this.interval&&(this.intervalTimer=0,this.action(e)),0!==this.duration&&this.totalTime>=this.duration&&(this.callback(),this.isDone=!0)}}},8038:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){this.x=e,this.y=t}add(e,t=1){this.x+=e.x*t,this.y+=e.y*t}}},2159:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(282),n=s(8038),r=s(5008),a=s(8026),h=s(3696),l=e([h]);h=(l.then?(await l)():l)[0];class c{constructor(e,t,s=new o.Z,i=new n.Z(0,0),h=new n.Z(0,0)){this.position=e,this.dimensions=t,this.hitboxOffsets=s,this.velocity=h,this.hitbox=new o.Z(this.position.x+this.hitboxOffsets.position.x,this.position.y+this.hitboxOffsets.position.y,this.dimensions.x+this.hitboxOffsets.dimensions.x,this.dimensions.y+this.hitboxOffsets.dimensions.y,a.Z.Crimson),this.sprites=[],this.animation=new r.Z([0],0),this.renderOffset=i}update(e){this.hitbox.position.x=this.position.x+this.hitboxOffsets.position.x,this.hitbox.position.y=this.position.y+this.hitboxOffsets.position.y,this.dimensions.x,this.hitboxOffsets.dimensions.x,this.dimensions.y,this.hitboxOffsets.dimensions.y,this.position.x+=this.velocity.x*e,this.position.y+=this.velocity.y*e,this.animation.update(e)}render(){this.sprites[this.animation.getCurrentFrame()].render(this.position.x+this.renderOffset.x,this.position.y+this.renderOffset.y),this.renderHitbox()}renderHitbox(){h.eM&&this.hitbox.render(h.Do)}didCollide(e){return this.hitbox.didCollide(e.hitbox)}}i()}catch(e){i(e)}}))},1928:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>S});var o=s(8038),n=s(3696),r=s(2159),a=s(3378),h=s(1107),l=s(8642),c=s(5008),u=s(3928),p=s(8347),d=s(282),m=s(8818),Z=(s(878),s(8042)),y=s(5620),k=s(1405),E=s(1447),g=s(1610),v=s(5127),w=s(50),x=e([n,r,Z,y,k,E,g]);[n,r,Z,y,k,E,g]=x.then?(await x)():x;class S extends r.Z{static RENDER_OFFSET=new o.Z(-p.Z.SIZE/2,-p.Z.SIZE);constructor(e,t,s,i,n,r,a=[],h=!1,l=null,y=null){super(new o.Z,new o.Z(p.Z.SIZE,p.Z.SIZE),new d.Z,S.RENDER_OFFSET),this.shiny=h,this.pokedexNumber=e,this.name=t,this.types=s,this.baseStats=i,this.ivs=n,this.stats=[0,0,0,0,0,0],this.pokemonLevel=r,this.calculateStats(),this.nextStagePokemon=l,this.attacks=a,this.animation=new c.Z([0,1],1-Math.log2(this.stats[m.Z.Speed])/10),this.getSprites(),this.direction=u.Z.DOWN,this.sprites=this.directionalSprites[this.direction],this.selectedAttack=this.attacks[0],this.attackRange=Z.Z.DEFAULT_RANGE,this.experience=this.currentLevelBaselineExperience(),this.calculateNextLevelExperience(),this.evolutionLevel=y,this.timer=new w.Z,this.crySoundName=`Pokemon${this.pokedexNumber}`}update(e){super.update(e),this.sprites=this.directionalSprites[this.direction],this.pickedUp||this.timer.update(e)}render(e=null,t=!1){const s=this.position;this.pickedUp&&(this.position=new o.Z(n.Sv.x-p.Z.SIZE/2,n.Sv.y-p.Z.SIZE/2)),e&&(this.position=e),this.pickedUp&&!t&&this.renderRangeIndicator(),this.direction==u.Z.RIGHT?(n.Do.save(),this.renderGreyscale&&this.setGreyscale(),n.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),n.Do.scale(-1,1),this.sprites[this.animation.getCurrentFrame()].render(this.renderOffset.x,this.renderOffset.y),n.Do.restore(),super.renderHitbox()):(this.renderGreyscale&&this.setGreyscale(),super.render(),n.Do.restore()),this.position=s}setGreyscale(){n.Do.save(),n.Do.fillStyle="#fff",n.Do.globalCompositeOperation="luminosity"}getSprites(){let e=this.pokedexNumber-1;[3,25].forEach((t=>{this.pokedexNumber>t&&e++})),e*=2;let t=e%32,s=4*Math.floor(e/32);this.directionalSprites=[[new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),t*h.Z.Size,s*h.Z.Size,h.Z.Size,h.Z.Size),new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),(t+1)*h.Z.Size,s*h.Z.Size,h.Z.Size,h.Z.Size)],[new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),t*h.Z.Size,(s+1)*h.Z.Size,h.Z.Size,h.Z.Size),new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),(t+1)*h.Z.Size,(s+1)*h.Z.Size,h.Z.Size,h.Z.Size)],[new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),t*h.Z.Size,(s+2)*h.Z.Size,h.Z.Size,h.Z.Size),new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),(t+1)*h.Z.Size,(s+2)*h.Z.Size,h.Z.Size,h.Z.Size)],[new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),t*h.Z.Size,(s+2)*h.Z.Size,h.Z.Size,h.Z.Size),new a.Z(n.Wc.get(this.shiny?l.Z.ShinyPokemon:l.Z.Pokemon),(t+1)*h.Z.Size,(s+2)*h.Z.Size,h.Z.Size,h.Z.Size)]]}calculateStats(){this.baseStats.forEach(((e,t)=>{t!=m.Z.HP&&(this.stats[t]=Math.floor((2*e+this.ivs[t])*this.pokemonLevel/100+5))})),this.calculateMaxHP()}calculateMaxHP(){this.stats[m.Z.HP]=Math.floor((2*this.baseStats[m.Z.HP]+this.ivs[m.Z.HP])*this.pokemonLevel/100+this.pokemonLevel+10),this.maxHealth=this.stats[m.Z.HP]}pickup(){n.jX.play(v.Z.PickUp),this.pickedUp=!0}place(){n.jX.play(v.Z.PutDown),this.pickedUp=!1}renderRangeIndicator(){n.Do.save(),n.Do.fillStyle="rgba(0, 0, 0, 0.25)",n.Do.beginPath(),n.Do.arc(this.position.x-this.renderOffset.x,this.position.y-this.renderOffset.y/3,this.attackRange*p.Z.SIZE,0,2*Math.PI),n.Do.fill(),n.Do.restore()}lowHealth(){return this.currentHealth/this.stats[m.Z.HP]<=n.fy}canLevelUp(){return this.experience>=this.nextLevelExperience}canEvolve(){return this.evolutionLevel&&this.canLevelUp()&&this.evolutionLevel>=this.pokemonLevel+1}levelUpPrice(){return Math.pow(this.pokemonLevel,2)}experiencePercentageToNextLevel(){return(this.experience-this.currentLevelBaselineExperience())/(this.nextLevelExperience-this.currentLevelBaselineExperience())}levelUp(e){if(100==this.pokemonLevel)throw Error("Pokemon can not level up above level 100.");n.jX.play(v.Z.LevelUp),this.pokemonLevel++;let t=!1;this.evolutionLevel&&this.evolutionLevel<=this.pokemonLevel&&(t=!0,this.evolve(e)),this.calculateStats(),this.calculateNextLevelExperience(),t||this.learnThisLevelMoves()}learnThisLevelMoves(){const e=n.Oq.filter((e=>e.no==this.pokedexNumber))[0].level_up_moves.filter((e=>e.level==this.pokemonLevel));if(e.length>0){let t=()=>{},s=null;for(let i=e.length-1;i>=0;i--){const o=g.Z.createAttack(e[i].name);o&&(this.attacks.filter((e=>e.name==o.name)).length>0||(s=new E.Z(this,o,t),t=()=>n.j3.push(moveLearnState)))}s&&n.j3.push(s)}}calculateNextLevelExperience(){this.nextLevelExperience=this.currentLevelBaselineExperience(this.pokemonLevel+1)}currentLevelBaselineExperience(e=this.pokemonLevel){return Math.ceil(Math.pow(e,3.1))}calculateExperienceGainedThisLevel(){return this.experience-this.currentLevelBaselineExperience()}targetExperienceThisLevel(){return this.nextLevelExperience-this.currentLevelBaselineExperience()}evolve(e){const t=y.Z.createPokemon(this.nextStagePokemon,this.pokemonLevel);e.removeEventListeners(),n.j3.push(new k.Z(this,t,(()=>{this.learnThisLevelMoves()})))}}i()}catch(e){i(e)}}))},8042:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>d});var o=s(8038),n=(s(8026),s(3696)),r=s(6472),a=s(1928),h=s(5197),l=s(3708),c=s(9959),u=s(3083),p=e([n,r,a,c]);[n,r,a,c]=p.then?(await p)():p;class d{static StateNames={Idle:"Idle",Attacking:"Attacking"};static DEFAULT_RANGE=3;constructor(e,t,s){this.pokemon=e,this.towerSlot=t,this.pokemon.position=new o.Z(this.towerSlot.position.x,this.towerSlot.position.y),this.level=s,this.stateStack=new u.Z,this.stateStack.push(new c.Z(this))}update(e){this.stateStack.update(e)}render(){this.stateStack.render()}cooldown(e){this.pokemon.attacking=!1,this.pokemon.coolingDown=!0,this.pokemon.timer.addTask((()=>{}),0,e,(()=>this.pokemon.coolingDown=!1))}isStabAttack(e){let t=e.type;switch(t.charAt(0).toUpperCase()+t.slice(1)){case l.Z.Normal:return this.pokemon.types.includes(h.Z.Normal);case l.Z.Fighting:return this.pokemon.types.includes(h.Z.Fighting);case l.Z.Flying:return this.pokemon.types.includes(h.Z.Flying);case l.Z.Poison:return this.pokemon.types.includes(h.Z.Poison);case l.Z.Ground:return this.pokemon.types.includes(h.Z.Ground);case l.Z.Rock:return this.pokemon.types.includes(h.Z.Rock);case l.Z.Bug:return this.pokemon.types.includes(h.Z.Bug);case l.Z.Ghost:return this.pokemon.types.includes(h.Z.Ghost);case l.Z.Fire:return this.pokemon.types.includes(h.Z.Fire);case l.Z.Water:return this.pokemon.types.includes(h.Z.Water);case l.Z.Grass:return this.pokemon.types.includes(h.Z.Grass);case l.Z.Electric:return this.pokemon.types.includes(h.Z.Electric);case l.Z.Psychic:return this.pokemon.types.includes(h.Z.Psychic);case l.Z.Ice:return this.pokemon.types.includes(h.Z.Ice);case l.Z.Dragon:return this.pokemon.types.includes(h.Z.Dragon);case l.Z.Steel:return this.pokemon.types.includes(h.Z.Steel);case l.Z.Dark:return this.pokemon.types.includes(h.Z.Dark);case l.Z.Fairy:return this.pokemon.types.includes(h.Z.Fairy)}}}i()}catch(e){i(e)}}))},4539:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(3378),n=s(8642),r=s(3696),a=s(2159),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends a.Z{constructor(e,t){super(e,t),this.sprites=this.getSprites(),this.currentFrame=0,this.stolen=!1,this.pickedUp=!1}getSprites(){return[new o.Z(r.Wc.get(n.Z.RareCandy),0,0,16,16)]}pickup(){this.pickedUp=!0}drop(){this.pickedUp=!1}}i()}catch(e){i(e)}}))},914:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>v});var o=s(6740),n=s(360),r=s(8038),a=s(8026),h=s(3928),l=(s(1107),s(8818)),c=s(1571),u=s(3696),p=s(9509),d=s(3984),m=s(8347),Z=s(7319),y=s(6472),k=s(1928),E=s(2197),g=e([u,p,d,Z,y,k,E]);[u,p,d,Z,y,k,E]=g.then?(await g)():g;class v extends k.Z{constructor(e,t,s,i,o,n,r=[],h=!1,c=null,u=null,p=!1){super(e,t,s,i,o,n,r,h&&!p,c,u),this.nextPositionIndex=1,this.rareCandy=null,this.walkingForwards=!0,this.currentHealth=this.stats[l.Z.HP],this.healthBar=new Z.Z(this,{panelColour:p?a.Z.DodgerBlue:a.Z.Chartreuse,borderColour:"black",padding:0,borderWidth:0}),this.attackedBy=[],this.damageTexts=[],this.isBoss=p,this.statusConditions=[],this.currentStats=this.stats.map((e=>e))}moveToNextPosition(e=!0){this.nextPositionIndex==this.targetPositions.length-1?this.walkingForwards=!1:0!=this.nextPositionIndex||this.walkingForwards||(this.walkingForwards=!0,this.rareCandy&&(this.rareCandy.stolen=!0,this.dropRareCandy())),e&&(this.position=new r.Z(this.targetPositions[this.nextPositionIndex].x,this.targetPositions[this.nextPositionIndex].y)),this.walkingForwards?this.nextPositionIndex++:this.nextPositionIndex--,this.calculateNewVelocity(),this.changeDirection()}update(e){super.update(e),this.healthBar.update(e);const t=[];this.statusConditions=this.statusConditions.filter((e=>!e.isExpired()||(t.push(e),!1))),t.forEach((e=>e.remove())),this.statusConditions.forEach((t=>t.update(e)));const s=this.targetPositions[this.nextPositionIndex];this.velocity.x>0&&this.position.x>s.x&&this.moveToNextPosition(),this.velocity.y>0&&this.position.y>s.y&&this.moveToNextPosition(),this.velocity.x<0&&this.position.x<s.x&&this.moveToNextPosition(),this.velocity.y<0&&this.position.y<s.y&&this.moveToNextPosition(),this.damageTexts=this.damageTexts.filter((e=>!e.cleanup)),this.rareCandy||this.level.rareCandies.forEach((e=>{this.rareCandy||!this.didCollide(e)||e.pickedUp||e.stolen||this.pickupRareCandy(e)})),this.rareCandy&&(this.rareCandy.position=new r.Z(this.position.x,this.position.y-m.Z.SIZE/2))}getCaught(){this.dropRareCandy()}render(){this.isDead()||(this.statusConditions.forEach((e=>e.render())),super.render(),this.healthBar.render(),this.damageTexts.forEach((e=>e.render())))}pickupRareCandy(e){e.pickedUp=!0,this.rareCandy=e;const t=this.walkingForwards;this.walkingForwards=!1,t&&this.moveToNextPosition(!1)}dropRareCandy(){null!=this.rareCandy&&(this.rareCandy.drop(),this.rareCandy.position=new r.Z(this.position.x,this.position.y),isNaN(this.rareCandy.position.x)||isNaN(this.rareCandy.position.y),this.rareCandy=null)}die(){this.level.inventory.pokedollars+=this.calculateCurrencyToProvide(),this.attackedBy.forEach((e=>{e.experience+=Math.ceil(this.calculateExperienceToProvide()/this.attackedBy.length)})),this.dropRareCandy()}isDead(){return this.currentHealth<=0||isNaN(this.position.x)||isNaN(this.position.y)}calculateNewVelocity(){const e=this.targetPositions[this.nextPositionIndex].x-this.position.x,t=this.targetPositions[this.nextPositionIndex].y-this.position.y;let s=1;const i=this.statusConditions.filter((e=>e.name==c.Z.Slowed));i.length>0&&(s/=i[0].severity+1),this.statusConditions.filter((e=>e.name==c.Z.Asleep)).length>0&&(s=1/this.stats[l.Z.Speed]),this.currentStats[l.Z.Speed]=this.stats[l.Z.Speed]*s,this.velocity=(0,o.F)(new r.Z(e,t)),this.velocity.x*=10*Math.log2(this.currentStats[l.Z.Speed]),this.velocity.y*=10*Math.log2(this.currentStats[l.Z.Speed])}changeDirection(){this.velocity.x>0&&(this.direction=h.Z.RIGHT),this.velocity.x<0&&(this.direction=h.Z.LEFT),this.velocity.y>0&&(this.direction=h.Z.DOWN),this.velocity.y<0&&(this.direction=h.Z.UP)}getHealth(){return this.currentHealth}getHealthPercentage(){return this.currentHealth/this.stats[l.Z.HP]}setLevel(e){this.level=e,this.stage=e.map,this.targetPositions=e.map.getPathPoints(),this.position=new r.Z(this.targetPositions[0].x,this.targetPositions[0].y),this.calculateNewVelocity(),this.changeDirection()}getAttacked(e,t){if(this.attackedBy.includes(t.pokemon)||this.attackedBy.push(t.pokemon),"status"==e.damageClass)return void this.applyCondition(e.statusConditionName,e);const s=(0,n.n8)(u.uT)?1.5:1,i="special"==e.damageClass?t.pokemon.stats[l.Z.SPAttack]:t.pokemon.stats[l.Z.Attack],o="special"==e.damageClass?this.stats[l.Z.SPDefense]:this.stats[l.Z.Defense],r=t.isStabAttack(e)?1.5:1;let a=1;this.types.forEach((t=>{t.weakTo(e.type)?a*=2:t.resistantTo(e.type)?a/=2:t.immuneTo(e.type)&&(a=0)}));let h=Math.ceil(((2*t.pokemon.pokemonLevel*s/5+2)*e.power*i/o/50+2)*r*a*(0,n.D9)(217,255)/255);this.currentHealth-=h,this.addToDamageTexts(h,a)}applyCondition(e,t){const s=this.statusConditions.filter((t=>t.name==e));if(s.length>0)s[0].increaseSeverity();else{const s=d.Z.getStatusCondition(e,this,t);this.statusConditions.push(s),s.add()}}takeDamage(e){e=Math.ceil(e),this.currentHealth-=e,this.addToDamageTexts(e,1)}addToDamageTexts(e,t){let s;switch(t){case 4:s="rgb(255,215,0)";break;case 2:s="rgb(255, 100, 0)";break;case 1:s="rgb(170, 40, 3)";break;case.5:s="rgb(90, 30, 2)";break;case 1/4:s="rgb(50, 20, 1)";break;case 0:s="rgba(0, 0, 0)"}this.damageTexts.push(new E.Z(this.position,e,s))}calculateExperienceToProvide(){return Math.ceil(142*this.pokemonLevel/15)}calculateCurrencyToProvide(){return Math.ceil(this.pokemonLevel*(0,n.mz)(1.5,2.5))}}i()}catch(e){i(e)}}))},2197:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var o=s(8038),n=s(3696),r=s(8347),a=e([n]);n=(a.then?(await a)():a)[0];class h{constructor(e,t,s){this.position=e,this.text=t,this.colour=s,this.fontSize=20,this.fontFamily="PokemonGB",this.offset=new o.Z(0,.75*-r.Z.SIZE),n.HT.tween(this,["fontSize"],[0],.5,(()=>{this.cleanup=!0}))}render(){n.Do.save(),n.Do.font=`${this.fontSize}px ${this.fontFamily}`,n.Do.fillStyle=this.colour;const e=n.Do.measureText(this.text).width;n.Do.fillText(this.text,this.position.x+r.Z.SIZE/2-e/2,this.position.y+this.offset.y),n.Do.restore()}}i()}catch(e){i(e)}}))},1049:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var o=s(6740),n=s(8038),r=s(3696),a=e([r]);r=(a.then?(await a)():a)[0];class h{constructor(e,t,s,i,o={r:0,g:0,b:0,a:1},n=!1){this.position=e,this.colour=o,this.radius=t,this.target=s,this.speed=i}update(e){const t=(0,o.F)(new n.Z(this.target.x-this.position.x,this.target.y-this.position.y));this.position.x+=t.x*this.speed*e,this.position.y+=t.y*this.speed*e}render(){r.Do.save(),r.Do.fillStyle=`rgba(${this.colour.r}, ${this.colour.g}, ${this.colour.b}, ${this.colour.a})`,r.Do.beginPath(),r.Do.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),r.Do.fill(),r.Do.restore()}}i()}catch(e){i(e)}}))},1532:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var o=s(360),n=s(8038),r=s(1049),a=e([r]);r=(a.then?(await a)():a)[0];class h{constructor(e,t,s,i,o=300,n=null,r=!0,a=null,h=null){this.particleSize=t,this.colour=s,this.sprite=n,this.transparentDropoff=r,this.targetPosition=h,this.targetPokemon=a,this.particleSpeed=i,this.maxParticles=o,this.particles=[],this.position=e}update(e){this.particles.length<this.maxParticles&&(0,o.n8)(.25)&&this.particles.push(new r.Z(new n.Z(this.position.x,this.position.y),this.particleSize,this.targetPokemon?this.targetPokemon.position:this.targetPosition,this.particleSpeed,this.colour)),this.particles.forEach((t=>t.update(e)))}render(){this.particles.forEach((e=>e.render()))}}i()}catch(e){i(e)}}))},3708:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Normal:"Normal",Fighting:"Fighting",Flying:"Flying",Poison:"Poison",Ground:"Ground",Rock:"Rock",Bug:"Bug",Ghost:"Ghost",Fire:"Fire",Water:"Water",Grass:"Grass",Electric:"Electric",Psychic:"Psychic",Ice:"Ice",Dragon:"Dragon",Steel:"Steel",Dark:"Dark",Fairy:"Fairy"}},8026:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Black:"black",Chartreuse:"chartreuse",Crimson:"crimson",LighterCrimson:"#fb0000",DarkerCrimson:"#5e0000",DodgerBlue:"dodgerblue",DarkerDodgerBlue:"#1e58ff",Gold:"gold",Grey:"rgb(100, 110, 150)",White:"white",Transparent:"transparent",DarkGrey:"rgb(43, 43, 43)",LightBlue:"#add8ff",DarkRed:"#da251d",DarkGreen:"#013220",Brown:"#8b4513"}},3928:(e,t,s)=>{s.d(t,{Z:()=>i});const i={UP:0,DOWN:1,LEFT:2,RIGHT:3}},1989:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Joystix:"Joystix",Pokemon:"Pokemon",PokemonGB:"PokemonGb",PowerRedBold:"PowerRedBold"}},8642:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Tiles:"tiles",Player:"player",Oak:"oak",Pokemon:"pokemon",ShinyPokemon:"shiny-pokemon",CutSceneOak:"cutSceneOak",Brock:"brock",Onix:"onix",Geodude:"geodude",Level1:"level1",Level2:"level2",Level3:"level3",Level4:"level4",Level5:"level5",BrockTiles:"brock-tiles",Black:"black",PokeballClosed:"pokeball-closed",PokeballOpen:"pokeball-open",RareCandy:"rare-candy",Nidoran:"nidoran",Squirtle:"squirtle",Charmander:"charmander",Bulbasaur:"bulbasaur",OakSmall:"oak-small",Beedrill:"beedrill",Meowth:"meowth",RocketGrunts:"rocket-grunts"}},878:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Bulbasaur:1,Ivysaur:2,Venusaur:3,Venusaur1:891,Charmander:4,Charmeleon:5,Charizard:6,Charizard1:892,Charizard2:893,Squirtle:7,Wartortle:8,Blastoise:9,Blastoise1:894,Caterpie:10,Metapod:11,Butterfree:12,Weedle:13,Kakuna:14,Beedrill:15,Beedrill1:895,Pidgey:16,Pidgeotto:17,Pidgeot:18,Pidgeot1:896,Rattata:19,Rattata1:897,Raticate:20,Raticate1:898,Spearow:21,Fearow:22,Ekans:23,Arbok:24,Pikachu:25,Pikachu1:899,Pikachu2:900,Pikachu3:901,Pikachu4:902,Pikachu5:903,Pikachu6:904,Pikachu7:905,Pikachu8:906,Raichu:26,Raichu1:907,Sandshrew:27,Sandshrew1:908,Sandslash:28,Sandslash1:909,NidoranFemale:29,Nidorina:30,Nidoqueen:31,Nidoran:32,Nidorino:33,Nidoking:34,Clefairy:35,Clefable:36,Vulpix:37,Vulpix1:910,Ninetales:38,Ninetales1:911,Jigglypuff:39,Wigglytuff:40,Zubat:41,Golbat:42,Oddish:43,Gloom:44,Vileplume:45,Paras:46,Parasect:47,Venonat:48,Venomoth:49,Diglett:50,Diglett1:912,Dugtrio:51,Dugtrio1:913,Meowth:52,Meowth1:914,Meowth2:915,Persian:53,Persian1:916,Psyduck:54,Golduck:55,Mankey:56,Primeape:57,Growlithe:58,Arcanine:59,Poliwag:60,Poliwhirl:61,Poliwrath:62,Abra:63,Kadabra:64,Alakazam:65,Alakazam1:917,Machop:66,Machoke:67,Machamp:68,Bellsprout:69,Weepinbell:70,Victreebel:71,Tentacool:72,Tentacruel:73,Geodude:74,Geodude1:918,Graveler:75,Graveler1:919,Golem:76,Golem1:920,Ponyta:77,Ponyta1:921,Rapidash:78,Rapidash1:922,Slowpoke:79,Slowpoke1:923,Slowbro:80,Slowbro1:924,Magnemite:81,Magneton:82,Farfetchd:83,Farfetchd1:925,Doduo:84,Dodrio:85,Seel:86,Dewgong:87,Grimer:88,Grimer1:926,Muk:89,Muk1:927,Shellder:90,Cloyster:91,Gastly:92,Haunter:93,Gengar:94,Gengar1:928,Onix:95,Drowzee:96,Hypno:97,Krabby:98,Kingler:99,Voltorb:100,Electrode:101,Exeggcute:102,Exeggutor:103,Exeggutor1:929,Cubone:104,Marowak:105,Marowak1:930,Hitmonlee:106,Hitmonchan:107,Lickitung:108,Koffing:109,Weezing:110,Weezing1:931,Rhyhorn:111,Rhydon:112,Chansey:113,Tangela:114,Kangaskhan:115,Kangaskhan1:932,Horsea:116,Seadra:117,Goldeen:118,Seaking:119,Staryu:120,Starmie:121,MrMime:122,MrMime1:933,Scyther:123,Jynx:124,Electabuzz:125,Magmar:126,Pinsir:127,Pinsir1:934,Tauros:128,Magikarp:129,Gyarados:130,Gyarados1:935,Lapras:131,Ditto:132,Eevee:133,Eevee1:936,Vaporeon:134,Jolteon:135,Flareon:136,Porygon:137,Omanyte:138,Omastar:139,Kabuto:140,Kabutops:141,Aerodactyl:142,Aerodactyl1:937,Snorlax:143,Articuno:144,Zapdos:145,Moltres:146,Dratini:147,Dragonair:148,Dragonite:149,Mewtwo:150,Mewtwo1:938,Mewtwo2:939,Mew:151}},5197:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(3708);class o{constructor(e,t,s,i){this.weaknesses=t,this.resistances=s,this.immunities=i,this.name=e}weakTo(e){return this.weaknesses.includes(e)}resistantTo(e){return this.resistances.includes(e)}immuneTo(e){return this.immunities.includes(e)}}const n={Normal:new o("Normal",[i.Z.Fighting],[],[i.Z.Ghost]),Fighting:new o("Fighting",[i.Z.Flying,i.Z.Psychic,i.Z.Fairy],[i.Z.Rock,i.Z.Bug,i.Z.Dark],[]),Flying:new o("Flying",[i.Z.Rock,i.Z.Electric,i.Z.Ice],[i.Z.Fighting,i.Z.Bug,i.Z.Grass],[i.Z.Ground]),Poison:new o("Poison",[i.Z.Ground,i.Z.Psychic],[i.Z.Fighting,i.Z.Poison,i.Z.Bug,i.Z.Grass,i.Z.Fairy],[]),Ground:new o("Ground",[i.Z.Water,i.Z.Grass,i.Z.Ice],[i.Z.Poison,i.Z.Rock],[i.Z.Electric]),Rock:new o("Rock",[i.Z.Fighting,i.Z.Ground,i.Z.Steel,i.Z.Water,i.Z.Grass],[i.Z.Normal,i.Z.Flying,i.Z.Poison,i.Z.Fighting],[]),Bug:new o("Bug",[i.Z.Flying,i.Z.Rock,i.Z.Fire],[i.Z.Fighting,i.Z.Ground,i.Z.Grass],[]),Ghost:new o("Ghost",[i.Z.Ghost,i.Z.Dark],[i.Z.Poison,i.Z.Bug],[i.Z.Normal,i.Z.Fighting]),Steel:new o("Steel",[i.Z.Fighting,i.Z.Ground,i.Z.Fire],[i.Z.Normal,i.Z.Flying,i.Z.Rock,i.Z.Bug,i.Z.Ghost,i.Z.Steel,i.Z.Grass,i.Z.Psychic,i.Z.Ice,i.Z.Dragon,i.Z.Dark,i.Z.Fairy],[i.Z.Poison]),Fire:new o("Fire",[i.Z.Ground,i.Z.Rock,i.Z.Water],[i.Z.Bug,i.Z.Steel,i.Z.Fire,i.Z.Grass,i.Z.Ice,i.Z.Fairy]),Water:new o("Water",[i.Z.Grass,i.Z.Electric],[i.Z.Steel,i.Z.Fire,i.Z.Water,i.Z.Ice],[i.Z.Grass,i.Z.Electric]),Grass:new o("Grass",[i.Z.Flying,i.Z.Poison,i.Z.Bug,i.Z.Fire,i.Z.Ice],[i.Z.Ground,i.Z.Grass,i.Z.Electric,i.Z.Water],[]),Electric:new o("Electric",[i.Z.Ground],[i.Z.Flying,i.Z.Steel,i.Z.Electric],[]),Psychic:new o("Psychic",[i.Z.Bug,i.Z.Ghost,i.Z.Psychic],[i.Z.Fighting,i.Z.Psychic],[]),Ice:new o("Ice",[i.Z.Fighting,i.Z.Rock,i.Z.Steel,i.Z.Fire],[i.Z.Ice],[]),Dragon:new o("Dragon",[i.Z.Ice,i.Z.Dragon,i.Z.Fairy],[i.Z.Fighting,i.Z.Water,i.Z.Grass,i.Z.Electric],[]),Dark:new o("Dark",[i.Z.Fighting,i.Z.Bug,i.Z.Fairy],[i.Z.Ghost,i.Z.Dark],[i.Z.Psychic]),Fairy:new o("Fairy",[i.Z.Poison,i.Z.Steel],[i.Z.Fighting,i.Z.Bug,i.Z.Dark],[i.Z.Dragon])}},5127:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Directory:"./assets/sounds/",AttacksDirectory:"./assets/sounds/attacks/",CriesDirectory:"./assets/sounds/cries/",BattleStart:"battle-start",BattleLoop:"battle-loop",BattleVictory:"battle-victory",GeneralBackground:"main-background",Battle:"battle",Route:"route",Title:"title-screen",RocketMotto:"rocket-motto",BlastingOff:"blasting-off",Evolving:"evolving",BuzzOff:"buzz-off",BrockGym:"brock-gym",BoulderBadgeCongratulations:"boulder-badge",TakeTheL:"take-the-l",BattleDamage:"battle-damage",BattleRun:"battle-run",ExperienceFull:"experience-full",ExperienceGain:"experience-gain",Heal:"heal",LowHealth:"low-health",MenuOpen:"menu-open",PlayerBump:"player-bump",PokemonFaint:"pokemon-faint",SelectionChoice:"selection-choice",SelectionMove:"selection-move",ButtonPress:"button-pressed",LevelSelect:"level-select",PickUp:"pickup",PutDown:"put-down",LevelUp:"level-up",Purchase:"purchase",TurnOffPC:"turn-off-pc",TurnOnPC:"turn-on-pc",CaughtPokemon:"caught-pokemon",WallSmash:"wall-smash",Buzzing:"buzzing",Beatup:"beatup",Run:"run",Splash:"splash",DefaultPhysicalAttackNoise:"tackle",DefaultSpecialAttackNoise:"mega-drain",DefaultStatusAttackNoise:"sharpen",Charmander:"charmander",Bulbasaur:"bulbasaur",Squirtle:"squirtle"}},1107:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Size:32}},5936:(e,t,s)=>{s.d(t,{Z:()=>i}),s(8026);const i={Squirtle:{Name:"Squirtle",Colour:"#3B4CCA",Text:"When it retracts its long neck into its shell, it squirts out water with vigorous force.",Types:["Water"],Weaknesses:["Grass","Electric"],Abilities:["Torrent"]},Charmander:{Name:"Charmander",Colour:"#CC0000",Text:"It has a preference for hot things. When it rains, steam is said to spout from the tip of its tail.",Types:["Fire"],Weaknesses:["Water","Ground","Rock"],Abilities:["Blaze"]},Bulbasaur:{Name:"Bulbasaur",Colour:"#CC0000",Text:"There is a plant seed on its back right from the day this Pokémon is born. The seed slowly grows larger.",Types:["Grass","Poison"],Weaknesses:["Fire","Psychic","Flying"],Abilities:["Overgrow"]}}},8818:(e,t,s)=>{s.d(t,{Z:()=>i});const i={HP:0,Attack:1,Defense:2,SPAttack:3,SPDefense:4,Speed:5}},1571:(e,t,s)=>{s.d(t,{Z:()=>i});const i={Poisoned:"Poisoned",Slowed:"Slowed",Asleep:"Asleep"}},3696:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{$h:()=>g,Bb:()=>N,Bg:()=>O,Do:()=>m,Gw:()=>C,HT:()=>P,JQ:()=>d,Js:()=>G,Ms:()=>W,Oq:()=>Z,PN:()=>U,Q9:()=>$,Rq:()=>S,Sv:()=>I,Wc:()=>x,Wp:()=>B,XP:()=>w,Xd:()=>v,b6:()=>H,eM:()=>D,fy:()=>L,j3:()=>f,jX:()=>T,lf:()=>E,mx:()=>R,n2:()=>y,ry:()=>Y,uT:()=>b,vj:()=>k,wC:()=>F});var o=s(465),n=s(9595),r=s(5735),a=s(3083),h=s(50),l=s(8038),c=s(1610),u=s(5620),p=e([c,u]);[c,u]=p.then?(await p)():p;const d=document.createElement("canvas"),m=d.getContext("2d")||new CanvasRenderingContext2D,Z=await(await fetch("./src/pokemon.json")).json();Z.forEach((e=>{e.name=e.name.charAt(0).toUpperCase()+e.name.slice(1)}));const y=(await(await fetch("./src/attacks.json")).json()).filter((e=>"status"!=e.damage_class||c.N.includes(e.name))),k=336,E=272,g=21,v=17,w={},x=new n.Z(m),S=new o.Z,f=new a.Z,P=new h.Z,T=new r.Z,D=(new u.Z,!1),L=.2,b=.05,O=3,I=new l.Z(0,0);d.addEventListener("mousemove",(e=>{I.x=e.offsetX/O,I.y=e.offsetY/O}));const C="$";let M=1;const N=e=>M=e,B=()=>M;let A,_;const F=e=>{if(A){if(_==e)return;A.stop()}A=T.get(e),A.play(),_=e},U=()=>{A.stop(),_=""},R=()=>{A.pause()},G=()=>{A.play()};let j;const H=e=>{j=e},W=()=>j,$=5e-4;let z=navigator.userAgent;const Y=/android|iphone|kindle|ipad/i.test(z);i()}catch(e){i(e)}}),1)},2225:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var i=s(7785),o=s(5127),n=s(3696),r=s(7576),a=s(294),h=e([n,r,a]);[n,r,a]=h.then?(await h)():h;const l=1008,c=816;let u,p=document.body.clientWidth/l,d=document.body.clientHeight/c;u=p<d?p:d,document.body.style.transform="scale("+u+")",n.JQ.width=n.vj,n.JQ.height=n.lf,n.JQ.setAttribute("tabindex","1"),document.body.appendChild(n.JQ);const{images:m,fonts:Z,sounds:y}=await fetch("./src/config.json").then((e=>e.json()));n.Wc.load(m),n.Rq.load(Z),n.jX.load(y);const k=new a.Z;n.j3.push(k),k.removeEventListeners(),n.j3.push(new r.Z("Loading Assets...")),n.JQ.addEventListener("keydown",(e=>{n.XP[e.key]=!0})),n.JQ.addEventListener("keyup",(e=>{n.XP[e.key]=!1})),new i.Z(n.j3,n.Do,n.JQ.width,n.JQ.height,n.HT).start(),n.JQ.focus();const E=n.n2.map((async e=>{const t=e.name.split("-");t[0]=t[0].charAt(0).toUpperCase()+t[0].slice(1);const s=t.reduce(((e,t)=>e+t.charAt(0).toUpperCase()+t.slice(1)));return 404===(await fetch(`${o.Z.AttacksDirectory}${s}.wav`)).status?null:{name:e.name,path:`${o.Z.AttacksDirectory}${s}.wav`,size:6,volume:.3,loop:!1,maxDuration:500}}));Promise.all(E).then((e=>{n.jX.load(e.filter((e=>e))),setTimeout((()=>n.j3.pop()),1e3)})).catch((e=>console.log(e)));const g=n.Oq.map((async e=>404===(await fetch(`${o.Z.CriesDirectory}${e.no}.ogg`)).status?null:{name:`Pokemon${e.no}`,path:`${o.Z.CriesDirectory}${e.no}.ogg`,size:1,volume:.3,loop:!1}));Promise.all(g).then((e=>{n.jX.load(e.filter((e=>e)))})).catch((e=>console.log(e))),t()}catch(e){t(e)}}),1)},8976:(e,t,s)=>{s.d(t,{Z:()=>i});class i{static DEFAULT_COOLDOWN=.75;static PRIORITY_COOLDOWN_RATIO=.75;constructor(e,t,s,o,n,r,a=i.DEFAULT_COOLDOWN,h=!1){this.name=e,this.description=t,this.damageClass=s,this.power=o,this.type=n.charAt(0).toUpperCase()+n.slice(1),this.accuracy=r,this.priority=h,this.cooldown=a*(h?i.PRIORITY_COOLDOWN_RATIO:1)}}},3846:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>a});var o=s(2010),n=s(3696),r=(s(8642),e([n]));n=(r.then?(await r)():r)[0];class a extends o.Z{static OAK_SIZE={x:281,y:559};static POKEMON_SIZE={x:120,y:120};constructor(e,t,s){super(e,t),this.image=n.Wc.get(s),this.startPosition=this.position,this.isHovering=!1,this.isTweening=!1,this.rotation=0}render(){n.Do.save(),n.Do.translate(this.position.x,this.position.y),n.Do.rotate(this.rotation*Math.PI/180),this.image.render(0,0,this.dimensions.x,this.dimensions.y),n.Do.restore()}onHover(){this.isHovering&&!this.isTweening&&(this.isTweening=!0,n.HT.tween(this.image,["opacity"],[0],.5,(()=>this.tweenAgain())))}onNoHover(){this.isHovering=!1}tweenAgain(){0===this.image.opacity?n.HT.tween(this.image,["opacity"],[1],.5,(()=>{this.isHovering?this.tweenAgain():this.isTweening=!1})):n.HT.tween(this.image,["opacity"],[0],.5,(()=>{this.isHovering?this.tweenAgain():(this.isTweening=!1,this.image.opacity=1)}))}}i()}catch(e){i(e)}}))},2010:(e,t,s)=>{s.d(t,{Z:()=>i});class i{constructor(e,t){this.position=e,this.dimensions=t}render(){}update(){}}},5347:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var o=s(1928),n=s(5127),r=s(3696),a=e([o,r]);[o,r]=a.then?(await a)():a;class h{static instance;static GET_INSTANCE_CALLED=!1;constructor(e=[],t=[],s=0){if(!h.GET_INSTANCE_CALLED)throw Error("Do no call Inventory constructor directly");this.party=e,this.box=t,this.pokedollars=s,this.pokeballCount=1,h.GET_INSTANCE_CALLED=!1}static getInstance(){return h.instance||(h.GET_INSTANCE_CALLED=!0,h.instance=new h),h.instance}catch(e){r.jX.play(n.Z.CaughtPokemon);const t=new o.Z(e.pokedexNumber,e.name,e.types,e.stats,e.ivs,e.pokemonLevel,e.attacks,e.shiny,e.nextStagePokemon,e.evolutionLevel);return this.party.length<6?this.party.push(t):this.box.push(t),t}}i()}catch(e){i(e)}}))},9509:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>Z});var o=s(5507),n=s(360),r=s(8038),a=s(4539),h=s(3696),l=s(8347),c=s(404),u=s(8865),p=s(50),d=s(4779),m=e([o,a,h,c,u,d]);[o,a,h,c,u,d]=m.then?(await m)():m;class Z{static DEFAULT_POKEMON_SPAWN_DELAY=2;constructor(e,t,s,i,o,n,r,a,l,m=new u.Z([e=>{e()}]),y=new u.Z([e=>{e()}]),k=new u.Z([e=>{e()}]),E=Z.DEFAULT_POKEMON_SPAWN_DELAY,g=[]){this.borderColour=o,this.wildPokemonQueue=e,this.map=s,this.pokemonPathLocations=s.getPathPoints(),this.rareCandies=this.generateRareCandies(t),this.towerSlots=this.generateTowerSlots(s.getTowerSlotPositions()),this.pokemonTowers=[],this.runningPokemon=[],this.inventory=i,this.ui=new c.Z(i),this.victoryCutscene=m,this.lossCutscene=y,this.introCutscene=k,this.preventWildPokemonSpawing=!1,this.cutscenePerson=g,this.name=n,this.imageName=r,this.levelNumber=a,this.pokeballsProvided=l,e.forEach((e=>{e.setLevel(this)})),this.timer=new p.Z,this.timer.addTask((()=>{if(this.wildPokemonQueue.length>0){const e=this.wildPokemonQueue.splice(0,1)[0];this.runningPokemon.push(e),e.shiny&&h.j3.push(new d.Y)}}),E)}update(e){this.ui.update(e),this.paused||(this.timer.update(e),this.runningPokemon=this.runningPokemon.filter((e=>(e.isDead()&&e.die(),!e.isDead()))),this.rareCandies=this.rareCandies.filter((e=>!e.stolen&&!isNaN(e.position.x)&&!isNaN(e.position.y))),this.rareCandies.forEach((t=>t.update(e))),this.ui.partyView.partyMemberHolders.forEach((t=>t.update(e))),this.pokemonTowers.forEach((t=>t.update(e))),this.runningPokemon.forEach((t=>t.update(e)&&(0!=t.velocity.x||0!=t.velocity.y))))}render(){this.map.render(),this.towerSlots.forEach((e=>e.render())),this.rareCandies.forEach((e=>e.render())),this.runningPokemon.forEach((e=>e.render())),this.pokemonTowers.forEach((e=>e.render())),this.map.renderTop(),this.map.renderPadding(),this.ui.render(),this.cutscenePerson.forEach((e=>e.render())),this.ui.renderPokeball()}lostLevel(){return 0==this.rareCandies.length}wonLevel(){return 0==this.runningPokemon.length&&0==this.wildPokemonQueue.length}generateTowerSlots(e){return e.map((e=>new o.Z(e)))}didMouseHitObject(e,t,s){return e>=s.position.x&&e<=s.position.x+s.dimensions.x&&t>=s.position.y&&t<=s.position.y+s.dimensions.y}pause(){this.paused=!0}unpause(){this.paused=!1,h.HT.paused=!1}generateRareCandies(e){const t=this.map.getPathPoints(),s=t[t.length-1],i=[];for(let t=0;t<e;t++)i.push(new a.Z(new r.Z(s.x-l.Z.SIZE/2*Math.random()*((0,n.n8)(.5)?-1:1),s.y-l.Z.SIZE/2*Math.random()*((0,n.n8)(.5)?-1:1)),new r.Z(l.Z.SIZE,l.Z.SIZE)));return i}}i()}catch(e){i(e)}}))},8480:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(50),n=s(8026),r=s(3696),a=s(8347),h=e([r]);r=(h.then?(await h)():h)[0];class l{constructor(e,t,s,i,r,a=1,h=n.Z.Black,l=(()=>{}),c=(()=>{}),u=null){this.pokemon=e,this.doStatusConditionEffect=t,this.duration=s,this.lifetime=0,this.name=i,this.severity=1,this.maxSeverity=a,this.delay=r,this.colour=h,this.add=()=>{c(this.pokemon,this.severity)},this.remove=()=>{l(this.pokemon),this.removed.wasRemoved=!0},this.removed={wasRemoved:!1},this.timer=new o.Z,this.timer.addTask((()=>{this.removed.wasRemoved||t(this.pokemon,this.severity)}),this.delay),setTimeout((()=>{this.severity--}),this.duration)}setPokemon(e){this.pokemon=e}update(e){this.timer.update(e),this.lifetime+=e}render(){r.Do.beginPath(),r.Do.arc(this.pokemon.position.x+this.pokemon.dimensions.x/2,this.pokemon.position.y+this.pokemon.dimensions.y/2,a.Z.SIZE/2,0,2*Math.PI,!1),r.Do.fillStyle=n.Z.Transparent,r.Do.fill(),r.Do.lineWidth=3,r.Do.strokeStyle=this.colour,r.Do.stroke()}isExpired(){return 0==this.severity}increaseSeverity(){this.severity!=this.maxSeverity&&(this.severity++,this.add(),setTimeout((()=>{this.severity--,this.add()}),this.duration))}}i()}catch(e){i(e)}}))},7779:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(8976);class o extends i.Z{constructor(e,t,s,i,o,n,r,a){super(e,t,s,i,o,n,a),this.statusConditionName=r}attack(e,t){t.getAttacked(this,e)}}},5507:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(8038),n=s(8026),r=s(8347),a=s(6472),h=s(2010),l=e([a]);a=(l.then?(await l)():l)[0];class c extends h.Z{constructor(e){super(new o.Z(e.x*r.Z.SIZE,e.y*r.Z.SIZE),new o.Z(r.Z.SIZE,r.Z.SIZE)),this.outline=new a.Z(e.x,e.y,1,1,{panelColour:n.Z.Transparent,borderColour:"rgba(0, 0, 0, 0.5)"})}update(e){}render(){this.outline.render()}}i()}catch(e){i(e)}}))},1610:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{N:()=>d,Z:()=>u});var o=s(3984),n=s(1571),r=s(3696),a=s(8976),h=s(8480),l=s(7779),c=e([o,r,h]);[o,r,h]=c.then?(await c)():c;class u{static createAttack(e){const t=r.n2.filter((t=>t.name.replace("-"," ").toLowerCase()==e.toLowerCase())).filter((e=>null!=e))[0];if(!t)return null;if("status"==t.damage_class)return u.createStatusMove(e);const s=new a.Z(t.name,t.effectDescription,t.damage_class,t.power,t.type,t.accuracy,t.priority);let i="";const o=s.name.replace("-"," ").split(" ");return o.forEach(((e,t)=>{e=e.charAt(0).toUpperCase()+e.slice(1),i+=e,t!=o.length-1&&(i+=" ")})),s.name=i,s}static createStatusMove(e){const t=r.n2.filter((t=>t.name.replace("-"," ").toLowerCase()==e.toLowerCase())).filter((e=>null!=e))[0];if(!t)return null;const s=e.replace("-"," ").split(" ");let i="";switch(s.forEach(((e,t)=>{e=e.charAt(0).toUpperCase()+e.slice(1),i+=e,t!=s.length-1&&(i+=" ")})),e.toLowerCase().replace(" ","-")){case"poison-powder":return p(i,t,n.Z.Poisoned,1);case"string-shot":return p(i,t,n.Z.Slowed,2);case"sing":return p(i,t,n.Z.Asleep,5)}}}function p(e,t,s,i){return new l.Z(e,t.effectDescription,t.damage_class,t.power,t.type,t.accuracy,s,i)}const d=["poison-powder","string-shot","sing"];i()}catch(m){i(m)}}))},6669:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(8038),o=s(8347);class n{static BOTTOM=0;static COLLISION=1;static TOP=2;static PATH=3;static TOWER_POSITIONS=4;static PADDING=5;constructor(e,t,s){this.tiles=n.generateTiles(e.data,t),this.width=e.width,this.height=e.height,s===n.PATH&&(this.pathPoints=this.getPathPoints())}render(){for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)this.getTile(t,e)?.render(t,e)}getTile(e,t){return this.tiles[e+t*this.width]}static generateTiles(e,t){const s=[];return e.forEach((e=>{const i=-1==--e?null:new o.Z(e,t);s.push(i)})),s}getPathPoints(){let e=[];for(let t=0;t<this.tiles.length;t++)null!=this.tiles[t]&&(this.tiles[t].indexOnMap=t,e.push({tile:this.tiles[t],index:t}));return e.sort(((e,t)=>e.tile.id-t.tile.id)),e.map((e=>new i.Z(e.index%this.width*o.Z.SIZE,Math.floor(e.index/this.width)*o.Z.SIZE)))}getTowerSlotPositions(){let e=[];for(let t=0;t<this.tiles.length;t++)null!=this.tiles[t]&&(this.tiles[t].indexOnMap=t,e.push({tile:this.tiles[t],index:t}));return e.map((e=>new i.Z(e.index%this.width,Math.floor(e.index/this.width))))}}},9449:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>P});var o=s(360),n=s(8038),r=s(4539),a=s(8026),h=s(8642),l=s(878),c=s(5127),u=s(3696),p=s(3846),d=s(5347),m=s(9509),Z=s(8865),y=s(5391),k=s(6403),E=s(1526),g=s(9067),v=s(6472),w=s(7382),x=s(5620),S=s(8347),f=e([r,u,p,d,m,Z,y,k,E,g,v,w,x]);[r,u,p,d,m,Z,y,k,E,g,v,w,x]=f.then?(await f)():f;class P{static async createLevel(e,t){switch(e){case 1:return P.oaksLab(t,e);case 2:return P.veridianForest(t,e);case 3:return P.veridianPond(t,e);case 4:return P.pewterCityEntrance(t,e);case 5:return P.brockGym(t,e);default:return null}}static async oaksLab(e,t){const s=await fetch("./assets/tiled/oaksLab.json").then((e=>e.json())),i=[{num:l.Z.Rattata,chance:1,levelRange:[3,7]}],o=this.createPokemonQueue(i,25),r=new Z.Z([e=>{u.j3.push(new y.Z("Well that sure was crazy!",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("You seem to have a strong bond with your new pokemon. I have a very important task for you.",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("I'd like you to travel through Viridian Forest to Pewter City. I owe the Gym trainer Brock some rare candies. Please deliver them to him. By the time you get there, you may even be able to challenge him.",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("Thank you for your help. These rattata certainly did not come for the rare candies on their own.\nOn your adventure, be sure to keep an eye out for who, or what might be responsible for this.",v.Z.BOTTOM_DIALOGUE,e))}]),d=new Z.Z([e=>{u.j3.push(new y.Z("That's very bad.",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("I can't believe the pokemon I gave you was not strong enough to stop them.",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("Hopefully they'll become strong enough to stop this if it ever happens again.",v.Z.BOTTOM_DIALOGUE,e))}]),k=new p.Z(new n.Z(u.vj/2-S.Z.SIZE/1.75,7*S.Z.SIZE),new n.Z(19.6,30.4),h.Z.OakSmall),g=new Z.Z([e=>{(0,u.PN)(),u.jX.play(c.Z.WallSmash),e()},e=>{u.j3.push(new y.Z("Woah! What was that?",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new E.Z([k],[k.position],[["y"]],[[9*S.Z.SIZE]],[1],"Uh oh! Those rattata look like they're eyeing my rare candies.\nPlease stop them with your new pokemon!",e))},e=>{u.j3.push(new y.Z("The pokemon will move towards the rare candies and steal them.",v.Z.MIDDLE_DIALOGUE,e))},e=>{u.j3.push(new y.Z("Place your pokemon on one of the grey spots so they can attack the wild pokemon.",v.Z.MIDDLE_DIALOGUE,e))},e=>{u.j3.push(new y.Z("If you want to see your pokemon's stats or moves, click on their party box while they're placed.",v.Z.MIDDLE_DIALOGUE,e))},e=>{u.j3.push(new y.Z("The party box is the list of pokemon in boxes at the bottom of the screen. They will fill up as you catch more pokemon!",v.Z.MIDDLE_DIALOGUE,e))},e=>{u.j3.push(new y.Z("When a pokemon's health gets low, it will turn red. When that happens, you can catch them by picking up the pokeball, hovering over them and letting go of it!",v.Z.MIDDLE_DIALOGUE,e))},e=>{u.j3.push(new y.Z("Now go stop those rattata!",v.Z.MIDDLE_DIALOGUE,e))}]);return new m.Z(o,20,new w.Z(s,h.Z.Oak),e,a.Z.Grey,"Oak's Lab",h.Z.Level1,t,2,r,d,g,1.5,[k])}static async veridianForest(e,t){const s=await fetch("./assets/tiled/viridianForest.json").then((e=>e.json())),i=[{num:l.Z.Caterpie,chance:.325,levelRange:[5,7]},{num:l.Z.Oddish,chance:.1,levelRange:[5,7]},{num:l.Z.Weedle,chance:.325,levelRange:[5,7]},{num:l.Z.Pidgey,chance:.15,levelRange:[6,9]},{num:l.Z.Pikachu,chance:.05,levelRange:[7,10]},{num:l.Z.Jigglypuff,chance:.05,levelRange:[9,10]}];let r=this.createPokemonQueue(i,75);r=P.addBossPokemon(r,[x.Z.createWildPokemon(l.Z.Pikachu,(0,o.D9)(25,30),null,!0),x.Z.createWildPokemon(l.Z.Pikachu,(0,o.D9)(25,30),null,!0)],[x.Z.createWildPokemon(l.Z.Pikachu,(0,o.D9)(30,35),null,!0),x.Z.createWildPokemon(l.Z.Pikachu,(0,o.D9)(30,35),null,!0)]);const d=new Z.Z([e=>{u.j3.push(new y.Z("Woohoo! One step closer to brock.",v.Z.BOTTOM_DIALOGUE,e))}]),k=new Z.Z([e=>{u.j3.push(new y.Z("Oh man! What am I going to tell professor oak?",v.Z.BOTTOM_DIALOGUE,e))}]),f=new p.Z(new n.Z(0*S.Z.SIZE,3*S.Z.SIZE),new n.Z(2*S.Z.SIZE,2*S.Z.SIZE),h.Z.Beedrill),T=new p.Z(new n.Z(2*S.Z.SIZE,7*S.Z.SIZE),new n.Z(2*S.Z.SIZE,2*S.Z.SIZE),h.Z.Beedrill),D=new p.Z(new n.Z(4*S.Z.SIZE,0*S.Z.SIZE),new n.Z(2*S.Z.SIZE,2*S.Z.SIZE),h.Z.Beedrill),L=new g.Z(a.Z.Black),b=new Z.Z([e=>{u.j3.push(new y.Z("Oh man, I hope this forest isn't as bad as mum said it was.",v.Z.BOTTOM_DIALOGUE,e))},e=>{(0,u.wC)(c.Z.Buzzing),e()},e=>{u.j3.push(new E.Z([f,T,D],[f.dimensions,T.dimensions,D.dimensions],[["y","x"],["y","x"],["y","x"]],[[9*S.Z.SIZE,9*S.Z.SIZE],[9*S.Z.SIZE,9*S.Z.SIZE],[9*S.Z.SIZE,9*S.Z.SIZE]],[1,1,1],"Oh no! Those beedrill are coming right at me!",e))},e=>{u.j3.push(new E.Z([f,T,D],[f.dimensions,T.dimensions,D.dimensions],[["y","x"],["y","x"],["y","x"]],[[15*S.Z.SIZE,15*S.Z.SIZE],[15*S.Z.SIZE,15*S.Z.SIZE],[15*S.Z.SIZE,15*S.Z.SIZE]],[1,1,1],"AHHHHHHHHHHH!!!",e))},e=>{u.jX.play(c.Z.Beatup),setTimeout(e,2e3)},e=>{u.j3.push(new E.Z([L],[L],[["opacity"]],[[0]],[1],"Well that sure wasn't fun.",e))},e=>{u.j3.push(new y.Z("I dropped all my candy when they attacked me!",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("There are too many pokemon coming for them, I'll have to stop them before I can continue down the path.",v.Z.BOTTOM_DIALOGUE,e))}]);return new m.Z(r,20,new w.Z(s,h.Z.Tiles),e,a.Z.DarkGreen,"Viridian Forest",h.Z.Level2,t,3,d,k,b,.75,[L])}static async veridianPond(e,t){const s=await fetch("./assets/tiled/viridianPond.json").then((e=>e.json())),i=[{num:l.Z.Psyduck,chance:.175,levelRange:[9,12]},{num:l.Z.Poliwag,chance:.175,levelRange:[9,12]},{num:l.Z.Caterpie,chance:.25,levelRange:[8,12]},{num:l.Z.Weedle,chance:.25,levelRange:[6,10]},{num:l.Z.Paras,chance:.05,levelRange:[10,12]},{num:l.Z.Eevee,chance:.1,levelRange:[8,12]}];let n=this.createPokemonQueue(i,75);n=P.addBossPokemon(n,[x.Z.createWildPokemon(l.Z.Parasect,(0,o.D9)(30,35),null,!0),x.Z.createWildPokemon(l.Z.Psyduck,(0,o.D9)(30,35),null,!0)],[x.Z.createWildPokemon(l.Z.Golduck,(0,o.D9)(30,35),null,!0),x.Z.createWildPokemon(l.Z.Poliwhirl,(0,o.D9)(30,35),null,!0),x.Z.createWildPokemon(l.Z.Golduck,(0,o.D9)(30,35),null,!0)]);const r=new Z.Z([e=>{u.j3.push(new y.Z("That was absolutely terrifying.",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("Refreshing, but terrifying....",v.Z.BOTTOM_DIALOGUE,e))}]),p=new Z.Z([e=>{u.j3.push(new y.Z("I take one break...",v.Z.BOTTOM_DIALOGUE,e))}]),d=new g.Z("rgba(139, 0, 0, 0.25)"),k=new Z.Z([e=>{u.j3.push(new y.Z("How can a forest be so hot??",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new y.Z("I can't handle it. I think I'll take a dip in the pond for a bit.",v.Z.BOTTOM_DIALOGUE,e))},e=>{u.j3.push(new E.Z([d],[d],[["opacity"]],[[0]],[2],"Much better...",e)),u.jX.play(c.Z.Splash)},e=>{u.j3.push(new y.Z("Uh oh! I think I hear some pokemon coming my way!!",v.Z.BOTTOM_DIALOGUE,e))}]);return new m.Z(n,20,new w.Z(s,h.Z.Tiles),e,a.Z.DodgerBlue,"Viridian Pond",h.Z.Level3,t,4,r,p,k,.75,[d])}static async pewterCityEntrance(e,t){const s=await fetch("./assets/tiled/pewterCityEntrance.json").then((e=>e.json())),i=[{num:l.Z.Meowth,chance:.15,levelRange:[10,12]},{num:l.Z.Ekans,chance:.2,levelRange:[10,12]},{num:l.Z.Grimer,chance:.15,levelRange:[13,15]},{num:l.Z.Koffing,chance:.2,levelRange:[12,14]},{num:l.Z.Rattata,chance:.25,levelRange:[10,12]},{num:l.Z.Drowzee,chance:.05,levelRange:[13,15]}];let r=this.createPokemonQueue(i,60);r=P.addBossPokemon(r,[x.Z.createWildPokemon(l.Z.Persian,(0,o.D9)(30,35),null,!0),x.Z.createWildPokemon(l.Z.Arbok,(0,o.D9)(30,35),null,!0)],[x.Z.createWildPokemon(l.Z.Muk,(0,o.D9)(32,37),null,!0),x.Z.createWildPokemon(l.Z.Raticate,(0,o.D9)(32,37),null,!0),x.Z.createWildPokemon(l.Z.Weezing,(0,o.D9)(32,37),null,!0)]);const d=new p.Z(new n.Z(4.5*S.Z.SIZE,2.5*S.Z.SIZE),new n.Z(12*S.Z.SIZE,12*S.Z.SIZE),h.Z.RocketGrunts),k=new Z.Z([e=>{(0,u.wC)(c.Z.BlastingOff),e()},e=>{u.j3.push(new E.Z([d,d],[d.dimensions,d],[["x","y"],["rotation"]],[[0,0],[180]],[2,2],"See ya!",e))},e=>{u.j3.push(new y.Z("I don't know what I'm getting paid but it sure as hell isn't enough. I'm so close I have to keep going.",v.Z.BOTTOM_DIALOGUE,e))}]),g=new Z.Z([e=>{(0,u.wC)(c.Z.BuzzOff),e()},e=>{u.j3.push(new y.Z("Damn you team Rocket!! I'll be back!",v.Z.BOTTOM_DIALOGUE,e))}]),f=new p.Z(new n.Z(4.5*S.Z.SIZE,2.5*S.Z.SIZE),new n.Z(0,0),h.Z.RocketGrunts),T=new p.Z(new n.Z(500,500),new n.Z(6*S.Z.SIZE,6*S.Z.SIZE),h.Z.Meowth),D=new Z.Z([e=>{u.j3.push(new y.Z("Finally, out of that darned Forest!",v.Z.BOTTOM_DIALOGUE,e))},e=>{(0,u.wC)(c.Z.RocketMotto),e()},e=>{u.j3.push(new E.Z([f],[f.dimensions],[["x","y"]],[[12*S.Z.SIZE,12*S.Z.SIZE]],[1],"What you got there little man?! You think you're able to come to Pewter City with all those rare candies and not pay the ROCKET TAX?! Oh boy do we have news for you, prepare for trouble... And make it double...",(()=>{u.jX.play("Pokemon52"),e()})))},e=>{u.j3.push(new E.Z([f,T],[f.dimensions,T.position],[["x","y"],["x","y"]],[[f.dimensions.x,f.dimensions.y],[7.5*S.Z.SIZE,5.5*S.Z.SIZE]],[1,1],"DON'T FORGET MEOWTH!!!",e))}]);return new m.Z(r,20,new w.Z(s,h.Z.Tiles),e,a.Z.Grey,"Pewter City Entrance",h.Z.Level4,t,5,k,g,D,1.15,[])}static async brockGym(e,t){const s=await fetch("./assets/tiled/brock.json").then((e=>e.json())),i=[{num:l.Z.Geodude,chance:.35,levelRange:[10,12]},{num:l.Z.Onix,chance:.35,levelRange:[10,12]},{num:l.Z.Diglett,chance:.2,levelRange:[11,13]},{num:l.Z.Dugtrio,chance:.05,levelRange:[13,15]},{num:l.Z.Graveler,chance:.05,levelRange:[13,15]}];let r=this.createPokemonQueue(i,150);r=P.addBossPokemon(r,[x.Z.createWildPokemon(l.Z.Rhydon,(0,o.D9)(30,35),null,!0),x.Z.createWildPokemon(l.Z.Graveler,(0,o.D9)(30,35),null,!0)],[x.Z.createWildPokemon(l.Z.Dugtrio,(0,o.D9)(32,37),null,!0),x.Z.createWildPokemon(l.Z.Onix,(0,o.D9)(32,37),null,!0),x.Z.createWildPokemon(l.Z.Golem,(0,o.D9)(32,37),null,!0)]);const d=new p.Z(new n.Z(10.5*S.Z.SIZE-75,500),new n.Z(150,370),h.Z.Brock),k=new Z.Z([e=>{(0,u.wC)(c.Z.BoulderBadgeCongratulations),e()},e=>{u.j3.push(new E.Z([d],[d.position],[["x","y"]],[[d.position.x,8.5*S.Z.SIZE-f.dimensions.y/3]],[1],"Nicely Done!",e))},e=>{u.j3.push(new E.Z([d],[d.position],[["x","y"]],[[d.position.x,d.position.y]],[1],"Oh you brought these rare candies for me?! Thank you so much! But Ummm actually can you bring these to Misty over in Cerulean City?",e))}]),g=new Z.Z([e=>{(0,u.wC)(c.Z.TakeTheL),e()},e=>{u.j3.push(new y.Z("Guess I thought too much of you...",v.Z.BOTTOM_DIALOGUE,e))}]),f=new p.Z(new n.Z(10.5*S.Z.SIZE-75,500),new n.Z(150,370),h.Z.Brock),T=new p.Z(new n.Z(-120,8.5*S.Z.SIZE-4*S.Z.SIZE),new n.Z(8*S.Z.SIZE,8*S.Z.SIZE),h.Z.Onix),D=new p.Z(new n.Z(500,10.5*S.Z.SIZE),new n.Z(8*S.Z.SIZE,8*S.Z.SIZE),h.Z.Geodude),L=new Z.Z([e=>{u.j3.push(new y.Z("Hello?! I'm looking for Brock, is anyone there?",v.Z.BOTTOM_DIALOGUE,e))},e=>{(0,u.wC)(c.Z.BrockGym),e()},e=>{u.j3.push(new E.Z([f],[f.position],[["x","y"]],[[f.position.x,8.5*S.Z.SIZE-f.dimensions.y/3]],[1],"Oh you want a challenge don't you? I heard about your run in with Team Rocket and I have to say, I'm impressed!",(()=>{u.jX.play("Pokemon95"),e()})))},e=>{u.j3.push(new E.Z([f,T],[f.dimensions,T.position],[["x","y"],["x","y"]],[[f.dimensions.x,f.dimensions.y],[13*S.Z.SIZE,5.5*S.Z.SIZE]],[1,1],"I am a master of Rock-Type Pokémon.",(()=>{u.jX.play("Pokemon74"),e()})))},e=>{u.j3.push(new E.Z([D,T,f],[D.position,T.position,f.dimensions],[["x","y"],["x","y"],["x","y"]],[[0,5.5*S.Z.SIZE],[T.position.x,T.position.y],[f.dimensions.x,f.dimensions.y]],[1,1,1],"Let's see what you can do against my ROCK HARD Pokémon!",e))},e=>{u.j3.push(new E.Z([D,T,f],[D.position,T.position,f.dimensions],[["x","y"],["x","y"],["x","y"]],[[D.position.x,D.position.y],[T.position.x,T.position.y],[f.dimensions.x,f.dimensions.y]],[.1,.1,.1],"Oh and by the way, you can catch as many Pokémon as you're able to!",e))}]);return new m.Z(r,20,new w.Z(s,h.Z.Tiles),e,a.Z.Brown,"Brock's Gym",h.Z.Level5,t,5,k,g,L,1,[])}static createPokemonQueue(e,t){const s=[];for(let i=0;i<t;i++){let t=!1;e.forEach(((i,n)=>{if(!t)if(n==e.length-1)s.push(x.Z.createWildPokemon(i.num,(0,o.D9)(i.levelRange[0],i.levelRange[1])));else{const r=i.chance/e.slice(n).map((e=>e.chance)).reduce(((e,t)=>e+t));(0,o.n8)(r)&&(s.push(x.Z.createWildPokemon(i.num,(0,o.D9)(i.levelRange[0],i.levelRange[1]))),t=!0)}}))}return s}static addBossPokemon(e,t,s){return e.slice(0,e.length/2).concat(t).concat(e.slice(e.length/2)).concat(s)}}i()}catch(e){i(e)}}))},7382:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>u});var o=s(3378),n=s(8642),r=s(8347),a=s(6669),h=s(8026),l=s(3696),c=e([l]);l=(c.then?(await c)():c)[0];class u{constructor(e,t=n.Z.Tiles){const s=o.Z.generateSpritesFromSpriteSheet(l.Wc.get(t),r.Z.SIZE,r.Z.SIZE);o.Z.generateSpritesFromSpriteSheet(l.Wc.get(n.Z.Black),r.Z.SIZE,r.Z.SIZE).forEach((e=>s.push(e))),o.Z.generateSpritesFromSpriteSheet(l.Wc.get(n.Z.BrockTiles),r.Z.SIZE,r.Z.SIZE).forEach((e=>s.push(e))),this.bottomLayer=new a.Z(e.layers[a.Z.BOTTOM],s,a.Z.BOTTOM),this.collisionLayer=new a.Z(e.layers[a.Z.COLLISION],s,a.Z.COLLISION),this.topLayer=new a.Z(e.layers[a.Z.TOP],s,a.Z.TOP),this.pathLayer=new a.Z(e.layers[a.Z.PATH],s,a.Z.PATH),this.towerPositionsLayer=new a.Z(e.layers[a.Z.TOWER_POSITIONS],s,a.Z.TOWER_POSITIONS),this.paddingLayer=new a.Z(e.layers[a.Z.PADDING],s,a.Z.PADDING)}render(){this.bottomLayer.render(),this.collisionLayer.render(),this.topLayer.render(),l.eM&&u.renderGrid()}renderPadding(){this.paddingLayer.render()}renderTop(){this.topLayer.render()}static renderGrid(){l.Do.save(),l.Do.strokeStyle=h.Z.White;for(let e=1;e<l.lf/r.Z.SIZE;e++){l.Do.beginPath(),l.Do.moveTo(0,e*r.Z.SIZE),l.Do.lineTo(l.vj,e*r.Z.SIZE),l.Do.closePath(),l.Do.stroke();for(let e=1;e<l.vj/r.Z.SIZE;e++)l.Do.beginPath(),l.Do.moveTo(e*r.Z.SIZE,0),l.Do.lineTo(e*r.Z.SIZE,l.lf),l.Do.closePath(),l.Do.stroke()}l.Do.restore()}getPathPoints(){const e=this.pathLayer.getPathPoints(),t=e[0],s=e[1],i=s.x-t.x,o=s.y-t.y;return o>0?t.y-=2*r.Z.SIZE:o<0?t.y+=2*r.Z.SIZE:i>0?t.x-=2*r.Z.SIZE:i<0&&(t.x+=2*r.Z.SIZE),e}getTowerSlotPositions(){return this.towerPositionsLayer.getTowerSlotPositions()}}i()}catch(e){i(e)}}))},5620:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>d});var o=s(1928),n=s(3696),r=s(5197),a=s(3708),h=s(360),l=s(914),c=(s(878),s(8042)),u=s(1610),p=e([o,n,l,c,u]);[o,n,l,c,u]=p.then?(await p)():p;class d{static createPokemon(e,t,s=null){const i=n.Oq.filter((t=>t.no==e))[0];let r=[];if(null==s){let e=i.level_up_moves.filter((e=>e.level<=t));e=e.filter((e=>n.n2.filter((t=>t.name==e.name.toLowerCase().replace(" ","-"))).length>0)),r=e.length<=4?e:e.slice(0,4);for(let t=4;t<e.length;t++)(0,h.n8)(.8)&&(r[(0,h.D9)(0,3)]=e[t]);r=r.map((e=>u.Z.createAttack(e.name))).filter((e=>e))}const a=[];for(let e=0;e<6;e++)a.push((0,h.D9)(0,31));return new o.Z(e,i.name,i.types.map(d.typeStringToType),i.base_stats.slice(0,6),a,t,r,(0,h.n8)(n.Q9),i.nextStage,i.evolutionLevel)}static createWildPokemon(e=0,t=0,s=null,i=!1){if(null==s){if(0==e||0==t)throw Error("Wild pokemon's pokedex number and level must both be set if no pokemon is passed to the createWildPokemon method.");s=d.createPokemon(e,t)}return new l.Z(s.pokedexNumber,s.name,s.types,s.baseStats,s.ivs,s.pokemonLevel,s.attacks,(0,h.n8)(n.Q9),s.nextStagePokemon,s.evolutionLevel,i)}static createPokemonTower(e,t,s=null,i=0,o=0){if(null==s){if(0==i||0==t)throw Error("Pokemon tower's pokedex number and level must both be set if no pokemon is passed to the createPokemonTower method.");s=d.createPokemon(i,t)}return new c.Z(s,e,t)}static typeStringToType(e){switch(e.type&&(e=e.type.name),e.charAt(0).toUpperCase()+e.slice(1)){case a.Z.Normal:return r.Z.Normal;case a.Z.Fighting:return r.Z.Fighting;case a.Z.Flying:return r.Z.Flying;case a.Z.Poison:return r.Z.Poison;case a.Z.Ground:return r.Z.Ground;case a.Z.Rock:return r.Z.Rock;case a.Z.Bug:return r.Z.Bug;case a.Z.Ghost:return r.Z.Ghost;case a.Z.Fire:return r.Z.Fire;case a.Z.Water:return r.Z.Water;case a.Z.Grass:return r.Z.Grass;case a.Z.Electric:return r.Z.Electric;case a.Z.Psychic:return r.Z.Psychic;case a.Z.Ice:return r.Z.Ice;case a.Z.Dragon:return r.Z.Dragon;case a.Z.Steel:return r.Z.Steel;case a.Z.Dark:return r.Z.Dark;case a.Z.Fairy:return r.Z.Fairy}}}i()}catch(e){i(e)}}))},5687:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{a:()=>p,m:()=>d});var o=s(1928),n=(s(878),s(3696)),r=s(5347),a=s(1610),h=s(5620),l=e([o,n,r,a,h]);[o,n,r,a,h]=l.then?(await l)():l;const c="ptd-save-data",u="ptd-backup-save-data",p=()=>{const e=r.Z.getInstance();localStorage.setItem(c,JSON.stringify({level:(0,n.Wp)(),party:e.party,box:e.box,pokedollars:e.pokedollars,username:(0,n.Ms)(),pokeballCount:e.pokeballCount}))},d=()=>{let e;console.log(localStorage.getItem(c));try{e=JSON.parse(localStorage.getItem(c))}catch(e){m(localStorage.getItem(c))}const t=localStorage.getItem(c);if(!e)return r.Z.getInstance();try{(0,n.b6)(e.username),(0,n.Bb)(e.level);const s=e.box.map((e=>Z(e))),i=e.party.map((e=>Z(e))),o=r.Z.getInstance();o.party=i,o.box=s,o.pokedollars=e.pokedollars,o.pokeballCount=e.pokeballCount,(!(0,n.Ms)()||0==o.party.length&&0==o.box.length)&&m(t)}catch(e){m(t)}};function m(e){localStorage.setItem(u,e),alert("Your save data was corrupted. The good news is we backed it up for you. Just don't clear your browsing history, and contact a developer so we can help you recover it."),alert("The page will now refresh and appear as if you've never played the game before. !! IF YOU CONTINUE PLAYING AND YOUR DATA IS CORRUPTED AGAIN, YOU WILL LOSE YOUR OLD ACCOUNT FOREVER !!"),localStorage.setItem(c,null),location.reload()}function Z(e){e.attacks=e.attacks.map((e=>a.Z.createAttack(e.name))),e.types=e.types.map((e=>h.Z.typeStringToType(e.name)));const t=new o.Z(e.pokedexNumber,e.name,e.types,e.baseStats,e.ivs,e.pokemonLevel,e.attacks,e.shiny??!1,e.nextStagePokemon,e.evolutionLevel);return t.selectedAttack=t.attacks.filter((t=>t.name==e.selectedAttack.name))[0],t.experience=e.experience,t}i()}catch(y){i(y)}}))},3984:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8480),n=s(1571),r=(s(8818),s(3708)),a=e([o]);function h(e){switch(e){case r.Z.Psychic:return"rgba(148, 0, 211, 0.5 )";case r.Z.Normal:return"rgba(168, 168, 120, 0.5 )";case r.Z.Bug:return"rgba(168, 184, 32, 0.5 )";case r.Z.Fighting:return"rgba(192, 48, 40, 0.5 )";case r.Z.Flying:return"rgba(168, 144, 240, 0.5 )";case r.Z.Poison:return"rgba(160, 64, 160, 0.5 )";case r.Z.Ground:return"rgba(224, 192, 104, 0.5 )";case r.Z.Rock:return"rgba(184, 160, 56, 0.5 )";case r.Z.Ghost:return"rgba(112, 88, 152, 0.5 )";case r.Z.Fire:return"rgba(240, 128, 48, 0.5 )";case r.Z.Water:return"rgba(104, 144, 240, 0.5 )";case r.Z.Grass:return"rgba(120, 200, 80, 0.5 )";case r.Z.Electric:return"rgba(248, 208, 48, 0.5 )";case r.Z.Ice:return"rgba(150, 217, 214, 0.5 )";case r.Z.Dragon:return"rgba(112, 56, 248, 0.5 )";case r.Z.Steel:return"rgba(184, 184, 208, 0.5 )";case r.Z.Dark:case r.Z.Fairy:return"rgba(112, 88, 72, 0.5 )";default:return"rgba(0, g: 0, 0.5 )"}}o=(a.then?(await a)():a)[0];class l{static getStatusCondition(e,t,s){switch(e){case n.Z.Poisoned:return new o.Z(t,((e,t)=>{e.takeDamage(e.maxHealth*t/16)}),4e3,n.Z.Poisoned,1,3,h(s.type));case n.Z.Slowed:return new o.Z(t,((e,t)=>{}),4500,n.Z.Slowed,0,3,h(s.type),((e,t)=>{e.calculateNewVelocity()}),((e,t)=>{e.calculateNewVelocity()}));case n.Z.Asleep:return new o.Z(t,((e,t)=>{}),2e3,n.Z.Asleep,0,5,h(s.type),((e,t)=>{e.calculateNewVelocity()}),((e,t)=>{e.calculateNewVelocity()}))}}}i()}catch(c){i(c)}}))},8347:(e,t,s)=>{s.d(t,{Z:()=>i});class i{static SIZE=16;constructor(e,t){this.sprites=t,this.id=e}render(e,t){this.sprites[this.id].render(e*i.SIZE,t*i.SIZE)}}},2747:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>u});var o=s(6854),n=s(3696),r=s(5347),a=s(924),h=s(6472),l=s(5188),c=e([n,r,a,h,l]);[n,r,a,h,l]=c.then?(await c)():c;class u extends l.Z{constructor(e){super(),this.ui=new a.Z("Are you sure, there is no going back!"),this.pokemon=e,this.mouseDownListener=e=>this.manageMouseDown(e),this.mouseMoveListener=e=>this.manageMouseMove(e),this.attachEventListeners()}enter(){}render(){this.ui.render()}manageMouseDown(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;if((0,o.Z)(t,s,this.ui.noButton)&&n.j3.pop(),(0,o.Z)(t,s,this.ui.yesButton)){this.inventory=r.Z.getInstance();let e=this.inventory.party.indexOf(this.pokemon);e<0?(e=this.inventory.box.indexOf(this.pokemon),this.inventory.box.splice(e,1)):this.inventory.party.splice(e,1),n.j3.pop(),n.j3.pop()}}manageMouseMove(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;(0,o.Z)(t,s,this.ui.yesButton)?this.ui.yesButton.onHover():this.ui.yesButton.onNoHover(),(0,o.Z)(t,s,this.ui.noButton)?this.ui.noButton.onHover():this.ui.noButton.onNoHover()}removeEventListeners(){super.removeEventListeners(),n.JQ.removeEventListener("mousedown",this.mouseDownListener),n.JQ.removeEventListener("mousemove",this.mouseMoveListener)}attachEventListeners(){super.attachEventListeners(),n.JQ.addEventListener("mousedown",this.mouseDownListener),n.JQ.addEventListener("mousemove",this.mouseMoveListener)}}i()}catch(e){i(e)}}))},5188:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>a});var o=s(9313),n=s(5687),r=e([n]);n=(r.then?(await r)():r)[0];class a extends o.Z{exit(){super.exit(),(0,n.a)()}}i()}catch(e){i(e)}}))},876:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>Z});var o=s(5188),n=s(8038),r=s(1532),a=s(8042),h=s(3708),l=(s(8026),s(5127)),c=s(3696),u=s(8347),p=s(50),d=s(360),m=e([o,r,a,c]);[o,r,a,c]=m.then?(await m)():m;class Z extends o.Z{constructor(e,t){super(),this.pokemonTower=e,this.targetPokemon=t,this.timer=new p.Z}render(){this.attackParticleSystem&&this.attackParticleSystem.render()}update(e){this.timer.update(e),this.attackParticleSystem&&this.attackParticleSystem.update(e),this.doneAttacking&&this.pokemonTower.stateStack.pop()}enter(){this.attack(this.targetPokemon)}exit(){this.pokemonTower.attacking=!1}attack(e){let t=.25;this.pokemonTower.attacking=!0;const s=this.pokemonTower.pokemon.selectedAttack;s.priority&&(cooldownTime/=1.25,t/=1.1),"physical"==s.damageClass?this.timer.tween(this.pokemonTower.pokemon.position,["x","y"],[e.position.x,e.position.y],t,(()=>{(0,d.n8)(s.accuracy/100)&&e.getAttacked(s,this.pokemonTower),this.playAttackSound(s.name,l.Z.DefaultPhysicalAttackNoise),this.timer.tween(this.pokemonTower.pokemon.position,["x","y"],[this.pokemonTower.towerSlot.position.x,this.pokemonTower.towerSlot.position.y],t,(()=>{this.pokemonTower.cooldown(s.cooldown),this.doneAttacking=!0}))})):"special"==s.damageClass?(this.attackParticleSystem=new r.Z(new n.Z(this.pokemonTower.pokemon.position.x+u.Z.SIZE/2,this.pokemonTower.pokemon.position.y+u.Z.SIZE/2),5,this.attackTypeToColour(s.type),150,300,null,!1,e),this.playAttackSound(s.name,l.Z.DefaultSpecialAttackNoise),this.timer.addTask((()=>{}),0,2*t,(()=>{(0,d.n8)(s.accuracy/100)&&e.getAttacked(s,this.pokemonTower),this.pokemonTower.cooldown(s.cooldown),this.doneAttacking=!0}))):"status"==s.damageClass&&((0,d.n8)(s.accuracy/100)&&s.attack(this.pokemonTower,e),this.doneAttacking=!0,this.pokemonTower.cooldown(s.cooldown),this.playAttackSound(s.name,l.Z.DefaultStatusAttackNoise))}playAttackSound(e,t){try{c.jX.play(e.toLowerCase().replace(" ","-"))}catch(s){s instanceof TypeError&&(console.log("Could not find "+e.toLowerCase().replace(" ","-")),c.jX.play(t))}}attackTypeToColour(e){switch(e){case h.Z.Psychic:return{r:148,g:0,b:211,a:1};case h.Z.Normal:return{r:168,g:168,b:120,a:1};case h.Z.Bug:return{r:168,g:184,b:32,a:1};case h.Z.Fighting:return{r:192,g:48,b:40,a:1};case h.Z.Flying:return{r:168,g:144,b:240,a:1};case h.Z.Poison:return{r:160,g:64,b:160,a:1};case h.Z.Ground:return{r:224,g:192,b:104,a:1};case h.Z.Rock:return{r:184,g:160,b:56,a:1};case h.Z.Ghost:return{r:112,g:88,b:152,a:1};case h.Z.Fire:return{r:240,g:128,b:48,a:1};case h.Z.Water:return{r:104,g:144,b:240,a:1};case h.Z.Grass:return{r:120,g:200,b:80,a:1};case h.Z.Electric:return{r:248,g:208,b:48,a:1};case h.Z.Ice:return{r:150,g:217,b:214,a:1};case h.Z.Dragon:return{r:112,g:56,b:248,a:1};case h.Z.Steel:return{r:184,g:184,b:208,a:1};case h.Z.Dark:case h.Z.Fairy:return{r:112,g:88,b:72,a:1};default:return{r:0,g:0,b:0,a:1}}}}i()}catch(e){i(e)}}))},9959:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(6740),n=s(5188),r=s(8042),a=s(8347),h=s(876),l=e([n,r,h]);[n,r,h]=l.then?(await l)():l;class c extends n.Z{constructor(e){super(),this.pokemonTower=e}update(e){this.pokemonTower.pokemon.update(e),this.manageAttacks()}render(){this.pokemonTower.pokemon.render()}manageAttacks(){if(this.pokemonTower.pokemon.coolingDown||this.pokemonTower.pokemon.attacking||this.pokemonTower.pokemon.pickedUp)return;const e=this.pokemonTower.level.runningPokemon.filter((e=>(0,o.q)(this.pokemonTower.pokemon.position,e.position)<=r.Z.DEFAULT_RANGE*a.Z.SIZE));e.sort(((e,t)=>e.walkingForwards!=t.walkingForwards?e.walkingForwards?1:-1:e.nextPositionIndex!=t.nextPositionIndex?e.walkingForwards?t.nextPositionIndex-e.nextPositionIndex:e.nextPositionIndex-t.nextPositionIndex:e.velocity.y<0?e.position.y-t.position.y:e.velocity.y>0?t.position.y-e.position.y:e.velocity.x>0?t.position.x-e.position.x:e.position.x-t.position.x)),e.length>0&&this.pokemonTower.stateStack.push(new h.Z(this.pokemonTower,e[0]))}}i()}catch(e){i(e)}}))},1405:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>m});var o=s(6854),n=s(5188),r=s(8026),a=s(3928),h=s(3696),l=s(8347),c=s(4949),u=s(6472),p=s(5127),d=e([n,h,c,u]);[n,h,c,u]=d.then?(await d)():d;class m extends n.Z{static PANEL_DIMENSIONS={width:21,height:6};constructor(e,t,s=(()=>{})){super(),this.background=new u.Z(h.vj/l.Z.SIZE/h.Bg-7.1,h.lf/l.Z.SIZE/h.Bg-1,m.PANEL_DIMENSIONS.width,m.PANEL_DIMENSIONS.height,{borderWidth:5,borderColour:r.Z.Transparent,panelColour:r.Z.Black}),this.description=`${e.name} is evolving?`,this.cancelButton=new c.Z(h.vj/l.Z.SIZE/h.Bg-.6+m.PANEL_DIMENSIONS.width/2-8.5,h.lf/l.Z.SIZE/h.Bg-1+m.PANEL_DIMENSIONS.height/2+1.5,4,1,"Cancel"),this.sprites=[e.directionalSprites[a.Z.DOWN][0],t.directionalSprites[a.Z.DOWN][0]],this.selectedSprite=0,this.currentFlipInterval=.5,this.timeSinceLastFlip=0,this.totalAnimationTime=6,this.timeSinceAnimationStart=0,this.nextStagePokemon=t,this.currentPokemon=e,this.cancelled=!1,this.mouseDownEventListener=e=>this.manageMouseDown(e),this.mouseMoveEventListener=e=>this.manageMouseMove(e),h.JQ.addEventListener("mousedown",this.mouseDownEventListener),h.JQ.addEventListener("mousemove",this.mouseMoveEventListener),this.callback=s}enter(){super.enter(),(0,h.mx)(),h.jX.stop(p.Z.LevelUp),h.jX.play(p.Z.Evolving)}update(e){this.cancelled||this.evolutionDone?h.XP.Enter&&(h.XP.Enter=!1,h.j3.pop(),this.callback()):(this.timeSinceAnimationStart+=e,this.timeSinceLastFlip+=e,this.timeSinceLastFlip>=this.currentFlipInterval&&this.flipSprite(),this.timeSinceAnimationStart>=this.totalAnimationTime&&(this.description=`${this.currentPokemon.name} evolved into ${this.nextStagePokemon.name}!`,this.evolve(),this.selectedSprite=1))}render(){this.background.render(),this.sprites[this.selectedSprite].render(h.vj/2-this.sprites[this.selectedSprite].width/2,h.lf/2-this.sprites[this.selectedSprite].height/2-2*l.Z.SIZE),this.cancelled||this.evolutionDone||this.cancelButton.render(),h.Do.save(),h.Do.fillStyle="White";const e=h.Do.measureText(this.description).width;h.Do.fillText(this.description,this.background.position.x+(this.background.dimensions.x-e)/2,this.background.position.y+4*l.Z.SIZE),h.Do.restore()}exit(){super.exit(),h.j3.states[h.j3.states.length-2].attachEventListeners(),h.JQ.removeEventListener("mousedown",this.mouseDownEventListener),h.JQ.removeEventListener("mousemove",this.mouseMoveEventListener),(0,h.Js)()}evolve(){this.currentPokemon.sprites=this.nextStagePokemon.sprites,this.currentPokemon.name=this.nextStagePokemon.name,this.currentPokemon.types=this.nextStagePokemon.types,this.currentPokemon.directionalSprites=this.nextStagePokemon.directionalSprites,this.currentPokemon.baseStats=this.nextStagePokemon.baseStats,this.currentPokemon.cry=this.nextStagePokemon.cry,this.currentPokemon.nextStagePokemon=this.nextStagePokemon.nextStagePokemon,this.currentPokemon.evolutionLevel=this.nextStagePokemon.evolutionLevel,this.currentPokemon.pokedexNumber=this.nextStagePokemon.pokedexNumber,this.currentPokemon.calculateStats(),this.evolutionDone=!0}flipSprite(){this.selectedSprite=0==this.selectedSprite?1:0,this.currentFlipInterval=Math.max(.05,this.currentFlipInterval-.03),this.timeSinceLastFlip=0}manageMouseDown(e){if(this.cancelled||this.evolutionDone)return h.j3.pop(),void this.callback();const t=e.offsetX/h.Bg,s=e.offsetY/h.Bg;(0,o.Z)(t,s,this.cancelButton)&&(this.cancelled=!0,this.selectedSprite=0,this.description=`${this.currentPokemon.name} did not evolve...`,this.cancelButton.onNoHover(),h.jX.stop(p.Z.Evolving))}manageMouseMove(e){if(this.cancelled||this.evolutionDone)return;const t=e.offsetX/h.Bg,s=e.offsetY/h.Bg;(0,o.Z)(t,s,this.cancelButton)?this.cancelButton.onHover():this.cancelButton.onNoHover()}}i()}catch(e){i(e)}}))},1447:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>y});var o=s(6854),n=s(5188),r=s(8038),a=s(8026),h=s(3696),l=s(1610),c=s(8347),u=s(4949),p=s(6472),d=s(7190),m=s(9299),Z=e([n,h,l,u,p,d,m]);[n,h,l,u,p,d,m]=Z.then?(await Z)():Z;class y extends n.Z{static MESSAGE_BOX_DIMENSIONS={width:16,height:8};static STATE={ReplaceOrNot:0,ReplacementPick:1,AreYouSure:2,MoveAdded:3};constructor(e,t,s=(()=>{})){super(),this.pokemon=e,this.newMove=t,this.callback=s,this.selectedReplacement=this.pokemon.selectedAttack,this.originalSelectionIndex=0,this.pokemon.attacks.forEach(((e,t)=>{e==this.pokemon.selectedAttack&&(this.originalSelectionIndex=t)})),this.currentState=y.STATE.ReplaceOrNot,this.replaceOrNotDescription=`${e.name} wants to learn ${t.name}.\nWould you like to replace an old move to learn it?`,this.description=this.replaceOrNotDescription,this.pokemon.attacks.length<4&&(this.pokemon.attacks.push(l.Z.createAttack(t.name)),this.currentState=y.STATE.MoveAdded,this.description=`${e.name} learned ${t.name}!`);const i={x:h.vj/2/c.Z.SIZE-y.MESSAGE_BOX_DIMENSIONS.width/2,y:h.lf/2/c.Z.SIZE-y.MESSAGE_BOX_DIMENSIONS.height/2};this.background=new p.Z(i.x,i.y,y.MESSAGE_BOX_DIMENSIONS.width,y.MESSAGE_BOX_DIMENSIONS.height,{panelColour:a.Z.Black,borderColour:a.Z.Transparent}),this.attackPanels=new m.Z(e,i.x/c.Z.SIZE+7,i.y/c.Z.SIZE+2.25+d.Z.DIMENSIONS.y),this.blackoutBackground=new p.Z(0,0,h.vj/c.Z.SIZE,h.lf/c.Z.SIZE,{borderWidth:0,panelColour:"rgba(0, 0, 0, 0.9)",borderColour:a.Z.Transparent}),this.selectedReplacementDescriptionPanel=new d.Z(this.pokemon,i.x+2.5,i.y+2.25+d.Z.DIMENSIONS.y),this.newMoveDescriptionPanel=new d.Z({selectedAttack:t},i.x+2.5,i.y+2.25-d.Z.DIMENSIONS.y),this.yesButton=new u.Z(i.x+y.MESSAGE_BOX_DIMENSIONS.width/2+1,i.y+y.MESSAGE_BOX_DIMENSIONS.height-1.5,2,1,"Yes"),this.noButton=new u.Z(i.x+y.MESSAGE_BOX_DIMENSIONS.width/2-3,i.y+y.MESSAGE_BOX_DIMENSIONS.height-1.5,2,1,"No"),this.attachEventListeners()}update(e){this.pokemon.update(e),this.currentState==y.STATE.ReplaceOrNot?(this.noButton.onClick=()=>{this.currentState=y.STATE.AreYouSure,this.description=`Are you sure you want to give up\non learning ${this.newMove.name}?`,this.selectedReplacement=null},this.yesButton.onClick=()=>{this.currentState=y.STATE.ReplacementPick,this.yesButton.position.y+=d.Z.DIMENSIONS.y*c.Z.SIZE,this.noButton.position.y+=d.Z.DIMENSIONS.y*c.Z.SIZE}):this.currentState==y.STATE.ReplacementPick?(this.renderDescription(),this.yesButton.onClick=()=>{this.currentState=y.STATE.AreYouSure,this.description=`Are you sure you want to replace\n${this.selectedReplacement.name} with ${this.newMove.name}?`,this.yesButton.position.y-=d.Z.DIMENSIONS.y*c.Z.SIZE,this.noButton.position.y-=d.Z.DIMENSIONS.y*c.Z.SIZE},this.noButton.onClick=()=>{this.currentState=y.STATE.AreYouSure,this.description=`Are you sure you want to give up\non learning ${this.newMove.name}?`,this.selectedReplacement=null,this.yesButton.position.y-=d.Z.DIMENSIONS.y*c.Z.SIZE,this.noButton.position.y-=d.Z.DIMENSIONS.y*c.Z.SIZE}):this.currentState==y.STATE.AreYouSure&&(this.noButton.onClick=()=>{this.currentState=y.STATE.ReplaceOrNot,this.description=this.replaceOrNotDescription},this.yesButton.onClick=()=>{this.pokemon.attacks.forEach(((e,t)=>{e==this.selectedReplacement&&(this.pokemon.attacks[t]=this.newMove)})),h.j3.pop(),this.callback()})}render(){h.Do.save(),this.currentState==y.STATE.ReplaceOrNot||this.currentState==y.STATE.AreYouSure?(this.background.render(),this.renderPokemon(),this.renderDescription(),this.yesButton.render(),this.noButton.render()):this.currentState==y.STATE.ReplacementPick?(this.blackoutBackground.render(),this.attackPanels.render(),this.selectedReplacementDescriptionPanel.render(),this.newMoveDescriptionPanel.render(),this.renderDescription(-6,-7*c.Z.SIZE),this.yesButton.render(),this.noButton.render()):this.currentState==y.STATE.MoveAdded&&(this.background.render(),this.renderDescription(),this.renderPokemon()),h.Do.restore()}enter(){h.j3.states[h.j3.states.length-2].removeEventListeners()}exit(){h.j3.states[h.j3.states.length-2].attachEventListeners(),this.removeEventListeners(),this.pokemon.selectedAttack=this.pokemon.attacks[this.originalSelectionIndex]}attachEventListeners(){this.mousemoveListener=e=>this.manageMouseMove(e),this.mousedownListener=e=>this.manageMouseDown(e),h.JQ.addEventListener("mousemove",this.mousemoveListener),h.JQ.addEventListener("mousedown",this.mousedownListener)}removeEventListeners(){h.JQ.removeEventListener("mousemove",this.mousemoveListener),h.JQ.removeEventListener("mousedown",this.mousedownListener)}manageMouseMove(e){const t=e.offsetX/h.Bg,s=e.offsetY/h.Bg;(0,o.Z)(t,s,this.yesButton)?this.yesButton.onHover():this.yesButton.onNoHover(),(0,o.Z)(t,s,this.noButton)?this.noButton.onHover():this.noButton.onNoHover()}manageMouseDown(e){const t=e.offsetX/h.Bg,s=e.offsetY/h.Bg;if((0,o.Z)(t,s,this.yesButton)&&this.yesButton.onClick(),(0,o.Z)(t,s,this.noButton)&&this.noButton.onClick(),this.currentState==y.STATE.MoveAdded&&(h.j3.pop(),this.callback()),this.currentState==y.STATE.ReplacementPick&&this.attackPanels.attackButtons.filter((e=>(0,o.Z)(t,s,e)))[0]){const e=e=>this.selectedReplacement=e;this.attackPanels.attackButtons.forEach((i=>{i.panelColour=a.Z.Black,(0,o.Z)(t,s,i)&&(e(i.attack),i.onClick(),this.selectedReplacement=i.attack)}))}}renderDescription(e=0,t=0){h.Do.fillStyle="White",h.Do.font="12px Joystix",this.description.split("\n").forEach(((s,i)=>{const o=h.Do.measureText(s).width;h.Do.fillText(s,this.background.position.x+(this.background.dimensions.x-o)/2+e,this.background.position.y+4*c.Z.SIZE+12*i+t)}))}renderPokemon(){this.pokemon.render(new r.Z(h.vj/2-.5*c.Z.SIZE,h.lf/2-2.5*c.Z.SIZE))}}i()}catch(e){i(e)}}))},8865:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>a});var o=s(5188),n=s(3696),r=e([o,n]);[o,n]=r.then?(await r)():r;class a extends o.Z{constructor(e){super(),this.isOver=!1,this.callbacks=e}enter(){this.callbacks[0]&&"function"==typeof this.callbacks[0]?this.nextCallback():console.log("callbacks[0] must be a function")}nextCallback(){0!=this.callbacks.length?this.callbacks.splice(0,1)[0]((()=>this.nextCallback())):this.isOver=!0}update(e){this.isOver&&(n.j3.pop(),n.j3.top().attachEventListeners())}render(){}}i()}catch(e){i(e)}}))},5391:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(5188),n=s(5127),r=s(3696),a=s(6472),h=s(7609),l=e([o,r,a,h]);[o,r,a,h]=l.then?(await l)():l;class c extends o.Z{constructor(e,t=a.Z.BOTTOM_DIALOGUE,s=(()=>{})){super(),this.textbox=new h.Z(t.x,t.y,t.width,t.height,e,{isAdvanceable:!0}),this.callback=s}enter(){r.jX.play(n.Z.MenuOpen)}update(){this.textbox.update(),this.textbox.isClosed&&(r.j3.pop(),this.callback())}render(){this.textbox.render()}}i()}catch(e){i(e)}}))},5958:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(3696),r=s(8347),a=s(6472),h=e([n,a]);[n,a]=h.then?(await h)():h;class l extends a.Z{static ALPHA_TOGGLE_DELAY=.4;constructor(e,t,s,i,n,h){super(e,t,s,i,{borderWidth:2,borderColour:o.Z.Crimson,panelColour:o.Z.Black}),this.cursorIndicatorColour={r:255,g:255,b:255,a:1},this.cursorIndicator=new a.Z(e+.1,t+.15,.1,this.dimensions.y/r.Z.SIZE-.3,{borderWidth:0,borderColour:o.Z.Transparent,panelColour:o.Z.White}),this.timeSinceAlphaToggle=0,this.playerInput="",this.fontSize=a.Z.FONT_SIZE,this.fontColour=o.Z.White,this.fontFamily=a.Z.FONT_FAMILY,this.maxNameLength=n,this.tooLongNameCallback=h}update(e){Object.keys(n.XP).forEach((e=>{if(!n.XP[e])return;const t=e.charCodeAt(0);if("Backspace"==e){if(!this.playerInput)return;let t=this.playerInput.length-1;if(n.XP.Control){const e=this.playerInput.split(" ");t=Math.max(0,t-e[e.length-1].length)}this.playerInput=this.playerInput.slice(0,t),n.XP[e]=!1}else this.playerInput.length==this.maxNameLength?this.tooLongNameCallback():1==e.length&&t>=65&&t<=122?(this.playerInput+=e,n.XP[e]=!1):" "==e&&(this.playerInput+=" ",n.XP[e]=!1)})),this.timeSinceAlphaToggle+=e,this.timeSinceAlphaToggle>=l.ALPHA_TOGGLE_DELAY&&this.toggleCursorIndicator()}render(){super.render(),n.Do.save(),this.renderText(),this.renderCursorIndicator(),n.Do.restore()}toggleCursorIndicator(){this.timeSinceAlphaToggle=0,this.cursorIndicatorColour.a=this.cursorIndicatorColour.a?0:1,this.cursorIndicator.panelColour=`rgba(${this.cursorIndicatorColour.r}, ${this.cursorIndicatorColour.g}, ${this.cursorIndicatorColour.b}, ${this.cursorIndicatorColour.a})`}renderText(){n.Do.textBaseline="top",n.Do.font=`${this.fontSize}px ${this.fontFamily}`,n.Do.fillStyle=this.fontColour,n.Do.fillText(this.playerInput.slice(Math.max(this.playerInput.length-15,0)),this.position.x+.25*r.Z.SIZE,this.position.y+.45*r.Z.SIZE)}renderCursorIndicator(){const e=n.Do.measureText(this.playerInput).width;this.cursorIndicator.position.x=Math.min(this.position.x+.25*r.Z.SIZE+e,this.position.x+this.dimensions.x-.15*r.Z.SIZE),this.cursorIndicator.render()}}i()}catch(e){i(e)}}))},8731:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>k});var o=s(6854),n=s(8026),r=s(3696),a=s(8347),h=s(9067),l=s(4949),c=s(6472),u=s(5188),p=s(5958),d=s(8887),m=s(1172),Z=s(8514),y=e([r,h,l,c,u,p,d,Z]);[r,h,l,c,u,p,d,Z]=y.then?(await y)():y;class k extends u.Z{static DIMENSIONS={width:12,height:5};static MAX_NAME_LENGTH=20;constructor(){super(),this.background=new h.Z("rgba(0, 0, 0, 0.85)"),this.panel=new c.Z(r.vj/2/a.Z.SIZE-k.DIMENSIONS.width/2,r.lf/2/a.Z.SIZE-k.DIMENSIONS.height/2,k.DIMENSIONS.width,k.DIMENSIONS.height,{panelColour:n.Z.Black,borderColour:n.Z.Crimson}),this.inputPanel=new p.Z(this.panel.position.x/a.Z.SIZE+k.DIMENSIONS.width/6,this.panel.position.y/a.Z.SIZE+.6*k.DIMENSIONS.height,2*k.DIMENSIONS.width/3,1,k.MAX_NAME_LENGTH,(()=>this.notifyBadName(["Name can not exceed",`${k.MAX_NAME_LENGTH} characters.`]))),this.button=new l.Z(this.panel.position.x/a.Z.SIZE+k.DIMENSIONS.width/4,this.panel.position.y/a.Z.SIZE+k.DIMENSIONS.height+.25,k.DIMENSIONS.width/2,2,"Confirm"),this.questionText=["What is your name?"],this.fontSize=c.Z.FONT_SIZE,this.fontColour=n.Z.White,this.fontFamily=c.Z.FONT_FAMILY,this.mouseMoveListener=e=>this.handleMouseMove(e),this.mouseDownListener=e=>this.handleMouseDown(e),this.attachEventListeners()}enter(){r.ry&&this.promptUsername()}promptUsername(){this.mobileUsername=prompt("This is a workaround to open mobile keyboards. Enter your username here."),this.inputPanel.playerInput=this.mobileUsername}update(e){this.inputPanel.update(e),r.XP.Enter&&(this.enterName(),r.XP.Enter=!1)}render(){super.render(),this.background.render(),this.panel.render(),this.inputPanel.render(),this.renderText(),this.button.render()}renderText(){if(r.Do.textBaseline="top",r.Do.font=`${this.fontSize}px ${this.fontFamily}`,r.Do.fillStyle=this.fontColour,0==this.questionText.length){const e=r.Do.measureText(this.questionText).width,t=(this.panel.dimensions.x-e)/2;r.Do.fillText(this.questionText,this.panel.position.x+t,this.panel.position.y+1*a.Z.SIZE)}else this.questionText.forEach(((e,t)=>{const s=r.Do.measureText(e).width,i=(this.panel.dimensions.x-s)/2;r.Do.fillText(e,this.panel.position.x+i,this.panel.position.y+1*a.Z.SIZE+this.fontSize*t)}))}attachEventListeners(){super.attachEventListeners(),r.JQ.addEventListener("mousemove",this.mouseMoveListener),r.JQ.addEventListener("mousedown",this.mouseDownListener)}removeEventListeners(){super.removeEventListeners(),r.JQ.removeEventListener("mousemove",this.mouseMoveListener),r.JQ.removeEventListener("mousedown",this.mouseDownListener)}handleMouseMove(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;(0,o.Z)(t,s,this.button)?this.button.onHover():this.button.onNoHover()}handleMouseDown(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;(0,o.Z)(t,s,this.button)&&this.enterName()}notifyBadName(e=["You may not enter","an empty name."]){if((0,m.c)(e,this.questionText))return;const t=this.questionText,s=this.fontColour;this.questionText=e,this.fontColour=n.Z.Crimson,setTimeout((()=>{this.questionText=t,this.fontColour=s}),1e3)}async enterName(){if(this.inputPanel.playerInput)(0,r.b6)(this.inputPanel.playerInput),r.j3.pop(),r.j3.push(new d.Z);else{if(r.ry&&!this.mobileUsername)return void this.promptUsername();this.notifyBadName()}}}i()}catch(e){i(e)}}))},5881:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>k});var o=s(5188),n=s(3696),r=s(9067),a=s(8514),h=s(1989),l=s(8026),c=s(9023),u=s(5347),p=s(5620),d=s(4839),m=(s(878),s(2365)),Z=s(5127),y=e([o,n,r,a,c,u,p,d,m]);[o,n,r,a,c,u,p,d,m]=y.then?(await y)():y;class k extends o.Z{static NUM_LEVELS=5;static colours=[l.Z.White,l.Z.DodgerBlue,l.Z.Gold,l.Z.Chartreuse];constructor(e=u.Z.getInstance()){super(),this.background=new r.Z,this.pokemonInventory=e}async enter(){this.mousemoveCallback=e=>this.handleMouseMove(e),this.mouseDownListener=e=>this.handleMouseDown(e),this.attachEventListeners(),this.playStates=await this.initializeLevels(k.NUM_LEVELS),this.uiElements=await this.initializeUI(this.playStates.map((e=>e.level)))}async reenter(){super.reenter(),this.uiElements=await this.initializeUI(this.playStates.map((e=>e.level)))}exit(){super.exit(),n.j3.states[n.j3.states.length-2].attachEventListeners(),this.removeEventListeners()}removeEventListeners(){n.JQ.removeEventListener("mousemove",this.mousemoveCallback),n.JQ.removeEventListener("mousedown",this.mouseDownListener)}attachEventListeners(){super.attachEventListeners(),n.JQ.addEventListener("mouseup",(e=>this.handleMouseUp(e)),{once:!0}),n.JQ.addEventListener("mousemove",this.mousemoveCallback),n.JQ.addEventListener("mousedown",this.mouseDownListener),(0,n.wC)(Z.Z.GeneralBackground)}async update(e){}render(){this.background.render(),this.printText(),this.uiElements&&Object.values(this.uiElements).forEach((e=>e.render()))}async initializeLevels(e){let t=[];for(let s=0;s<e;s++)t.push(await a.Z.createPlaystate(s+1));return t}async initializeUI(e){return{LevelsPanel:new c.Z(e),Button:new m.Z("Back")}}printText(){n.Do.save(),n.Do.fillStyle=l.Z.Crimson,n.Do.font=`48px ${h.Z.Pokemon}`,n.Do.fillText("Select The Level",20,75,n.JQ.width-40),n.Do.restore()}handleMouseMove(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;this.didMouseHitObject(t,s,this.uiElements.Button)?this.uiElements.Button.onHover():this.uiElements.Button.onNoHover(),this.uiElements.LevelsPanel.levelBoxes;const i=this.uiElements.LevelsPanel.levelBoxes.filter((e=>this.uiElements.LevelsPanel.didMouseHitObject(t,s,e)));1!==i.length||i[0].locked?0===i.length&&this.uiElements.LevelsPanel.selector.onNoHover():this.uiElements.LevelsPanel.selector.onHover(i[0].position.x,i[0].position.y)}handleMouseUp(e){}async handleMouseDown(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg,i=this.uiElements.Button;let o=null;if(this.didMouseHitObject(t,s,i)&&(o=this.uiElements.Button),o)return o.onPress(),void n.j3.pop();const r=this.uiElements.LevelsPanel.levelBoxes.filter(((e,i)=>{if(this.uiElements.LevelsPanel.didMouseHitObject(t,s,e))return e.index=i,!0}));1!==r.length||r[0].locked||(n.jX.play(Z.Z.LevelSelect),this.removeEventListeners(),n.j3.push(new d.Z(this.pokemonInventory,r[0].index+1)))}didMouseHitObject(e,t,s){return e>=s.position.x&&e<=s.position.x+s.dimensions.x&&t>=s.position.y&&t<=s.position.y+s.dimensions.y}}i()}catch(e){i(e)}}))},7576:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>m});var o=s(360),n=s(8026),r=s(1989),a=s(3696),h=s(5620),l=s(8347),c=s(9067),u=s(6472),p=s(5188),d=e([a,h,c,u,p]);[a,h,c,u,p]=d.then?(await d)():d;class m extends p.Z{static LEFTMOST_POKEMON_POSITION={x:3*l.Z.SIZE,y:10*l.Z.SIZE};constructor(e="Loading...",t=!0,s=(()=>{})){super(),this.callback=s,this.jumpingPokemon=[h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10),h.Z.createPokemon((0,o.D9)(1,151),10)],this.jumpingPokemon.forEach(((e,t)=>{e.position.x=m.LEFTMOST_POKEMON_POSITION.x+l.Z.SIZE*t*2,e.position.y=m.LEFTMOST_POKEMON_POSITION.y})),this.jumpingPokemon=this.jumpingPokemon.map((e=>new Z(e))),this.nextPokemonJump(0),this.text=e,this.fontFamily=r.Z.Pokemon,this.fontSize=36,this.fontWeight="bold",this.background=new c.Z("lightblue"),this.ground=new u.Z(0,(m.LEFTMOST_POKEMON_POSITION.y+l.Z.SIZE)/l.Z.SIZE,a.vj/l.Z.SIZE,10,{panelColour:"green",borderWidth:0}),this.attachLastStateEventListenersOnExit=t}nextPokemonJump(e){this.jumpingPokemon[e].jump(),e!=this.jumpingPokemon.length-1&&setTimeout((()=>{this.nextPokemonJump(e+1)}),590/7)}render(){this.background.render(),this.ground.render(),this.jumpingPokemon.forEach((e=>e.render())),this.renderText()}update(e){this.jumpingPokemon.forEach((t=>t.update(e)))}renderText(){a.Do.save(),a.Do.fillStyle=n.Z.Crimson,a.Do.font=`${this.fontSize}px ${this.fontFamily}`;const e=a.Do.measureText(this.text).width;a.Do.fillText(this.text,a.vj/2-e/2,m.LEFTMOST_POKEMON_POSITION.y-6*l.Z.SIZE),a.Do.restore()}exit(){super.exit(),this.attachLastStateEventListenersOnExit&&a.j3.states[a.j3.states.length-2].attachEventListeners()}}class Z{static GRAVITY=5;static JUMP_VELOCITY=-2;constructor(e){this.bottomY=e.position.y,this.pokemon=e,this.position=this.pokemon.position,this.yVelocity=0,this.hasJumped=!1}update(e){this.hasJumped&&(this.yVelocity+=Z.GRAVITY*e,this.position.y+=this.yVelocity,this.position.y>=this.bottomY&&this.jump())}render(){this.pokemon.render()}jump(){this.hasJumped=!0,this.yVelocity=Z.JUMP_VELOCITY}}i()}catch(e){i(e)}}))},4839:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>g});var o=s(6854),n=s(8026),r=s(3696),a=s(5347),h=s(8347),l=s(9067),c=s(4949),u=s(1718),p=s(9821),d=s(3476),m=s(5188),Z=s(7576),y=s(8514),k=s(1342),E=e([r,a,l,c,u,p,d,m,Z,y,k]);[r,a,l,c,u,p,d,m,Z,y,k]=E.then?(await E)():E;class g extends m.Z{static READY_BUTTON={x:17,y:15.25,width:3,height:1.5,text:"Ready"};static BACK_BUTTON={x:1,y:15.25,width:3,height:1.5,text:"Back"};static FOCUS_MENU_CLICK_TIME=.1;constructor(e,t){super(),this.background=new l.Z,this.pokemonInventory=e,this.pokemonParty=e.party,this.level=t,this.currentTeamPanel=new p.Z(this.pokemonParty,this.background.colour,n.Z.Gold),this.boxPokemon=e.box,this.boxPanel=new u.Z(e.box),this.readyButton=new c.Z(g.READY_BUTTON.x,g.READY_BUTTON.y,g.READY_BUTTON.width,g.READY_BUTTON.height,g.READY_BUTTON.text),this.backButton=new c.Z(g.BACK_BUTTON.x,g.BACK_BUTTON.y,g.BACK_BUTTON.width,g.BACK_BUTTON.height,g.BACK_BUTTON.text),this.heldPokemon=null,this.textColour=n.Z.White,this.fontSize=26}enter(){this.timeSinceMouseDown=100,this.mousemoveCallback=e=>this.handleMouseMove(e),this.mouseDownListener=e=>this.handleMouseDown(e),this.mouseUpCallback=e=>this.handleMouseUp(e),this.attachEventListeners()}reenter(){super.reenter(),this.pokemonInventory=a.Z.getInstance(),this.pokemonParty=this.pokemonInventory.party,this.boxPokemon=this.pokemonInventory.box,this.boxPanel=new u.Z(this.pokemonInventory.box),this.currentTeamPanel=new p.Z(this.pokemonParty,this.background.colour,n.Z.Gold)}exit(){super.exit(),this.removeEventListeners()}attachEventListeners(){super.attachEventListeners(),r.JQ.addEventListener("mouseup",this.mouseUpCallback),r.JQ.addEventListener("mousemove",this.mousemoveCallback),r.JQ.addEventListener("mousedown",this.mouseDownListener)}removeEventListeners(){r.JQ.removeEventListener("mousemove",this.mousemoveCallback),r.JQ.removeEventListener("mousedown",this.mouseDownListener),r.JQ.removeEventListener("mouseup",this.mouseUpCallback)}async update(e){this.timeSinceMouseDown+=e,this.currentTeamPanel.update(e),this.boxPanel.update(e),this.heldPokemon&&this.heldPokemon.update(e)}render(){this.background.render(),this.boxPanel.render(),this.currentTeamPanel.render(),this.heldPokemon&&this.heldPokemon.render(),this.renderText(),this.readyButton.render(),this.backButton.render()}async handleMouseDown(e){this.timeSinceMouseDown=0;const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;if((0,o.Z)(t,s,this.readyButton)&&this.pokemonInventory.party.length>0){this.readyButton.onPress(),this.removeEventListeners(),r.j3.pop(),r.j3.push(new Z.Z("Loading Level...",!1));const e=await y.Z.createPlaystate(this.level,this.pokemonInventory);return r.j3.pop(),void r.j3.push(e)}if((0,o.Z)(t,s,this.backButton))return console.log("Go Back"),this.removeEventListeners(),this.backButton.onPress(),r.j3.states[r.j3.states.length-2].attachEventListeners(),void r.j3.pop();const i=this.boxPanel.pokemonBoxes.filter((e=>this.didMouseHitObject(t,s,e)));if(1==i.length)return this.heldPokemon=i[0].pokemon,this.oldHeldPokemonBox=i[0],void this.heldPokemon.pickup();const n=this.currentTeamPanel.pokemonBoxes.filter((e=>(0,o.Z)(t,s,e)));1==n.length&&(this.heldPokemon=n[0].pokemon,this.oldHeldPokemonBox=n[0],this.heldPokemon.pickup())}handleMouseUp(e){if(!this.heldPokemon)return;this.timeSinceMouseDown<=g.FOCUS_MENU_CLICK_TIME&&(r.j3.push(new k.Z(this.heldPokemon,null,this.pokemonInventory,!0)),this.removeEventListeners()),this.heldPokemon.renderGreyscale=!1;const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg,i=this.boxPanel.pokemonBoxes.filter((e=>this.didMouseHitObject(t,s,e)));if(1===i.length){let e=null;i[0].pokemon&&(e=i[0].pokemon);const t=i[0];this.oldHeldPokemonBox.pokemon=e||null,t.pokemon=this.heldPokemon,this.heldPokemon.place(),this.refactorParty(),this.pokemonInventory.box=this.boxPanel.pokemonBoxes.map((e=>{if(e.pokemon)return e.pokemon})),this.pokemonInventory.box=this.pokemonInventory.box.filter((e=>void 0!==e)),this.pokemonInventory.party=this.pokemonInventory.party.filter((e=>void 0!==e&&e!==this.heldPokemon)),this.heldPokemon=null}const o=this.currentTeamPanel.pokemonBoxes.filter((e=>this.didMouseHitObject(t,s,e)));if(1===o.length){let e=null;o[0].pokemon&&(e=o[0].pokemon);const t=o[0];this.oldHeldPokemonBox.pokemon=e||null,t.pokemon=this.heldPokemon,this.heldPokemon.place(),this.refactorParty(),this.pokemonInventory.party=this.currentTeamPanel.pokemonBoxes.map((e=>{if(e.pokemon)return e.pokemon})),this.pokemonInventory.party=this.pokemonInventory.party.filter((e=>void 0!==e)),this.pokemonInventory.box=this.boxPanel.pokemonBoxes.filter((e=>null!=e.pokemon&&e.pokemon!==this.heldPokemon)).map((e=>e.pokemon)),this.heldPokemon=null}0===i.length&&0===o.length&&(this.oldHeldPokemonBox.pokemon=this.heldPokemon,this.heldPokemon.place(),this.heldPokemon=null)}refactorParty(){let e=[];this.currentTeamPanel.pokemonBoxes.forEach(((t,s)=>{null!==t.pokemon&&e.push(t.pokemon)})),this.currentTeamPanel.pokemonBoxes.forEach(((t,s)=>{e[s]?this.currentTeamPanel.pokemonBoxes[s].pokemon=e[s]:this.currentTeamPanel.pokemonBoxes[s].pokemon=null})),this.pokemonInventory.party=e}handleMouseMove(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;(0,o.Z)(t,s,this.readyButton)||0==this.pokemonInventory.party.length?this.readyButton.onHover():this.readyButton.onNoHover(),(0,o.Z)(t,s,this.backButton)?this.backButton.onHover():this.backButton.onNoHover(),this.heldPokemon&&(0==this.boxPanel.pokemonBoxes.filter((e=>this.didMouseHitObject(t,s,e))).length&&0==this.currentTeamPanel.pokemonBoxes.filter((e=>this.didMouseHitObject(t,s,e))).length?this.heldPokemon.renderGreyscale=!0:this.heldPokemon.renderGreyscale=!1)}didMouseHitObject(e,t,s){return e>=s.position.x&&e<=s.position.x+s.dimensions.x&&t>=s.position.y&&t<=s.position.y+s.dimensions.y}renderText(){r.Do.save(),r.Do.fillStyle=this.textColour,r.Do.font=`${this.fontSize}px`,r.Do.fillText("Your Current Party:",10,10),r.Do.fillText("How it works: ...",this.boxPanel.position.x,this.boxPanel.position.y-h.Z.SIZE),r.Do.restore()}}i()}catch(e){i(e)}}))},7261:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(5188),n=s(6854),r=s(3696),a=s(3842),h=s(5347),l=e([o,r,a,h]);[o,r,a,h]=l.then?(await l)():l;class c extends o.Z{constructor(e,t){super(),this.selectables=e,this.selectables.forEach((e=>{e.wasSelected=!1})),this.callback=t}enter(){this.mousemoveCallback=e=>this.handleMouseMove(e),this.mouseDownListener=e=>this.handleMouseDown(e),this.attachEventListeners()}reenter(){super.reenter(),this.attachEventListeners()}exit(){super.exit(),this.removeEventListeners()}update(e){0!=h.Z.getInstance().party.length&&(r.j3.pop(),this.callback())}removeEventListeners(){r.JQ.removeEventListener("mouseup",this.mouseUpCallback),r.JQ.removeEventListener("mousemove",this.mousemoveCallback),r.JQ.removeEventListener("mousedown",this.mouseDownListener)}attachEventListeners(){super.attachEventListeners(),r.JQ.addEventListener("mouseup",this.mouseUpCallback),r.JQ.addEventListener("mousemove",this.mousemoveCallback),r.JQ.addEventListener("mousedown",this.mouseDownListener)}mouseUpCallback(){}handleMouseDown(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;this.selectables.forEach(((e,i)=>{(0,n.Z)(t,s,e)&&(this.removeEventListeners(),r.j3.push(new a.Z(e,i)),r.jX.play("Pokemon"+(3*i+1)))}))}handleMouseMove(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;this.selectables.forEach((e=>{(0,n.Z)(t,s,e)?(e.isHovering=!0,e.onHover()):e.isHovering=!1}))}render(){this.selectables.forEach((e=>e.render()))}}i()}catch(e){i(e)}}))},8887:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>S});var o=s(8038),n=s(8642),r=s(3696),a=s(3846),h=s(9067),l=s(6472),c=s(5188),u=s(8865),p=s(5391),d=s(8514),m=s(6403),Z=s(1526),y=s(5347),k=s(5620),E=s(5881),g=s(5127),v=s(7261),w=s(878),x=e([r,a,h,l,c,u,p,d,m,Z,y,k,E,v]);[r,a,h,l,c,u,p,d,m,Z,y,k,E,v]=x.then?(await x)():x;class S extends c.Z{constructor(){super(),this.background=new h.Z}async enter(){const e=new a.Z(new o.Z(r.JQ.width,0),new o.Z(a.Z.OAK_SIZE.x,a.Z.OAK_SIZE.y),n.Z.CutSceneOak);this.oak=e;const t=new a.Z(new o.Z(r.JQ.width,0),new o.Z(a.Z.POKEMON_SIZE.x,a.Z.POKEMON_SIZE.y),n.Z.Nidoran);this.nidoran=t;const s=new a.Z(new o.Z(r.vj,10),new o.Z(a.Z.POKEMON_SIZE.x/2,a.Z.POKEMON_SIZE.y/2),n.Z.Squirtle),i=new a.Z(new o.Z(-200,100),new o.Z(a.Z.POKEMON_SIZE.x/2,a.Z.POKEMON_SIZE.y/2),n.Z.Bulbasaur),h=new a.Z(new o.Z(r.vj,0),new o.Z(a.Z.POKEMON_SIZE.x/2,a.Z.POKEMON_SIZE.y/2),n.Z.Charmander),c=[i,h,s],k=await d.Z.createPlaystate(1,y.Z.getInstance(),!0);r.j3.push(new u.Z([e=>r.j3.push(new p.Z(`Hey there ${(0,r.Ms)()}!`,l.Z.BOTTOM_DIALOGUE,e)),t=>r.j3.push(new Z.Z([e],[e.position],[["x"]],[[0]],[1],"Welcome to the world of Pokémon. My Name is Professor Oak.",t)),t=>r.j3.push(new Z.Z([e],[e.dimensions],[["x","y"]],[[a.Z.OAK_SIZE.x/2,a.Z.OAK_SIZE.y/2]],[1],"This world is inhabited far and wide by creatures called pokémon.",t)),s=>r.j3.push(new Z.Z([t,e],[t.position,e.position],[["x"],["y"]],[[125],[e.position.x]],[1,1],"Here is one example, this little guy is called Nidoran",s)),s=>r.j3.push(new Z.Z([t,t,e],[t.position,t.dimensions,e.position],[["x","y"],["x","y"],["x"]],[[e.position.x+e.dimensions.x+5,100],[100,100],[e.position.x]],[1,1,1],"Let's Get Started!",s)),e=>{m.Z.fade((()=>{r.j3.push(k),(0,r.wC)(g.Z.GeneralBackground),k.level.pause(),k.removeEventListeners(),e()}))},e=>r.j3.push(new p.Z("To Start Off Your Journey You'll have the Option Between 3 Pokemon",l.Z.BOTTOM_DIALOGUE,e)),e=>{setTimeout((()=>{r.jX.play(`Pokemon${w.Z.Squirtle}`)}),1e3),r.j3.push(new Z.Z([s],[s.position],[["x","y"]],[[100,50]],[1],"First there is the Mighty Squirtle!",e))},e=>{setTimeout((()=>{r.jX.play(`Pokemon${w.Z.Bulbasaur}`)}),1e3),r.j3.push(new Z.Z([i,s],[i.position,s.position],[["x","y"],["x"]],[[100,150],[s.position.x]],[1,1],"Second, the Fierce Bulbasaur!",e))},e=>{setTimeout((()=>{r.jX.play(`Pokemon${w.Z.Charmander}`)}),1e3),r.j3.push(new Z.Z([h,s,i],[h.position,s.position,i.position],[["x","y"],["x"],["x"]],[[200,100],[s.position.x],[i.position.x]],[1,1,1],"Last but not least, the Scorching Hot Charmander!",e))},e=>r.j3.push(new Z.Z([h,s,i],[h.position,s.position,i.position],[["x","y"],["x"],["x"]],[[200,100],[s.position.x],[i.position.x]],[1,1,1],"Select Your Pokémon!",e)),e=>{r.j3.push(new v.Z(c,e))},e=>{r.j3.pop(),r.j3.pop(),r.j3.pop();const t=new E.Z;r.j3.push(t),t.removeEventListeners(),r.j3.push(k),e()}]))}exit(){super.exit()}update(e){}render(){this.background.render(),this.oak.render(),this.nidoran.render()}}i()}catch(e){i(e)}}))},294:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>f});var o=s(6854),n=s(5188),r=s(8026),a=s(1989),h=s(3696),l=s(5687),c=s(8347),u=s(9067),p=s(4949),d=s(6137),m=s(5881),Z=s(5620),y=s(360),k=s(8038),E=s(3928),g=s(6472),v=(s(878),s(5347)),w=s(5127),x=s(8731),S=e([n,h,l,u,p,d,m,Z,g,v,x]);[n,h,l,u,p,d,m,Z,g,v,x]=S.then?(await S)():S;class f extends n.Z{static START_BUTTON={x:h.$h/2-2.5,y:h.Xd/2+2.5,width:5,height:2.5,text:"Start"};static IMAGE_PANEL={x:h.$h/2-5,y:h.Xd/8,width:10,height:14};static LEFT_BORDER={x:0,y:0,width:5.5,height:17};static RIGHT_BORDER={x:f.IMAGE_PANEL.x+f.IMAGE_PANEL.width,y:0,width:5.5,height:17};static POKEMON_WALK_SPEED=50;constructor(){super(),this.background=new u.Z,this.startButton=new p.Z(f.START_BUTTON.x,f.START_BUTTON.y,f.START_BUTTON.width,f.START_BUTTON.height,f.START_BUTTON.text),this.imagePanel=new d.Z(f.IMAGE_PANEL.x,f.IMAGE_PANEL.y,f.IMAGE_PANEL.width,f.IMAGE_PANEL.height,null,{panelColour:r.Z.Black,borderColour:r.Z.Crimson,borderWidth:5}),this.imagePanelFrame=new d.Z(f.IMAGE_PANEL.x,f.IMAGE_PANEL.y,f.IMAGE_PANEL.width,f.IMAGE_PANEL.height,null,{panelColour:r.Z.Transparent,borderColour:r.Z.Crimson,borderWidth:0,fill:!1,stroke:!0,strokeWidth:1e3}),this.leftBorder=new g.Z(f.LEFT_BORDER.x,f.LEFT_BORDER.y,f.LEFT_BORDER.width,f.LEFT_BORDER.height,{panelColour:this.background.colour,borderWidth:0}),this.rightBorder=new g.Z(f.RIGHT_BORDER.x,f.RIGHT_BORDER.y,f.RIGHT_BORDER.width,f.RIGHT_BORDER.height,{panelColour:this.background.colour,borderWidth:0}),this.fontFamily=a.Z.Pokemon,this.fontSize=36,this.fontWeight="bold",this.pokemonLines=[],this.addPokemonLine()}enter(){(0,l.m)(),this.mousemoveCallback=e=>this.handleMouseMove(e),this.mouseUpCallback=e=>this.handleMouseUp(e),this.mouseDownListener=e=>this.handleMouseDown(e),this.attachEventListeners()}exit(){super.exit(),this.removeEventListeners()}update(e){this.pokemonLines.forEach((t=>{t.forEach((t=>{t.update(e),t.position.x+=f.POKEMON_WALK_SPEED*e}))})),this.pokemonLines.filter((e=>e[0].position.x<f.RIGHT_BORDER.x)),this.pokemonLines[this.pokemonLines.length-1][0].position.x>=f.IMAGE_PANEL.x*c.Z.SIZE+c.Z.SIZE&&this.addPokemonLine()}addPokemonLine(){const e=[];for(let t=0;t<f.IMAGE_PANEL.height/1.5-1;t++){const s=Z.Z.createPokemon((0,y.D9)(1,151),100);s.direction=E.Z.RIGHT,s.position=new k.Z((f.IMAGE_PANEL.x-1)*c.Z.SIZE,(f.IMAGE_PANEL.y+t)*c.Z.SIZE*1.5-2),e.push(s)}this.pokemonLines.push(e)}removeEventListeners(){h.JQ.removeEventListener("mouseup",this.mouseUpCallback),h.JQ.removeEventListener("mousemove",this.mousemoveCallback),h.JQ.removeEventListener("mousedown",this.mouseDownListener)}attachEventListeners(){super.attachEventListeners(),h.JQ.addEventListener("mouseup",this.mouseUpCallback),h.JQ.addEventListener("mousemove",this.mousemoveCallback),h.JQ.addEventListener("mousedown",this.mouseDownListener),(0,h.wC)(w.Z.Title)}render(){this.background.render(),this.imagePanel.render(),this.pokemonLines.forEach((e=>{e.forEach((e=>{e.render()}))})),this.leftBorder.render(),this.rightBorder.render(),this.imagePanelFrame.render(),this.startButton.render(),this.renderText()}renderText(){h.Do.save(),h.Do.fillStyle=r.Z.Crimson,h.Do.font=`${this.fontWeight} ${this.fontSize}px ${this.fontFamily}`;const e="POKÉMON",t=h.Do.measureText(e).width;h.Do.fillText(e,h.vj/2-t/2,42);const s="Tower Defense",i=h.Do.measureText(s).width;h.Do.fillText(s,h.vj/2-i/2,85),h.Do.restore()}handleMouseDown(e){const t=e.offsetX/h.Bg,s=e.offsetY/h.Bg;if((0,o.Z)(t,s,this.startButton))return this.startButton.onPress(),(0,h.Ms)()?h.j3.push(new m.Z):h.j3.push(new x.Z),void this.removeEventListeners()}handleMouseUp(e){e.offsetX,h.Bg,e.offsetY,h.Bg}handleMouseMove(e){const t=e.offsetX/h.Bg,s=e.offsetY/h.Bg;(0,o.Z)(t,s,this.startButton)?this.startButton.onHover():this.startButton.onNoHover()}}i()}catch(e){i(e)}}))},6403:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>a});var o=s(5188),n=s(3696),r=e([o,n]);[o,n]=r.then?(await r)():r;class a extends o.Z{static TYPE={In:0,Out:1};constructor(e,t=(()=>{}),s={r:255,g:255,b:255}){super(),this.colour=s,e===a.TYPE.Out?(this.alpha=1,this.endAlpha=0):(this.alpha=0,this.endAlpha=1),n.HT.tween(this,["alpha"],[this.endAlpha],1.5,(()=>{n.j3.pop(),t()}))}enter(){super.enter()}render(){n.Do.save(),n.Do.fillStyle=`rgba(${this.colour.r}, ${this.colour.g}, ${this.colour.b}, ${this.alpha})`,n.Do.fillRect(0,0,n.vj,n.lf),n.Do.restore()}static fade(e=(()=>n.j3.pop())){n.j3.push(new a(a.TYPE.In,(()=>{e(),n.j3.push(new a(a.TYPE.Out))})))}}i()}catch(e){i(e)}}))},1526:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(5188),n=s(3696),r=s(6472),a=s(7609),h=e([o,n,r,a]);[o,n,r,a]=h.then?(await h)():h;class l extends o.Z{constructor(e,t,s,i,o,n,r=(()=>{})){super(),this.objectsToTween=e,this.propertiesOnObjectsToTween=t,this.propertiesToTween=s,this.endValues=i,this.durations=o,this.callback=r,this.numberOfTweens=e.length,this.tweensDone=0,this.text=n,this.callback=r}enter(){for(let e=0;e<this.objectsToTween.length;e++)n.HT.tween(this.propertiesOnObjectsToTween[e],this.propertiesToTween[e],this.endValues[e],this.durations[e],(()=>this.tweensDone+=1))}update(){this.numberOfTweens===this.tweensDone&&(this.textbox=new a.Z(r.Z.BOTTOM_DIALOGUE.x,r.Z.BOTTOM_DIALOGUE.y,r.Z.BOTTOM_DIALOGUE.width,r.Z.BOTTOM_DIALOGUE.height,this.text,{isAdvanceable:!0}),this.tweensDone++),this.textbox&&(this.textbox.update(),this.textbox.isClosed&&(n.j3.pop(),this.callback()))}render(){this.objectsToTween.forEach((e=>{e.render()})),this.textbox&&this.textbox.render()}}i()}catch(e){i(e)}}))},9626:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>u});var o=s(5188),n=s(3696),r=s(9509),a=s(5687),h=s(3673),l=s(781),c=e([o,n,r,a,h,l]);[o,n,r,a,h,l]=c.then?(await c)():c;class u extends o.Z{constructor(e){super(),this.level=e}render(){this.level.render()}enter(){n.ry?n.JQ.addEventListener("mousedown",(e=>this.handleMouseUp(e)),{once:!0}):n.JQ.addEventListener("mouseup",(e=>this.handleMouseUp(e)),{once:!0}),this.mousemoveCallback=e=>this.handleMouseMove(e),n.JQ.addEventListener("mousemove",this.mousemoveCallback),this.level.ui.pokeball.grab(),this.grabbedPokeball=this.level.ui.pokeball,this.level.pause()}exit(){super.exit(),this.level.unpause(),n.JQ.removeEventListener("mousemove",this.mousemoveCallback)}update(e){this.level.ui.update(e)}render(){this.level.ui.pokeball.render(),this.grabbedPokeball.targetPokemon&&this.grabbedPokeball.targetPokemon.render()}handleMouseUp(e){this.handleMouseMove(e),this.grabbedPokeball.drop();let t=null;this.grabbedPokeball.currentSprite==h.Z.State.OPEN&&(this.grabbedPokeball.targetPokemon.getCaught(),t=this.level.inventory.catch(this.grabbedPokeball.targetPokemon),this.level.runningPokemon=this.level.runningPokemon.filter((e=>e!=this.grabbedPokeball.targetPokemon)),this.grabbedPokeball.targetPokemon=null),this.grabbedPokeball.currentSprite=h.Z.State.CLOSED,this.level.unpause(),n.j3.pop(),t&&(n.j3.push(new l.Z(t)),(0,a.a)(this.level.inventory))}handleMouseMove(e){if(!this.grabbedPokeball)return;const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg,i=this.level.runningPokemon.filter((e=>this.level.didMouseHitObject(t,s,e)&&(e.lowHealth()||e.shiny)&&!e.isBoss));i.length>0?(this.grabbedPokeball.currentSprite=h.Z.State.OPEN,this.grabbedPokeball.targetPokemon=i[0]):(this.grabbedPokeball.currentSprite=h.Z.State.CLOSED,this.grabbedPokeball.targetPokemon=null)}}i()}catch(e){i(e)}}))},781:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>d});var o=s(5188),n=s(8038),r=s(8026),a=s(3696),h=s(8347),l=s(6472),c=s(7609),u=s(5347),p=e([o,a,l,c,u]);[o,a,l,c,u]=p.then?(await p)():p;class d extends o.Z{constructor(e,t=(()=>{})){super(),this.caughtPokemon=e;const s=this.generateCaughtPokemonText(e),i=l.Z.CAUGHT_POKEMON;this.textbox=new c.Z(-i.width,i.y+i.height-2,i.width,2,s,{fontColour:r.Z.White,isAdvanceable:!0,panelColour:r.Z.Transparent,borderWidth:5,borderColour:r.Z.Transparent},!0),this.panel=new l.Z(-i.width,i.y,i.width,i.height,{panelColour:"rgba(0, 0, 0, 0.5)",borderWidth:5}),this.callback=t,a.HT.tween(this.textbox.position,["x"],[i.x*h.Z.SIZE],.5),a.HT.tween(this.panel.position,["x"],[i.x*h.Z.SIZE],.5)}enter(){u.Z.getInstance().pokeballCount--}update(e){this.textbox.update(e),this.caughtPokemon.position=new n.Z(this.panel.position.x+this.panel.dimensions.x/2-h.Z.SIZE/2,this.panel.position.y+2*h.Z.SIZE),this.caughtPokemon.update(e),this.textbox.isClosed&&!this.transitioningOut&&(this.transitioningOut=!0,a.HT.tween(this.textbox.position,["x"],[a.vj],.5),a.HT.tween(this.panel.position,["x"],[a.vj],.5,(()=>{a.j3.pop()})))}render(){this.panel.render(),this.textbox.render(),this.caughtPokemon.render()}generateCaughtPokemonText(e){return`${e.name} level ${e.pokemonLevel}!`}}i()}catch(e){i(e)}}))},4719:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(5188),n=s(3696),r=s(9509),a=s(5620),h=s(9036),l=e([o,n,r,a,h]);[o,n,r,a,h]=l.then?(await l)():l;class c extends o.Z{constructor(e,t){super(),this.level=e,this.heldPartyMemberHolder=t,this.heldPartyMemberHolder.pokemon.pickup()}render(){this.level.render()}enter(){this.mousemoveCallback=e=>this.handleMouseMove(e),n.ry?n.JQ.addEventListener("mousedown",(e=>this.handleMouseUp(e)),{once:!0}):n.JQ.addEventListener("mouseup",(e=>this.handleMouseUp(e)),{once:!0}),n.JQ.addEventListener("mousemove",this.mousemoveCallback),this.level.pause()}exit(){super.exit(),this.level.unpause(),n.JQ.removeEventListener("mousemove",this.mousemoveCallback)}update(e){this.level.ui.update(e)}handleMouseUp(e){this.heldPartyMemberHolder.pokemon.renderGreyscale=!1;const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg,i=this.level.towerSlots.filter((e=>this.level.didMouseHitObject(t,s,e)));if(1==i.length){const e=i[0],t=this.level.pokemonTowers.filter((t=>t.towerSlot==e))[0];t&&this.level.ui.partyView.partyMemberHolders.filter((e=>e.pokemon==t.pokemon))[0].retrievePokemonFromField(),this.level.pokemonTowers=this.level.pokemonTowers.filter((t=>t.towerSlot!=e)),this.level.pokemonTowers.push(a.Z.createPokemonTower(e,this.level,this.heldPartyMemberHolder.pokemon)),this.heldPartyMemberHolder.pokemonIsTower=!0}this.heldPartyMemberHolder.pokemon.place(),this.heldPartyMemberHolder=null,n.j3.pop()}handleMouseMove(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;0==this.level.towerSlots.filter((e=>this.level.didMouseHitObject(t,s,e))).length?this.heldPartyMemberHolder.pokemon.renderGreyscale=!0:this.heldPartyMemberHolder.pokemon.renderGreyscale=!1}}i()}catch(e){i(e)}}))},9348:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(5188),n=s(8042),r=s(3696),a=s(9509),h=s(5620),l=e([o,n,r,a,h]);[o,n,r,a,h]=l.then?(await l)():l;class c extends o.Z{constructor(e,t){super(),this.level=e,this.heldTower=t,this.heldTower.pokemon.pickup()}render(){this.level.render()}enter(){this.mousemoveCallback=e=>this.handleMouseMove(e),r.ry?r.JQ.addEventListener("mousedown",(e=>this.handleMouseUp(e)),{once:!0}):r.JQ.addEventListener("mouseup",(e=>this.handleMouseUp(e)),{once:!0}),r.JQ.addEventListener("mousemove",this.mousemoveCallback),this.level.pause()}exit(){super.exit(),this.level.unpause(),r.JQ.removeEventListener("mousemove",this.mousemoveCallback)}update(e){this.level.ui.update(e)}handleMouseUp(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg,i=this.level.towerSlots.filter((e=>this.level.didMouseHitObject(t,s,e)));let o=null;1==i.length?o=i[0]:this.level.ui.partyView.partyMemberHolders.filter((e=>e.pokemon==this.heldTower.pokemon))[0].retrievePokemonFromField();const n=this.level.pokemonTowers.filter((e=>e.towerSlot==o))[0];n&&n!=this.heldTower&&this.level.ui.partyView.partyMemberHolders.filter((e=>e.pokemon==n.pokemon))[0].retrievePokemonFromField(),this.level.pokemonTowers=this.level.pokemonTowers.filter((e=>e.towerSlot!=o||this.heldTower.towerSlot==e.towerSlot)),this.level.pokemonTowers.splice(this.level.pokemonTowers.indexOf(this.heldTower),1),null!=o&&this.level.pokemonTowers.push(h.Z.createPokemonTower(o,this.level,this.heldTower.pokemon)),this.heldTower.pokemon.place(),this.heldTower.pokemon.renderGreyscale=!1,this.heldTower=null,r.j3.pop()}handleMouseMove(e){const t=e.offsetX/r.Bg,s=e.offsetY/r.Bg;console.log("Moving Pokemon Tower"),0==this.level.towerSlots.filter((e=>this.level.didMouseHitObject(t,s,e))).length?this.heldTower.pokemon.renderGreyscale=!0:this.heldTower.pokemon.renderGreyscale=!1}}i()}catch(e){i(e)}}))},8514:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>S});var o=s(5188),n=s(3696),r=s(9509),a=s(6472),h=s(8865),l=s(5391),c=s(1526),u=s(3846),p=(s(8642),s(9449)),d=s(4719),m=s(9348),Z=s(9626),y=s(1342),k=s(5347),E=s(6403),g=s(8887),v=s(5127),w=s(6854),x=e([o,n,r,a,h,l,c,u,p,d,m,Z,y,k,E,g]);[o,n,r,a,h,l,c,u,p,d,m,Z,y,k,E,g]=x.then?(await x)():x;class S extends o.Z{static CREATE_PLAYSTATE_CALLED=!1;constructor(e,t,s=!1){if(super(),this.preventCutsceneOnFirstEnter=s,!S.CREATE_PLAYSTATE_CALLED)throw Error("Do not call the Level constructor directly... use PlayState.createPlayState() instead.");this.level=e,this.inventory=t,S.CREATE_PLAYSTATE_CALLED=!1,this.victoryCutscene=this.level.victoryCutscene??new h.Z([e=>{e()}]),this.lossCutscene=this.level.lossCutscene??new h.Z([e=>{e()}]),this.introCutscene=this.level.introCutscene,this.lossCutscene.callbacks.push((e=>{E.Z.fade((()=>{n.j3.pop(),n.j3.pop(),n.j3.top().attachEventListeners(),e()}))})),this.victoryCutscene.callbacks.push((e=>{E.Z.fade((()=>{n.j3.pop(),n.j3.pop(),n.j3.top().attachEventListeners(),e()}))}))}static async createPlaystate(e=1,t=k.Z.getInstance(),s=!1){return S.CREATE_PLAYSTATE_CALLED=!0,new S(await p.Z.createLevel(e,t),t,s)}render(){this.level.render()}enter(){this.mouseDownListener=e=>this.handleMouseDown(e),this.mouseMoveListener=e=>this.handleMouseMove(e),this.level.introCutscene.callbacks.push((e=>{(0,n.wC)(v.Z.Battle),this.attachEventListeners(),e()})),this.preventCutsceneOnFirstEnter||n.j3.push(this.level.introCutscene),this.preventCutsceneOnFirstEnter=!1}exit(){super.exit(),this.removeEventListeners()}update(e){this.level.update(e),this.level.lostLevel()&&(n.j3.push(this.lossCutscene),this.removeEventListeners()),this.level.wonLevel()&&(n.j3.push(this.victoryCutscene),(0,n.Wp)()==this.level.levelNumber&&((0,n.Bb)(this.level.levelNumber+1),this.inventory.pokeballCount+=this.level.pokeballsProvided),this.removeEventListeners())}preventPokemonSpawning(){}handleMouseDown(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg,i=this.level.pokemonTowers.filter((e=>this.level.didMouseHitObject(t,s,e.towerSlot)));1==i.length&&n.j3.push(new m.Z(this.level,i[0]));const o=this.level.ui.partyView.partyMemberHolders.filter((e=>this.level.didMouseHitObject(t,s,e)));if(1==o.length&&o[0].pokemon)if(this.level.pause(),o[0].pokemonIsTower)n.j3.push(new y.Z(o[0].pokemon,this.level,this.level.inventory)),this.removeEventListeners();else{const e=o[0];n.j3.push(new d.Z(this.level,e))}this.level.didMouseHitObject(t,s,this.level.ui.pokeball)&&this.inventory.pokeballCount>0&&n.j3.push(new Z.Z(this.level)),(0,w.Z)(t,s,this.level.ui.runButton)&&(n.jX.play(v.Z.Run),E.Z.fade((()=>{n.j3.pop()})))}handleMouseMove(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;(0,w.Z)(t,s,this.level.ui.runButton)?this.level.ui.runButton.onHover():this.level.ui.runButton.onNoHover()}reenter(){super.reenter()}attachEventListeners(){super.attachEventListeners(),n.JQ.addEventListener("mousedown",this.mouseDownListener),n.JQ.addEventListener("mousemove",this.mouseMoveListener),this.level.unpause()}removeEventListeners(){super.removeEventListeners(),n.JQ.removeEventListener("mousedown",this.mouseDownListener),n.JQ.removeEventListener("mousemove",this.mouseMoveListener),this.level.pause()}}i()}catch(e){i(e)}}))},1342:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(5188),n=s(3696),r=s(2908),a=s(5443),h=s(2747),l=e([o,n,r,a,h]);[o,n,r,a,h]=l.then?(await l)():l;class c extends o.Z{constructor(e,t,s,i=!1){super(),this.pokemon=e,this.level=t,this.inventory=s,this.allowRelease=i,this.ui=new a.Z(this.pokemon,s,this.allowRelease),this.mouseDownListener=e=>this.manageMouseDown(e),this.mouseMoveListener=e=>this.manageMouseMove(e),this.attachEventListeners()}enter(){n.jX.play(this.pokemon.crySoundName)}update(e){this.ui.update(e),n.XP.Escape&&(n.j3.pop(),n.XP.Escape=!1)}render(){this.ui.render()}reenter(){super.reenter(),this.attachEventListeners()}exit(){super.exit(),this.level&&this.level.unpause(),this.removeEventListeners(),n.j3.states[n.j3.states.length-2].attachEventListeners()}manageMouseDown(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;if(this.didHitObject(t,s,this.ui.closeButton)&&n.j3.pop(),this.ui.attacksPanel.attackButtons.filter((e=>this.didHitObject(t,s,e))).length>0&&(this.ui.attacksPanel.attackButtons.forEach((e=>{e.panelColour=r.Z.UNSELECTED_COLOUR})),this.ui.attacksPanel.attackButtons.forEach((e=>{this.didHitObject(t,s,e)&&e.onClick()}))),this.didHitObject(t,s,this.ui.levelUpButton)&&this.ui.levelUpButton.onClick(this),this.allowRelease&&this.didHitObject(t,s,this.ui.releasePokemonButton)){if(this.inventory.party.length<=1&&0===this.inventory.box.length)return;this.removeEventListeners(),this.ui.releasePokemonButton.onNoHover(),n.j3.push(new h.Z(this.pokemon))}}manageMouseMove(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;this.didHitObject(t,s,this.ui.closeButton)?this.ui.closeButton.onHover():this.ui.closeButton.onNoHover(),this.didHitObject(t,s,this.ui.levelUpButton)?this.ui.levelUpButton.onHover():this.ui.levelUpButton.onNoHover(),this.allowRelease&&(this.didHitObject(t,s,this.ui.releasePokemonButton)?this.ui.releasePokemonButton.onHover():this.ui.releasePokemonButton.onNoHover())}didHitObject(e,t,s){return e>=s.position.x&&e<=s.position.x+s.dimensions.x&&t>=s.position.y&&t<=s.position.y+s.dimensions.y}removeEventListeners(){super.removeEventListeners(),n.JQ.removeEventListener("mousedown",this.mouseDownListener),n.JQ.removeEventListener("mousemove",this.mouseMoveListener)}attachEventListeners(){super.attachEventListeners(),n.JQ.addEventListener("mousedown",this.mouseDownListener),n.JQ.addEventListener("mousemove",this.mouseMoveListener)}}i()}catch(e){i(e)}}))},4779:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Y:()=>p});var o=s(8026),n=s(3696),r=s(5347),a=s(8347),h=s(6472),l=s(7609),c=s(5188),u=e([n,r,h,l,c]);[n,r,h,l,c]=u.then?(await u)():u;class p extends c.Z{constructor(){super(),this.panel=new h.Z(0,h.Z.MIDDLE_DIALOGUE.y,n.vj/a.Z.SIZE,h.Z.MIDDLE_DIALOGUE.height,{panelColour:o.Z.Black,borderWidth:0}),this.fontSize=l.Z.FONT_SIZE+2,this.fontFamily=l.Z.FONT_FAMILY,this.textColour=o.Z.White,this.mouseDownListener=e=>this.handleMouseDown(e),this.attachEventListeners()}enter(){const e=r.Z.getInstance();0==e.pokeballCount&&(e.pokeballCount=1,this.pokeballGiven=!0)}attachEventListeners(){super.attachEventListeners(),n.JQ.addEventListener("mousedown",this.mouseDownListener)}removeEventListeners(){super.removeEventListeners(),n.JQ.removeEventListener("mousedown",this.mouseDownListener)}render(){this.panel.render(),n.Do.save(),n.Do.font=`${this.fontSize}px ${this.fontFamily}`,n.Do.fillStyle=this.textColour;let e="A shiny pokemon has appeared!",t=this.panel.dimensions.x/2-n.Do.measureText(e).width/2;n.Do.fillText(e,this.panel.position.x+t,this.panel.position.y+this.panel.dimensions.y/2-this.fontSize/2),this.pokeballGiven&&(n.Do.font=`${this.fontSize-2}px ${this.fontFamily}`,e="Good thing you just found a pokeball.",t=this.panel.dimensions.x/2-n.Do.measureText(e).width/2,n.Do.fillText(e,this.panel.position.x+t,this.panel.position.y+this.panel.dimensions.y/2+this.fontSize)),n.Do.restore()}handleMouseDown(e){n.j3.pop()}}i()}catch(e){i(e)}}))},3842:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>p});var o=s(6854),n=s(3696),r=s(5347),a=s(5620),h=s(2908),l=s(5468),c=s(5188),u=e([n,r,a,h,l,c]);[n,r,a,h,l,c]=u.then?(await u)():u;class p extends c.Z{constructor(e,t){super(),this.cutScenePokemon=e,this.index=t,this.ui=new l.Z(e,t),this.mouseDownListener=e=>this.manageMouseDown(e),this.mouseMoveListener=e=>this.manageMouseMove(e)}enter(){this.attachEventListeners()}update(e){this.ui.update(e),n.XP.Escape&&(n.j3.pop(),n.XP.Escape=!1)}render(){this.ui.render()}exit(){super.exit(),this.level&&this.level.unpause(),this.removeEventListeners(),n.j3.states[n.j3.states.length-2].attachEventListeners()}manageMouseDown(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;(0,o.Z)(t,s,this.ui.backButton)&&(n.j3.pop(),this.ui.cutScenePokemon.dimensions.x=this.ui.originalDimensionsX,this.ui.cutScenePokemon.dimensions.y=this.ui.originalDimensionsY,this.ui.cutScenePokemon.position.x=this.ui.originalPositionX,this.ui.cutScenePokemon.position.y=this.ui.originalPositionY),(0,o.Z)(t,s,this.ui.selectButton)&&(r.Z.getInstance().party.push(a.Z.createPokemon(3*(this.index+1)-2,5)),n.j3.pop())}manageMouseMove(e){const t=e.offsetX/n.Bg,s=e.offsetY/n.Bg;(0,o.Z)(t,s,this.ui.backButton)?this.ui.backButton.onHover():this.ui.backButton.onNoHover(),(0,o.Z)(t,s,this.ui.selectButton)?this.ui.selectButton.onHover():this.ui.selectButton.onNoHover()}removeEventListeners(){super.removeEventListeners(),n.JQ.removeEventListener("mousedown",this.mouseDownListener),n.JQ.removeEventListener("mousemove",this.mouseMoveListener)}attachEventListeners(){super.attachEventListeners(),n.JQ.addEventListener("mousedown",this.mouseDownListener),n.JQ.addEventListener("mousemove",this.mouseMoveListener)}}i()}catch(e){i(e)}}))},924:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>u});var o=s(8026),n=s(1989),r=s(3696),a=s(9067),h=s(4949),l=s(6472),c=e([r,a,h,l]);[r,a,h,l]=c.then?(await c)():c;class u{constructor(e){this.background=new a.Z("rgba(0,0,0,0.7)"),this.backPanel=new l.Z(5.5,5.5,10,6,{borderColour:o.Z.DarkRed,panelColour:o.Z.DarkGrey}),this.text=e,this.yesButton=new h.Z(7,8.5,2,2,"Yes"),this.noButton=new h.Z(12,8.5,2,2,"No"),this.fontSize=14}render(){this.background.render(),this.backPanel.render(),this.yesButton.render(),this.noButton.render(),this.renderText()}renderText(){r.Do.save(),r.Do.font=`${this.fontSize}px ${n.Z.PokemonGB}`,r.Do.fillStyle=o.Z.White;let e=this.getLines(this.text,this.backPanel.dimensions.x-20);r.Do.textAlign="center",e.forEach(((e,t)=>{r.Do.fillText(e,this.backPanel.position.x+80,this.backPanel.position.y+20+12*t)})),r.Do.restore()}getLines(e,t){const s=e.split("\n"),i=[];return s.forEach((e=>{const s=e.replace(/\t+/g,"").split(" ");let o=s[0];r.Do.font=`${this.fontSize}px ${this.fontFamily}`;for(let e=1;e<s.length;e++){const n=s[e];r.Do.measureText(o+" "+n).width<t?o+=" "+n:(i.push(o),o=n)}i.push(o)})),i}}i()}catch(e){i(e)}}))},9067:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8038),n=s(8026),r=s(3696),a=s(5676),h=e([r]);r=(h.then?(await h)():h)[0];class l extends a.Z{constructor(e=n.Z.DarkGrey,t=new o.Z(0,0),s=new o.Z(r.JQ.width,r.JQ.height)){super(t.x,t.y,s.x,s.y),this.colour=e,this.opacity=1}render(){r.Do.save(),r.Do.globalAlpha=this.opacity,r.Do.fillStyle=this.colour,r.Do.fillRect(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y),r.Do.restore()}}i()}catch(e){i(e)}}))},4949:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>u});var o=s(8038),n=s(8026),r=s(1989),a=s(5127),h=s(3696),l=s(6472),c=e([h,l]);[h,l]=c.then?(await c)():c;class u extends l.Z{constructor(e,t,s,i,o){super(e,t,s,i,{borderWidth:3,panelColour:n.Z.Crimson,borderColour:n.Z.White}),this.text=o,this.fontSize=16,this.fontWeight="bold",this.fontFamily=r.Z.Joystix,this.fontColour=this.borderColour,this.isHovering=!1}render(){if(!this.isVisible)return;this.isHovering?this.panelColour=n.Z.LighterCrimson:this.panelColour=n.Z.Crimson,super.render(),h.Do.save(),h.Do.textBaseline="top",h.Do.font=`${this.fontWeight} ${this.fontSize}px ${this.fontFamily}`,h.Do.fillStyle=this.fontColour;const e=h.Do.measureText(this.text),t=new o.Z(this.position.x+this.dimensions.x/2-e.width/2,this.position.y+this.dimensions.y/2-this.fontSize/2);h.Do.fillText(this.text,t.x,t.y),h.Do.restore()}onHover(){this.isHovering=!0,this.borderColour=this.fontColour=n.Z.Black}onNoHover(){this.isHovering=!1,this.borderColour=this.fontColour=n.Z.White}onPress(){h.jX.play(a.Z.ButtonPress)}}i()}catch(e){i(e)}}))},7319:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(8347),r=s(3696),a=s(6472),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends a.Z{static HEIGHT=3/n.Z.SIZE;constructor(e,t={}){super(0,0,0,l.HEIGHT,t),this.pokemon=e}update(e){const t=this.pokemon.getHealthPercentage();this.position.y=this.pokemon.position.y-l.HEIGHT*n.Z.SIZE*3,this.dimensions.x=this.pokemon.dimensions.x*t,this.position.x=this.pokemon.position.x+this.pokemon.dimensions.x/2*(1-t),this.pokemon.lowHealth()&&!this.pokemon.isBoss||this.pokemon.shiny?this.panelColour=o.Z.Crimson:t<=.6&&!this.pokemon.isBoss&&(this.panelColour=o.Z.Gold)}}i()}catch(e){i(e)}}))},3395:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c}),s(8642);var o=s(3696),n=(s(5676),s(9023)),r=s(6472),a=s(8026),h=s(7609),l=e([o,n,r,h]);[o,n,r,h]=l.then?(await l)():l;class c extends r.Z{static DIMENSIONS={width:3,height:3};constructor(e,t,s){super(e,t,c.DIMENSIONS.width,c.DIMENSIONS.height,{borderWidth:5,borderColour:s.borderColour,panelColour:a.Z.DarkGrey}),this.image=o.Wc.get(s.imageName),this.colour=s.borderColour,this.levelName=s.name,this.fontSize=6,this.font=`${this.fontSize}px ${h.Z.FONT_FAMILY}`,this.locked=s.levelNumber>(0,o.Wp)(),this.lockedIndicator=new r.Z(e-.1,t,c.DIMENSIONS.width+.2,c.DIMENSIONS.height,{borderWidth:0,borderColour:a.Z.Transparent,panelColour:"rgba(0, 0, 0, 0.9)"})}render(){super.render(),o.Do.save(),o.Do.strokeStyle=this.colour,o.Do.strokeRect(this.position.x-1,this.position.y-1,this.dimensions.x+2,this.dimensions.y+2),o.Do.fillStyle=a.Z.White,o.Do.font=this.font,o.Do.textBaseline="top",this.levelName.split(" ").forEach(((e,t)=>{const s=o.Do.measureText(e).width;o.Do.fillText(e,this.position.x+this.dimensions.x/2-s/2,this.position.y+this.dimensions.y+12+this.fontSize*t)})),o.Do.restore(),this.image.render(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y),this.locked&&this.lockedIndicator.render()}}i()}catch(e){i(e)}}))},9023:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(8026),n=s(8347),r=s(6472),a=s(3395),h=s(9581),l=e([r,a,h]);[r,a,h]=l.then?(await l)():l;class c extends r.Z{static LEVEL_PANEL_Y=(r.Z.LEVELS_MENU.height-4)/2;static GAP=(r.Z.LEVELS_MENU.width-15)/7;constructor(e){super(r.Z.LEVELS_MENU.x,r.Z.LEVELS_MENU.y,r.Z.LEVELS_MENU.width,r.Z.LEVELS_MENU.height,{borderWidth:5,panelColour:"rgba(0, 0, 0, 0.4)",borderColour:o.Z.Gold,panelColour:o.Z.Crimson}),this.levels=e,this.levelBoxes=[],this.selector=new h.Z(r.Z.DEFAULT_LEVEL_SELECTOR_LOCATION.x,r.Z.DEFAULT_LEVEL_SELECTOR_LOCATION.y,r.Z.DEFAULT_LEVEL_SELECTOR_LOCATION.width,r.Z.DEFAULT_LEVEL_SELECTOR_LOCATION.height,r.Z.DEFAULT_LEVEL_SELECTOR_LOCATION.offset),this.levels.forEach(((e,t)=>{const s=(t+1.5)*c.GAP,i=t*a.Z.DIMENSIONS.width;this.levelBoxes.push(new a.Z(this.position.x/n.Z.SIZE+s+i,this.position.y/n.Z.SIZE+c.LEVEL_PANEL_Y,e))}))}update(e){}render(){super.render(),this.levelBoxes.forEach((e=>{e.render()})),this.selector.render()}didMouseHitObject(e,t,s){return e>=s.position.x&&e<=s.position.x+s.dimensions.x&&t>=s.position.y&&t<=s.position.y+s.dimensions.y}}i()}catch(e){i(e)}}))},2365:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>r});var o=s(4949),n=e([o]);o=(n.then?(await n)():n)[0];class r extends o.Z{static BUTTON_PLACEMENT={x:.25,y:.25,width:3,height:1.5};constructor(e){super(r.BUTTON_PLACEMENT.x,r.BUTTON_PLACEMENT.y,r.BUTTON_PLACEMENT.width,r.BUTTON_PLACEMENT.height,e)}}i()}catch(e){i(e)}}))},9581:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>u});var o=s(8347),n=s(6472),r=s(5676),a=(s(8026),s(3696)),h=s(3395),l=s(9023),c=e([n,a,h,l]);[n,a,h,l]=c.then?(await c)():c;class u extends r.Z{static NUMBER_OF_LEVEL_CHOICES=4;static isSelectorTweening=!0;constructor(e,t,s,i,n){super(e-n/2,t-n/2,s+n,i+n),this.colour={r:255,g:255,b:255,a:1},this.borderWidth=3,this.isVisible=!1,this.offset=n*o.Z.SIZE,a.HT.tween(this.colour,["a"],[0],.5,(()=>this.tweenAgain()))}render(){this.isVisible&&(a.Do.save(),a.Do.strokeStyle=`rgba(${this.colour.r}, ${this.colour.g}, ${this.colour.b}, ${this.colour.a})`,a.Do.lineWidth=this.borderWidth,a.Do.beginPath(),a.Do.roundRect(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y,5),a.Do.closePath(),a.Do.stroke(),a.Do.restore())}update(){}tweenAgain(){0===this.colour.a?a.HT.tween(this.colour,["a"],[1],.5,(()=>this.tweenAgain())):a.HT.tween(this.colour,["a"],[0],.5,(()=>this.tweenAgain()))}onHover(e,t){this.position.x=e-this.offset/2,this.position.y=t-this.offset/2,this.isVisible=!0}onNoHover(){this.isVisible=!1}}i()}catch(e){i(e)}}))},6472:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(5676),n=s(1767),r=s(3696),a=s(8026),h=e([r]);r=(h.then?(await h)():h)[0];class l extends o.Z{static PARTY_MENU={x:3,y:15,width:15,height:2};static LEVELS_MENU={x:1,y:8.5,width:19,height:6};static BOTTOM_DIALOGUE={x:4,y:13,width:13,height:3};static POKEMON_FOCUS_BOTTOM={x:0,y:12,width:18,height:5};static TOP_DIALOGUE={x:0,y:0,width:15,height:3};static MIDDLE_DIALOGUE={x:4,y:8,width:13,height:3};static POKEMON_STATS={x:7.5,y:3.5,width:7,height:7};static BATTLE_PLAYER={x:8,y:5,width:6.5,height:2.5};static BATTLE_OPPONENT={x:1,y:1,width:6.5,height:2};static BATTLE_EXPERIENCE={x:9,y:7,width:6,height:4};static CAUGHT_POKEMON={x:4,y:6,width:13,height:5};static DEFAULT_LEVEL_SELECTOR_LOCATION={x:2.75,y:9.5,width:3,height:3,offset:.5};static CURRENT_TEAM_IN_POKEMON_SELECT={x:1,y:1,width:19,height:4};static BOX_PANEL_POKEMON_SELECT={x:1,y:7,width:19,height:8};static DEFAULT_LEVEL_SELECT={};static DEFAULT_PADDING=10;static BORDER_WIDTH=10;constructor(e,t,s,i,o={}){super(e,t,s,i),this.borderColour=o.borderColour??a.Z.Grey,this.panelColour=o.panelColour??a.Z.White,this.padding=o.padding??l.DEFAULT_PADDING,this.borderWidth=o.borderWidth??l.BORDER_WIDTH,this.fill=o.fill??!0,this.stroke=o.stroke??!1,this.strokeColour=o.strokeColour??a.Z.Crimson,this.strokeWidth=o.strokeWidth??5,this.isVisible=!0}render(){this.isVisible&&(r.Do.save(),this.renderBackground(),this.renderForeground(),r.Do.restore())}renderBackground(){r.Do.fillStyle=this.borderColour,r.Do.strokeStyle=this.strokeColour,r.Do.strokeWidth=this.strokeWidth,(0,n.b)(r.Do,this.position.x,this.position.y,this.dimensions.x,this.dimensions.y,this.borderWidth,this.fill,this.stroke)}renderForeground(){r.Do.fillStyle=this.panelColour,r.Do.strokeStyle=this.strokeColour,r.Do.strokeWidth=this.strokeWidth,(0,n.b)(r.Do,this.position.x+this.borderWidth/2,this.position.y+this.borderWidth/2,this.dimensions.x-this.borderWidth,this.dimensions.y-this.borderWidth,this.borderWidth,this.fill,this.stroke)}toggle(){this.isVisible=!this.isVisible}}i()}catch(e){i(e)}}))},1718:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(8347),r=s(6472),a=s(3476),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends r.Z{static BOX_PANEL_Y=(r.Z.BOX_PANEL_POKEMON_SELECT.height-2)/2;static GAP=(r.Z.LEVELS_MENU.width-12)/8;constructor(e){super(r.Z.BOX_PANEL_POKEMON_SELECT.x,r.Z.BOX_PANEL_POKEMON_SELECT.y,r.Z.BOX_PANEL_POKEMON_SELECT.width,r.Z.BOX_PANEL_POKEMON_SELECT.height,{panelColour:o.Z.DarkGrey,borderColour:o.Z.LightBlue,borderWidth:5}),this.boxPokemon=e,this.pokemonBoxes=[],this.nextAreEmpty=!1;for(let e=0;e<3;e++)for(let t=0;t<6;t++){const s=(t+1.5)*l.GAP,i=t*a.Z.DIMENSIONS.width;this.boxPokemon.length>t&&!this.nextAreEmpty?this.pokemonBoxes.push(new a.Z(this.position.x/n.Z.SIZE+s+i,this.position.y/n.Z.SIZE+e*(this.position.y/n.Z.SIZE)/3+.7,this.boxPokemon[t%6+6*e],o.Z.White,a.Z.FULL_COLOUR)):(this.pokemonBoxes.push(new a.Z(this.position.x/n.Z.SIZE+s+i,this.position.y/n.Z.SIZE+.7+e*(this.position.y/n.Z.SIZE)/3,null,o.Z.White,a.Z.EMPTY_COLOUR)),this.nextAreEmpty=!0)}}update(e){this.pokemonBoxes.forEach((t=>t.update(e)))}render(){super.render(),this.pokemonBoxes.forEach((e=>e.render()))}}i()}catch(e){i(e)}}))},9821:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(8347),r=s(6472),a=s(3476),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends r.Z{static CURRENT_TEAM_PANEL_Y=(r.Z.CURRENT_TEAM_IN_POKEMON_SELECT.height-2)/2;static GAP=(r.Z.LEVELS_MENU.width-12)/8;constructor(e,t,s){super(r.Z.CURRENT_TEAM_IN_POKEMON_SELECT.x,r.Z.CURRENT_TEAM_IN_POKEMON_SELECT.y,r.Z.CURRENT_TEAM_IN_POKEMON_SELECT.width,r.Z.CURRENT_TEAM_IN_POKEMON_SELECT.height,{panelColour:t,borderColour:s,borderWidth:5}),this.partyPokemon=e,this.pokemonBoxes=[];for(let t=0;t<6;t++){const s=(t+1.5)*l.GAP,i=t*a.Z.DIMENSIONS.width;this.partyPokemon.length>t?this.pokemonBoxes.push(new a.Z(this.position.x/n.Z.SIZE+s+i,this.position.y/n.Z.SIZE+l.CURRENT_TEAM_PANEL_Y,e[t],o.Z.White,a.Z.FULL_COLOUR)):this.pokemonBoxes.push(new a.Z(this.position.x/n.Z.SIZE+s+i,this.position.y/n.Z.SIZE+l.CURRENT_TEAM_PANEL_Y,null,o.Z.White,a.Z.EMPTY_COLOUR))}}update(e){this.pokemonBoxes.forEach((t=>t.update(e)))}render(){super.render(),this.pokemonBoxes.forEach((e=>e.render()))}}i()}catch(e){i(e)}}))},3476:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>p});var o=s(8038),n=s(8026),r=s(1989),a=s(3696),h=s(5347),l=s(6472),c=s(9036),u=e([a,h,l,c]);[a,h,l,c]=u.then?(await u)():u;class p extends l.Z{static DIMENSIONS={width:2,height:2};static EMPTY_COLOUR=n.Z.Crimson;static FULL_COLOUR=n.Z.Chartreuse;constructor(e,t,s,i,o){super(e,t,p.DIMENSIONS.width,p.DIMENSIONS.height,{panelColour:i??n.Z.White,borderWidth:5,borderColour:o??n.Z.White}),this.normalPanelColour=this.panelColour,this.emptyBorderColour=p.EMPTY_COLOUR,this.fullBorderColour=p.FULL_COLOUR,this.pokemon=s,this.fontWeight="bold",this.fontSize=10,this.fontFamily=r.Z.PokemonGB,this.timeSinceColorToggle=0}update(e){!this.pokemon||!this.pokemon.canLevelUp()||h.Z.getInstance().pokedollars<this.pokemon.levelUpPrice()?this.panelColour=this.normalPanelColour:(this.timeSinceColorToggle+=e,this.timeSinceColorToggle>.5&&this.toggleBackgroundColour())}render(){this.pokemon?this.borderColour=this.fullBorderColour:this.borderColour=this.emptyBorderColour,super.render(),this.pokemon&&(this.pokemon.pickedUp?this.pokemon.render():this.pokemon.render(new o.Z(this.position.x+this.dimensions.x/4,this.position.y+this.dimensions.y/8)),a.Do.save(),a.Do.textBaseline="top",a.Do.textAlign="center",a.Do.font=`${this.fontWeight} ${this.fontSize}px ${this.fontFamily}`,a.Do.fillStyle=n.Z.Black,a.Do.fillText(`${this.pokemon.pokemonLevel}`,this.position.x+this.dimensions.x/2,this.position.y+this.dimensions.y/1.5),a.Do.restore())}toggleBackgroundColour(){this.timeSinceColorToggle=0,this.panelColour=this.panelColour==n.Z.Crimson?this.normalPanelColour:n.Z.Crimson}}i()}catch(e){i(e)}}))},8970:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>a});var o=s(8026),n=s(6472),r=e([n]);n=(r.then?(await r)():r)[0];class a extends n.Z{constructor(e,t,s,i,n){super(e,t,s,i,{panelColour:o.Z.DarkerDodgerBlue,borderColour:o.Z.Black,borderWidth:0}),this.pokemonPartyMemberHolder=n,this.maxWidth=this.dimensions.x}update(e){this.pokemonPartyMemberHolder.pokemon&&(this.dimensions.x=Math.min(this.maxWidth,this.maxWidth*this.pokemonPartyMemberHolder.pokemon.experiencePercentageToNextLevel()))}}i()}catch(e){i(e)}}))},9036:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>m});var o=s(8038),n=s(1928),r=s(6472),a=s(8347),h=s(3696),l=s(8026),c=s(7609),u=s(8970),p=s(5347),d=e([n,r,h,c,u,p]);[n,r,h,c,u,p]=d.then?(await d)():d;class m extends r.Z{static DIMENSIONS={width:1.25,height:1.25};static POKEMON_RENDER_OFFSET=new o.Z(-a.Z.SIZE/3,5*-a.Z.SIZE/4);static LEVEL_UP_INDICATION_COLOUR=l.Z.Crimson;constructor(e,t,s=null){super(e,t,m.DIMENSIONS.width,m.DIMENSIONS.height,{borderWidth:2}),this.addPokemon(s),this.fontSize=8,this.fontFamily=c.Z.FONT_FAMILY,this.defaultPanelColour=this.panelColour,this.experienceIndicatorPadding=0,this.experienceIndicator=new u.Z(this.position.x/a.Z.SIZE,(this.position.y+this.dimensions.y)/a.Z.SIZE-.16,(this.dimensions.x-2*this.experienceIndicatorPadding)/a.Z.SIZE,.15,this),h.HT.addTask((()=>this.flipLevelUpBackgroundColor()),.5)}update(e){null!=this.pokemon&&(this.pokemon.update(e),this.pokemonIsTower?super.nonLevelUpPanelColour=l.Z.LightBlue:super.nonLevelUpPanelColour=this.defaultPanelColour,this.experienceIndicator.update(e))}flipLevelUpBackgroundColor(){this.pokemon&&(!this.pokemon.canLevelUp()||p.Z.getInstance().pokedollars<this.pokemon.levelUpPrice()?this.panelColour=this.nonLevelUpPanelColour:this.panelColour=this.panelColour==this.nonLevelUpPanelColour?m.LEVEL_UP_INDICATION_COLOUR:this.nonLevelUpPanelColour)}render(){if(super.render(),null!=this.pokemon){this.pokemon.renderOffset=m.POKEMON_RENDER_OFFSET,h.Do.save();const e=!this.pokemon.pickedUp||this.pokemon.pickedUp&&this.pokemonIsTower;this.pokemon.render(e?this.position:null,this.pokemonIsTower),h.Do.restore(),this.pokemon.renderOffset=n.Z.RENDER_OFFSET,this.experienceIndicator.render(),h.Do.save(),h.Do.textBaseline="top",h.Do.font=`${this.fontSize}px ${this.fontFamily}`,h.Do.fillStyle=l.Z.Black;const t=this.pokemon.pokemonLevel,s=h.Do.measureText(t).width;h.Do.fillText(t,this.position.x+a.Z.SIZE/2-s/2+2,this.position.y+.6*a.Z.SIZE),h.Do.restore()}}addPokemon(e){this.pokemon=e,null!=this.pokemon&&(this.pokemon.position=new o.Z(this.position.x,this.position.y))}retrievePokemonFromField(){this.pokemonIsTower=!1,this.pokemon.position=new o.Z(this.position.x,this.position.y)}}i()}catch(e){i(e)}}))},3501:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var o=s(8347),n=s(6472),r=s(9036),a=e([n,r]);[n,r]=a.then?(await a)():a;class h extends n.Z{static MemberPanelY=(n.Z.PARTY_MENU.height-r.Z.DIMENSIONS.height)/2;static GAP=(n.Z.PARTY_MENU.width-6*r.Z.DIMENSIONS.width)/8;constructor(e){super(n.Z.PARTY_MENU.x,n.Z.PARTY_MENU.y,n.Z.PARTY_MENU.width,n.Z.PARTY_MENU.height,{borderWidth:5,panelColour:"rgba(0, 0, 0, 0.5)"}),this.party=e,this.partyMemberHolders=[];for(let e=0;e<6;e++){const t=(e+1.5)*h.GAP,s=e*r.Z.DIMENSIONS.width;this.party.length>e?this.partyMemberHolders.push(new r.Z(this.position.x/o.Z.SIZE+t+s,this.position.y/o.Z.SIZE+h.MemberPanelY,this.party[e])):this.partyMemberHolders.push(new r.Z(this.position.x/o.Z.SIZE+t+s,this.position.y/o.Z.SIZE+h.MemberPanelY))}}update(e){for(let e=0;e<this.party.length;e++)null==this.partyMemberHolders[e].pokemon&&(this.party[e].position=this.partyMemberHolders[e].position),this.partyMemberHolders[e].pokemon=this.party[e]}render(){super.render(),this.partyMemberHolders.forEach((e=>{e.render()}))}}i()}catch(e){i(e)}}))},404:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>c});var o=s(3696),n=s(8347),r=s(4949),a=s(3501),h=s(3673),l=e([o,r,a,h]);[o,r,a,h]=l.then?(await l)():l;class c{constructor(e){this.inventory=e,this.partyView=new a.Z(e.party),this.pokeball=new h.Z,this.runButton=new r.Z(o.vj/n.Z.SIZE-3.25,.25,3,1.5,"Run")}update(e){this.partyView.update(e),this.pokeball.update(e)}render(){this.partyView.render(),this.runButton.render()}renderPokeball(){this.pokeball.render()}}i()}catch(e){i(e)}}))},3673:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>Z});var o=s(3378),n=s(8038),r=s(8026),a=s(8642),h=s(3696),l=s(5347),c=s(8347),u=s(6472),p=s(5676),d=s(9036),m=e([h,l,u,d]);[h,l,u,d]=m.then?(await m)():m;class Z extends p.Z{static State={CLOSED:0,OPEN:1};static DEFAULT_POSITION=new n.Z(u.Z.PARTY_MENU.x+u.Z.PARTY_MENU.width+.25,u.Z.PARTY_MENU.y-.25);constructor(){super(Z.DEFAULT_POSITION.x,Z.DEFAULT_POSITION.y,2,2),this.sprites=this.getSprites(),this.currentSprite=Z.State.CLOSED,this.inventory=l.Z.getInstance()}update(e){this.grabbed?this.position=new n.Z(h.Sv.x-this.dimensions.x/2,h.Sv.y-this.dimensions.y/2):this.position=new n.Z(Z.DEFAULT_POSITION.x*c.Z.SIZE,Z.DEFAULT_POSITION.y*c.Z.SIZE)}render(){h.Do.save(),0==this.inventory.pokeballCount&&(h.Do.fillStyle="#fff",h.Do.globalCompositeOperation="luminosity"),this.sprites[this.currentSprite].render(this.position.x,this.position.y,{x:.05,y:.05}),h.Do.restore(),h.Do.save(),h.Do.font="12px PokemonGB",h.Do.textBaseline="top",h.Do.fillStyle=r.Z.White;const e=this.inventory.pokeballCount;h.Do.fillText(e,Z.DEFAULT_POSITION.x*c.Z.SIZE+this.dimensions.x/2-h.Do.measureText(e).width/2,Z.DEFAULT_POSITION.y*c.Z.SIZE-c.Z.SIZE),h.Do.restore()}getSprites(){return[new o.Z(h.Wc.get(a.Z.PokeballClosed),0,0,698,698),new o.Z(h.Wc.get(a.Z.PokeballOpen),0,0,690,690)]}grab(){this.grabbed=!0}drop(){this.grabbed=!1}}i()}catch(e){i(e)}}))},2908:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>h});var o=s(8026),n=s(3696),r=s(6472),a=e([n,r]);[n,r]=a.then?(await a)():a;class h extends r.Z{static SELECTED_COLOUR="orange";static UNSELECTED_COLOUR=o.Z.Black;constructor(e,t,s,i,n,a){super(e,t,s,i,{panelColour:a.selectedAttack==n?h.SELECTED_COLOUR:h.UNSELECTED_COLOUR,borderColour:o.Z.White,borderWidth:2}),this.attack=n,this.pokemon=a,this.fontSize=r.Z.FONT_SIZE-1,this.fontColour=o.Z.White,this.fontFamily=r.Z.FONT_FAMILY}onClick(){this.pokemon.selectedAttack=this.attack,this.panelColour=h.SELECTED_COLOUR}render(){super.render(),n.Do.save(),n.Do.textBaseline="top",n.Do.font=`${this.fontSize}px ${this.fontFamily}`,n.Do.fillStyle=this.fontColour;const e=n.Do.measureText(this.attack.name).width,t=(this.dimensions.x-e)/2;n.Do.fillText(this.attack.name,this.position.x+t,this.position.y+this.fontSize),n.Do.restore()}}i()}catch(e){i(e)}}))},7190:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(3696),r=s(6472),a=s(9299),h=e([n,r,a]);[n,r,a]=h.then?(await h)():h;class l extends r.Z{static DIMENSIONS={x:10,y:r.Z.POKEMON_FOCUS_BOTTOM.height-1};constructor(e,t=r.Z.POKEMON_FOCUS_BOTTOM.x+.25+a.Z.DIMENSIONS.x,s=r.Z.POKEMON_FOCUS_BOTTOM.y+.5){super(t,s,l.DIMENSIONS.x,l.DIMENSIONS.y,{panelColour:o.Z.Black,borderWidth:2,borderColour:o.Z.White}),this.pokemon=e,this.fontSize=r.Z.FONT_SIZE-1,this.fontFamily=r.Z.FONT_FAMILY,this.fontColour=o.Z.White,this.padding=4}render(){super.render(),n.Do.save(),n.Do.textBaseline="top",n.Do.font=`${this.fontSize}px ${this.fontFamily}`,n.Do.fillStyle=this.fontColour;const e=this.pokemon.selectedAttack;this.createDescriptionList(e.description??"No Description",this.dimensions.x-6).forEach(((e,t)=>{t>3||(3==t&&(e+="..."),n.Do.fillText(e,this.position.x+2,this.position.y+t*this.fontSize+this.padding))}));const t=this.position.x+2;n.Do.fillText(`Type: ${e.type}`,t,this.position.y+4.25*this.fontSize+this.padding),n.Do.fillText(`Power: ${e.power??"N/A"}`,t,this.position.y+5.25*this.fontSize+this.padding),n.Do.fillText(`Category: ${e.damageClass.charAt(0).toUpperCase()+e.damageClass.slice(1)}`,t,this.position.y+6.25*this.fontSize+this.padding),n.Do.fillText(`Accuracy: ${e.accuracy??"N/A"}`,t,this.position.y+7.25*this.fontSize+this.padding),n.Do.restore()}createDescriptionList(e,t){const s=this.getLines(e,t),i=Math.floor((this.dimensions.y-this.padding)/this.fontSize),o=Math.ceil(s.length/i),n=[];for(let e=0;e<o;e++){n.push([]);for(let t=0;t<i&&0!==s.length;t++)n[e][t]=s.splice(0,1)}return n[0]}getLines(e,t){const s=e.split("\n"),i=[];return s.forEach((e=>{const s=e.replace(/\t+/g,"").split(" ");let o=s[0];n.Do.font=`${this.fontSize}px ${this.fontFamily}`;for(let e=1;e<s.length;e++){const r=s[e];n.Do.measureText(o+" "+r).width<t?o+=" "+r:(i.push(o),o=r)}i.push(o)})),i}}i()}catch(e){i(e)}}))},9299:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(8347),r=s(6472),a=s(2908),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends r.Z{static DIMENSIONS={x:6,y:r.Z.POKEMON_FOCUS_BOTTOM.height-1};constructor(e,t=r.Z.POKEMON_FOCUS_BOTTOM.x+.25,s=r.Z.POKEMON_FOCUS_BOTTOM.y+.5,i=l.DIMENSIONS.x,n=l.DIMENSIONS.y){super(t,s,i,n,{panelColour:o.Z.Black,borderWidth:2,borderColour:o.Z.White}),this.pokemon=e,this.attackButtons=this.generateAttackPanels(e)}generateAttackPanels(e){return e.attacks.map(((t,s)=>new a.Z(this.position.x/n.Z.SIZE,(this.position.y+s)/n.Z.SIZE+s*l.DIMENSIONS.y/4,this.dimensions.x/n.Z.SIZE,(this.dimensions.y-1)/4/n.Z.SIZE,t,e)))}update(e){this.attackButtons.map((e=>e.attack))!=this.pokemon.attacks&&(this.attackButtons=this.generateAttackPanels(this.pokemon))}render(){super.render(),this.attackButtons.forEach((e=>e.render()))}}i()}catch(e){i(e)}}))},3814:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(5127),r=s(3696),a=s(4949),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends a.Z{constructor(e,t,s,i,o,n){super(e,t,s,i,"Level Up"),this.inventory=n,this.pokemon=o,this.padding=4}onHover(){this.canLevelUp()&&super.onHover()}canLevelUp(){return this.inventory.pokedollars>=this.pokemon.levelUpPrice()&&this.pokemon.canLevelUp()}render(){super.render(),r.Do.save(),r.Do.textBaseline="top";let e=this.fontSize-5;r.Do.font=`${this.fontWeight} ${e}px ${this.fontFamily}`,r.Do.fillStyle=this.fontColour,r.Do.fillText(`Lvl. ${this.pokemon.pokemonLevel}`,this.position.x+this.padding,this.position.y+this.padding);const t=e;e-=3,r.Do.font=`${this.fontWeight} ${e}px ${this.fontFamily}`;const s=this.pokemon.calculateExperienceGainedThisLevel(),i=this.pokemon.targetExperienceThisLevel();r.Do.fillText(`Exp: ${s} / ${i}`,this.position.x+this.padding,this.position.y+this.padding+t),e=this.fontSize-7,r.Do.font=`${this.fontWeight} ${e}px ${this.fontFamily}`,r.Do.fillText(`Cost: ${r.Gw}${this.pokemon.levelUpPrice()}`,this.position.x+this.padding,this.position.y+this.padding+4.5*e),r.Do.fillText(`Balance:${r.Gw}${this.inventory.pokedollars}`,this.position.x+this.padding,this.position.y+this.padding+5.5*e),r.Do.restore()}update(){this.fontColour=this.canLevelUp()?o.Z.White:o.Z.DarkGrey}onClick(e){this.canLevelUp()&&(r.jX.play(n.Z.Purchase),this.inventory.pokedollars-=this.pokemon.levelUpPrice(),this.pokemon.levelUp(e))}}i()}catch(e){i(e)}}))},5529:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>p});var o=s(8026),n=s(8818),r=s(3696),a=s(9449),h=s(8347),l=s(6472),c=s(7609),u=e([r,a,l,c]);[r,a,l,c]=u.then?(await u)():u;class p extends l.Z{static DIMENSIONS={width:9,height:12.12};constructor(e){super(0,0,p.DIMENSIONS.width,p.DIMENSIONS.height,{panelColour:"rgba(0, 0, 0, 0.8)",borderColour:o.Z.Transparent,borderWidth:4}),this.pokemon=e}render(){super.render(),r.Do.save(),r.Do.textBaseline="top",r.Do.fillStyle=o.Z.White;let e=12;r.Do.font=`${e}px ${c.Z.FONT_FAMILY}`;const t=this.position.y,s=this.position.x,i=h.Z.SIZE/2;r.Do.fillText(this.pokemon.name,s+i,t+i),e=8,r.Do.font=`${e}px ${c.Z.FONT_FAMILY}`,r.Do.fillText(`HP: ${this.pokemon.stats[n.Z.HP]}`,s+i,t+i+e+h.Z.SIZE),r.Do.fillText(`Attack: ${this.pokemon.stats[n.Z.Attack]}`,s+i,t+i+2*e+h.Z.SIZE),r.Do.fillText(`Defence: ${this.pokemon.stats[n.Z.Defense]}`,s+i,t+i+3*e+h.Z.SIZE),r.Do.fillText(`Sp.Attack: ${this.pokemon.stats[n.Z.SPAttack]}`,s+i,t+i+4*e+h.Z.SIZE),r.Do.fillText(`Sp.Defense: ${this.pokemon.stats[n.Z.SPDefense]}`,s+i,t+i+5*e+h.Z.SIZE),r.Do.fillText(`Speed: ${this.pokemon.stats[n.Z.Speed]}`,s+i,t+i+6*e+h.Z.SIZE),r.Do.fillText("Type(s)",s+i,t+i+6*e+2*h.Z.SIZE),this.pokemon.types.forEach(((o,n)=>{r.Do.fillText(o.name,s+i,t+i+e*(7+n)+2.25*h.Z.SIZE)})),r.Do.restore()}}i()}catch(e){i(e)}}))},5443:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>m});var o=s(8026),n=s(5347),r=s(6472),a=s(7609),h=s(7190),l=s(9299),c=s(4949),u=s(3814),p=s(5529),d=e([n,r,a,h,l,c,u,p]);[n,r,a,h,l,c,u,p]=d.then?(await d)():d;class m{static CLOSE_BUTTON={x:15.75,y:14.75,width:3,height:1.75};constructor(e,t,s=!1){this.pokemon=e,this.inventory=t,this.backBottomPanel=new r.Z(r.Z.POKEMON_FOCUS_BOTTOM.x,r.Z.POKEMON_FOCUS_BOTTOM.y,r.Z.POKEMON_FOCUS_BOTTOM.width,r.Z.POKEMON_FOCUS_BOTTOM.height,{panelColour:"rgba(0, 0, 0, 0.75)",borderColour:o.Z.Transparent,borderWidth:0}),this.attacksPanel=new l.Z(this.pokemon),this.attackDescriptionPanel=new h.Z(e),this.closeButton=new c.Z(m.CLOSE_BUTTON.x,m.CLOSE_BUTTON.y,m.CLOSE_BUTTON.width,m.CLOSE_BUTTON.height,"Done"),this.levelUpButton=new u.Z(r.Z.POKEMON_FOCUS_BOTTOM.x+r.Z.POKEMON_FOCUS_BOTTOM.width-5,r.Z.POKEMON_FOCUS_BOTTOM.y-4,5,4,e,this.inventory),this.pokemonDetailsPanel=new p.Z(this.pokemon),this.releasePokemonButton=new c.Z(4,10,4,1.5,"Release"),this.allowRelease=s}update(e){this.levelUpButton.update(e),this.attacksPanel.update(e)}render(){this.backBottomPanel.render(),this.attacksPanel.render(),this.attackDescriptionPanel.render(),this.closeButton.render(),this.levelUpButton.render(),this.pokemonDetailsPanel.render(),this.allowRelease&&this.releasePokemonButton.render()}}i()}catch(e){i(e)}}))},5468:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>d});var o=s(8026),n=(s(8642),s(5936)),r=s(3696),a=s(5620),h=s(9067),l=s(4949),c=s(6472),u=s(6137),p=(s(5676),e([r,a,h,l,c,u]));[r,a,h,l,c,u]=p.then?(await p)():p;class d{static CLOSE_BUTTON={x:15.75,y:14.75,width:3,height:1.75};static POKEMON_PANEL={x:10.5,y:0,width:10.5,height:17};static INFO_PANEL={x:0,y:0,width:10.5,height:17};constructor(e,t){this.enum=this.feedInformation(t),this.background=new h.Z,this.pokemonPanel=new c.Z(d.POKEMON_PANEL.x+.25,d.POKEMON_PANEL.y,d.POKEMON_PANEL.width-.5,d.POKEMON_PANEL.height,{panelColour:o.Z.DarkGrey,borderColour:this.enum.Colour}),this.infoPanel=new c.Z(d.INFO_PANEL.x+.25,d.INFO_PANEL.y,d.INFO_PANEL.width-.5,d.INFO_PANEL.height,{panelColour:o.Z.DarkGrey,borderColour:this.enum.Colour}),this.selectButton=new l.Z(17,14,3,2,"Select"),this.backButton=new l.Z(1,14,3,2,"Back"),this.text=this.enum.Text,this.abilities=this.enum.Abilities,this.weaknesses=this.enum.Weaknesses,this.types=this.enum.Types,this.cutScenePokemon=e,this.originalPositionX=e.position.x,this.originalPositionY=e.position.y,this.originalDimensionsX=e.dimensions.x,this.originalDimensionsY=e.dimensions.y,this.cutScenePokemon.dimensions.x=150,this.cutScenePokemon.dimensions.y=150,this.name=this.enum.Name,this.cutScenePokemon.position.x=this.pokemonPanel.position.x+this.pokemonPanel.dimensions.x/2-this.cutScenePokemon.dimensions.x/2,this.cutScenePokemon.position.y=this.pokemonPanel.dimensions.y/2-this.cutScenePokemon.dimensions.y/2,this.cutScenePokemon.isHovering=!1,this.titleFont=14,this.fontFamily="PokemonGB",this.fontColour=o.Z.White,this.fontSize=8}feedInformation(e){switch(e){case 0:return n.Z.Bulbasaur;case 1:return n.Z.Charmander;case 2:return n.Z.Squirtle}}update(e){}render(){this.background.render(),this.pokemonPanel.render(),this.infoPanel.render(),this.cutScenePokemon.render(),this.renderInfo(),this.selectButton.render(),this.backButton.render()}renderInfo(){r.Do.save(),r.Do.font=`${this.titleFont}px ${this.fontFamily}`,r.Do.fillStyle=this.fontColour;const e=r.Do.measureText(this.name).width;r.Do.fillText(this.name,this.infoPanel.position.x+this.infoPanel.dimensions.x/2-e/2,this.infoPanel.position.y+25),r.Do.font=`8px ${this.fontFamily}`;let t="";this.types.forEach(((e,s)=>{t+=0==s?e:`, ${e}`}));let s,i=this.getLines(this.text,this.infoPanel.dimensions.x-25),o=i.length-1;i.forEach(((e,t)=>{r.Do.fillText(e,this.infoPanel.position.x+10,this.infoPanel.position.y+50+10*t),t===o&&(s=this.infoPanel.position.y+50+10*t)})),r.Do.fillText(`Type(s): ${t}`,this.infoPanel.position.x+10,s+20,this.infoPanel.dimensions.x-25);let n="";this.weaknesses.forEach(((e,t)=>{n+=0==t?e:`, ${e}`}));let a=this.getLines(`Weakness(es): ${n}`,this.infoPanel.dimensions.x-25),h=a.length-1;a.forEach(((e,t)=>{r.Do.fillText(`${e}`,this.infoPanel.position.x+10,s+40+10*t),h===t&&(s=s+40+10*t)})),r.Do.restore()}getLines(e,t){const s=e.split("\n"),i=[];return s.forEach((e=>{const s=e.replace(/\t+/g,"").split(" ");let o=s[0];r.Do.font=`${this.fontSize}px ${this.fontFamily}`;for(let e=1;e<s.length;e++){const n=s[e];r.Do.measureText(o+" "+n).width<t?o+=" "+n:(i.push(o),o=n)}i.push(o)})),i}}i()}catch(e){i(e)}}))},7609:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>l});var o=s(8026),n=s(5127),r=s(3696),a=s(6472),h=e([r,a]);[r,a]=h.then?(await h)():h;class l extends a.Z{constructor(e,t,s,i,n,h={},l=!1){super(e,t,s,i,h),this.fontSize=h.fontSize??a.Z.FONT_SIZE,this.fontColour=h.fontColour??o.Z.Black,this.fontFamily=h.fontFamily??a.Z.FONT_FAMILY,this.isAdvanceable=h.isAdvanceable??!0,this.nextArrowAlpha=1,this.endOfText=!1,this.isClosed=!1,this.pages=this.createPages(n,this.dimensions.x-3*this.padding),this.centerText=l,this.isAdvanceable&&(this.arrowTimer=this.flashAdvanceableArrow()),this.next(),this.clickListener=()=>this.continue(),r.JQ.addEventListener("mousedown",this.clickListener)}update(){(r.XP.Enter||r.XP[" "])&&(r.XP.Enter=!1,r.XP[" "]=!1,this.continue())}continue(){r.jX.play(n.Z.SelectionChoice),this.next()}render(){super.render(),r.Do.save(),this.renderText(),this.isAdvanceable,this.renderNextArrow(),r.Do.restore()}renderText(){r.Do.textBaseline="top",r.Do.font=`${this.fontSize}px ${this.fontFamily}`,r.Do.fillStyle=this.fontColour,this.pageToDisplay.forEach(((e,t)=>{const s=r.Do.measureText(e).width,i=this.centerText?(this.dimensions.x-s-this.padding)/2:0;r.Do.fillText(e,this.position.x+this.padding+i,this.position.y+t*this.fontSize+this.padding)}))}renderNextArrow(){r.Do.beginPath(),r.Do.translate(this.position.x+this.dimensions.x-20,this.position.y+this.dimensions.y-15),r.Do.moveTo(0,0),r.Do.lineTo(10,0),r.Do.lineTo(5,5),r.Do.lineTo(0,0),r.Do.globalAlpha=this.nextArrowAlpha,r.Do.fill(),r.Do.closePath()}createPages(e,t){const s=this.getLines(e,t),i=Math.floor((this.dimensions.y-this.padding)/this.fontSize),o=Math.ceil(s.length/i),n=[];for(let e=0;e<o;e++){n.push([]);for(let t=0;t<i&&0!==s.length;t++)n[e][t]=s.splice(0,1)}return n}next(){this.endOfText?(this.toggle(),this.arrowTimer.clear(),this.isClosed=!0,r.JQ.removeEventListener("mousedown",this.clickListener)):this.nextPage()}nextPage(){this.pageToDisplay=this.pages.splice(0,1)[0],0===this.pages.length&&(this.endOfText=!0)}getLines(e,t){const s=e.split("\n"),i=[];return s.forEach((e=>{const s=e.replace(/\t+/g,"").split(" ");let o=s[0];r.Do.font=`${this.fontSize}px ${this.fontFamily}`;for(let e=1;e<s.length;e++){const n=s[e];r.Do.measureText(o+" "+n).width<t?o+=" "+n:(i.push(o),o=n)}i.push(o)})),i}flashAdvanceableArrow(){return r.HT.addTask((()=>{this.nextArrowAlpha=1===this.nextArrowAlpha?0:1}),.75)}}i()}catch(e){i(e)}}))},6137:(e,t,s)=>{s.a(e,(async(e,i)=>{try{s.d(t,{Z:()=>r});var o=s(6472),n=e([o]);o=(n.then?(await n)():n)[0];class r extends o.Z{constructor(e,t,s,i,o=null,n={}){super(e,t,s,i,n),this.sprite=o}render(){super.render()}}i()}catch(e){i(e)}}))},5676:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(8038),o=s(1989),n=s(8347);class r{static FONT_SIZE=n.Z.SIZE/2;static FONT_FAMILY=o.Z.PokemonGB;constructor(e,t,s,o){this.position=new i.Z(e*n.Z.SIZE,t*n.Z.SIZE),this.dimensions=new i.Z(s*n.Z.SIZE,o*n.Z.SIZE)}}}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return o[e](s,s.exports,r),s.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},r.a=(o,n,r)=>{var a;r&&((a=[]).d=1);var h,l,c,u=new Set,p=o.exports,d=new Promise(((e,t)=>{c=t,l=e}));d[t]=p,d[e]=e=>(a&&e(a),u.forEach(e),d.catch((e=>{}))),o.exports=d,n((o=>{var n;h=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var n=[];n.d=0,o.then((e=>{r[t]=e,i(n)}),(e=>{r[s]=e,i(n)}));var r={};return r[e]=e=>e(n),r}}var a={};return a[e]=e=>{},a[t]=o,a})))(o);var r=()=>h.map((e=>{if(e[s])throw e[s];return e[t]})),l=new Promise((t=>{(n=()=>t(r)).r=0;var s=e=>e!==a&&!u.has(e)&&(u.add(e),e&&!e.d&&(n.r++,e.push(n)));h.map((t=>t[e](s)))}));return n.r?l:r()}),(e=>(e?c(d[s]=e):l(p),i(a)))),a&&(a.d=0)},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(2225)})();